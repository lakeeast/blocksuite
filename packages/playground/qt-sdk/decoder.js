/*
 For license information please see decoder.js.LICENSE.txt */
var zf=()=>(()=>{function Ea(Da){var va=Pa[Da];if(void 0!==va)return va.exports;va=Pa[Da]={exports:{}};return fb[Da](va,va.exports,Ea),va.exports}var fb={554:(Da,va,fa)=>{var la=fa(22);Da.exports=function(T,W){return new Promise(function(U,I){function K(D){I(D||Error("Aborted"))}function x(D,p){D.zy?K(D):m.retry(D)?C.fv&&C.fv(D,p):I(m.Xn())}var m,C=W||{};"randomize"in C||(C.Go=!0);(m=la.no(C)).Fh(function(D){try{var p=T(K,D)}catch(z){return void x(z,D)}Promise.resolve(p).then(U).catch(function(z){x(z,
D)})})})}},659:Da=>{function va(){}function fa(I,K,x){this.Ca=I;this.context=K;this.once=x||!1}function la(I,K,x,m,C){if("function"!=typeof x)throw new TypeError("The listener must be a function");x=new fa(x,m||I,C);K=U?U+K:K;return I.Nb[K]?I.Nb[K].Ca?I.Nb[K]=[I.Nb[K],x]:I.Nb[K].push(x):(I.Nb[K]=x,I.fm++),I}function T(I,K){0==--I.fm?I.Nb=new va:delete I.Nb[K]}function W(){this.Nb=new va;this.fm=0}var U="~";Object.create&&(va.prototype=Object.create(null),(new va).__proto__||(U=!1));W.prototype.Wd=
function(I){I=this.Nb[U?U+I:I];if(!I)return[];if(I.Ca)return[I.Ca];for(var K=0,x=I.length,m=Array(x);K<x;K++)m[K]=I[K].Ca;return m};W.prototype.emit=function(I,K,x,m,C,D){var p=U?U+I:I;if(!this.Nb[p])return!1;var z,G=this.Nb[p],L=arguments.length;if(G.Ca){switch(G.once&&this.removeListener(I,G.Ca,void 0,!0),L){case 1:return G.Ca.call(G.context),!0;case 2:return G.Ca.call(G.context,K),!0;case 3:return G.Ca.call(G.context,K,x),!0;case 4:return G.Ca.call(G.context,K,x,m),!0;case 5:return G.Ca.call(G.context,
K,x,m,C),!0;case 6:return G.Ca.call(G.context,K,x,m,C,D),!0}p=1;for(z=Array(L-1);p<L;p++)z[p-1]=arguments[p];G.Ca.apply(G.context,z)}else{var ca=G.length;for(p=0;p<ca;p++)switch(G[p].once&&this.removeListener(I,G[p].Ca,void 0,!0),L){case 1:G[p].Ca.call(G[p].context);break;case 2:G[p].Ca.call(G[p].context,K);break;case 3:G[p].Ca.call(G[p].context,K,x);break;case 4:G[p].Ca.call(G[p].context,K,x,m);break;default:if(!z){var Y=1;for(z=Array(L-1);Y<L;Y++)z[Y-1]=arguments[Y]}G[p].Ca.apply(G[p].context,z)}}return!0};
W.prototype.on=function(I,K,x){return la(this,I,K,x,!1)};W.prototype.once=function(I,K,x){return la(this,I,K,x,!0)};W.prototype.removeListener=function(I,K,x,m){I=U?U+I:I;if(!this.Nb[I])return this;if(!K)return T(this,I),this;var C=this.Nb[I];if(C.Ca)C.Ca!==K||m&&!C.once||x&&C.context!==x||T(this,I);else{for(var D=0,p=[],z=C.length;D<z;D++)(C[D].Ca!==K||m&&!C[D].once||x&&C[D].context!==x)&&p.push(C[D]);p.length?this.Nb[I]=1===p.length?p[0]:p:T(this,I)}return this};W.prototype.off=W.prototype.removeListener;
W.prototype.addListener=W.prototype.on;W.prefixed=U;W.EventEmitter=W;Da.exports=W},22:(Da,va,fa)=>{Da.exports=fa(813)},813:(Da,va,fa)=>{var la=fa(579);va.no=function(T){var W=va.Gw(T);return new la(W,{Yh:T&&(T.Yh||T.Gi===1/0),Tg:T&&T.Tg,$n:T&&T.$n})};va.Gw=function(T){if(T instanceof Array)return[].concat(T);var W={Gi:10,Gt:2,eo:1E3,ao:1/0,Go:!1};for(U in T)W[U]=T[U];if(W.eo>W.ao)throw Error("minTimeout is greater than maxTimeout");var U=[];for(var I=0;I<W.Gi;I++)U.push(this.Nm(I,W));return T&&T.Yh&&
!U.length&&U.push(this.Nm(I,W)),U.sort(function(K,x){return K-x}),U};va.Nm=function(T,W){return Math.min(Math.round((W.Go?Math.random()+1:1)*Math.max(W.eo,1)*Math.pow(W.Gt,T)),W.ao)};va.ha=function(T,W,U){if(W instanceof Array&&(U=W,W=null),!U)for(var I in U=[],T)"function"==typeof T[I]&&U.push(I);for(I=0;I<U.length;I++){var K=U[I];T[K]=function(x){var m=va.no(W),C=Array.prototype.slice.call(arguments,1),D=C.pop();C.push(function(p){m.retry(p)||(p&&(arguments[0]=m.Xn()),D.apply(this,arguments))});
m.Fh(function(){x.apply(T,C)})}.bind(T,T[K]);T[K].options=W}}},579:Da=>{function va(fa,la){"boolean"==typeof la&&(la={Yh:la});this.Zr=JSON.parse(JSON.stringify(fa));this.Ch=fa;this.Hj=la||{};this.Xr=la&&la.$n||1/0;this.Fj=null;this.bd=[];this.Xf=1;this._timer=this.pm=this.xe=this.xh=this.qm=null;this.Hj.Yh&&(this.Bj=this.Ch.slice(0))}Da.exports=va;va.prototype.reset=function(){this.Xf=1;this.Ch=this.Zr.slice(0)};va.prototype.stop=function(){this.xe&&clearTimeout(this.xe);this._timer&&clearTimeout(this._timer);
this.Ch=[];this.Bj=null};va.prototype.retry=function(fa){if(this.xe&&clearTimeout(this.xe),!fa)return!1;var la=(new Date).getTime();if(fa&&la-this.pm>=this.Xr)return this.bd.push(fa),this.bd.unshift(Error("RetryOperation timeout occurred")),!1;this.bd.push(fa);fa=this.Ch.shift();if(void 0===fa){if(!this.Bj)return!1;this.bd.splice(0,this.bd.length-1);fa=this.Bj.slice(-1)}var T=this;return this._timer=setTimeout(function(){T.Xf++;T.xh&&(T.xe=setTimeout(function(){T.xh(T.Xf)},T.qm),T.Hj.Tg&&T.xe.Tg());
T.Fj(T.Xf)},fa),this.Hj.Tg&&this._timer.Tg(),!0};va.prototype.Fh=function(fa){this.Fj=fa;var la=this;this.xh&&(this.xe=setTimeout(function(){la.xh()},la.qm));this.pm=(new Date).getTime();this.Fj(this.Xf)};va.prototype.Lw=function(fa){console.log("Using RetryOperation.try() is deprecated");this.Fh(fa)};va.prototype.start=function(fa){console.log("Using RetryOperation.start() is deprecated");this.Fh(fa)};va.prototype.start=va.prototype.Lw;va.prototype.errors=function(){return this.bd};va.prototype.Xn=
function(){if(0===this.bd.length)return null;for(var fa={},la=null,T=0,W=0;W<this.bd.length;W++){var U=this.bd[W],I=U.message,K=(fa[I]||0)+1;fa[I]=K;K>=T&&(la=U,T=K)}return la}},838:(Da,va,fa)=>{function la(W){this.fj=[];this.Id=this.Description=this.Title="";this.fj=W}fa.d(va,{l:()=>T});var T=function(){function W(){}return W.cn=function(U){var I=new la(JSON.parse(U.settings));return I.Description=U.description,I.Id=U.id,I.Title=U.name,I},W}()},76:(Da,va,fa)=>{fa.d(va,{h:()=>D});const la=function(){function p(){this.Mb=
this.sa=0;this.Bc=this.jc=this.Y=!1;this.dm=[];this.Xl(null,null,0,0,!1,!1,!1,!1)}return p.prototype.Xl=function(z,G,L,ca,Y,Q,A){this.jb=z;this.sb=G;this.sa=L;this.Mb=ca;this.Y=Y;this.jc=Q;this.Bc=A},p.prototype.sl=function(z){this.dm.push(z)},p.prototype.tr=function(z){this.js=z},p.prototype.toString=function(){return this.jb?this.jb.toString():""},Object.defineProperty(p.prototype,"TagString",{get:function(){return this.toString()},enumerable:!1,configurable:!0}),p.prototype.Bd=function(){return this.sb},
p}();var T=fa(195),W=fa(468);const U=function(){function p(z){this.Y=z}return p.prototype.Initialize=function(z){this.O=4;var G=z.getUint16(0,this.Y);z=z.getUint16(2,this.Y);return this.jb=new W.h(G,z),!0},p}();var I=fa(68);const K=function(){function p(z,G,L){this.Gj=z;this.Y=G;this.Bc=L}return p.prototype.Initialize=function(z){if(this.sa=0,this.Gj)this.O=4,this.sb=null,this.sa=z.getUint32(0,this.Y);else{if(this.sb=T.h.ij(z,0,2),this.Bc&&-1===I.h.rl.indexOf(this.sb))return!1;-1===I.h.Tl.indexOf(this.sb)?
(this.O=4,this.sa=z.getUint16(2,this.Y)):(this.O=8,this.sa=z.getUint32(4,this.Y))}return!0},p.prototype.Bd=function(){return this.sb},p}(),x=function(){function p(z,G,L){this.Hd=z;this.jc=G;this.Y=L}return p.prototype.Initialize=function(z){var G=this,L=!1,ca=0,Y=p.ul(z,ca);do{var Q=new U(this.Y);Q.Initialize(Y);var A=Q.jb,M=Y.getUint32(Q.O,this.Y);Q=Q.O+4;if(ca+=Q,65534===A.Group&&57344==A.Element){var y=T.h.Hl(M);A=new D(this.jc,this.Y,!1,65534,57357);Y=y?new DataView(Y.buffer,Y.byteOffset+Q):new DataView(Y.buffer,
Y.byteOffset+Q,M);A.Initialize(Y);A.Jd.forEach(function(na){G.Hd.sl(na)});ca+=A.O;Y=p.ul(z,ca)}else 65534===A.Group&&57565==A.Element&&(L=!0)}while(!1===L);return this.O=ca,!0},p.ul=function(z,G){return new DataView(z.buffer,z.byteOffset+G)},p}(),m=function(){function p(z,G,L){this.Hd=z;this.jc=G;this.Y=L;this.fh=0}return p.prototype.Initialize=function(z){var G=this,L=new U(this.Y);L.Initialize(z);var ca=z.getUint32(L.O,this.Y),Y=L.O+4+ca,Q=[];if(0===ca)this.fh=1,Q.push(0);else for(this.fh=ca/4,
ca=0;ca<this.fh;ca++){var A=z.getUint32(L.O+4+4*ca,this.Y);Q.push(A)}L=new D(!0,this.Y,!1,65534,57565);z=new DataView(z.buffer,z.byteOffset+Y);return L.Initialize(z),L.Jd.forEach(function(M){G.Hd.sl(M)}),G.Hd.tr(this.fh),this.O=Y+L.O,!0},p}(),C=function(){function p(z,G,L,ca,Y,Q){this.Hd=z;this.jc=G;this.Y=L;this.Bc=ca;this.Pd=Y;this.$e=Q;this.O=0}return p.prototype.Initialize=function(z){var G=this.O=0,L=new U(this.Y),ca=new K(this.jc,this.Y,this.Bc),Y=new DataView(z.buffer,z.byteOffset+G);if(L.Initialize(Y),
this.Pd&&L.jb.Group>this.Pd)return!1;G+=L.O;Y=new DataView(z.buffer,z.byteOffset+G);if(!1===ca.Initialize(Y))throw new SyntaxError("Fatal syntax error");var Q=ca.sa;Y=T.h.Hl(Q);var A=!1;(this.Pd&&this.$e&&L.jb.Group===this.Pd&&L.jb.Element===this.$e&&(A=!0),A)?Q=0:32736===L.jb.Group&&16===L.jb.Element?Y&&(Q=new m(this.Hd,this.jc,this.Y),A=new DataView(z.buffer,z.byteOffset+G+ca.O),Q.Initialize(A),Q=Q.O):Y&&(Q=new x(this.Hd,this.jc,this.Y),A=new DataView(z.buffer,z.byteOffset+G+ca.O),Q.Initialize(A),
Q=Q.O);ca.Bd();A=(G+=ca.O)+z.byteOffset;return this.Hd.Xl(L.jb,ca.Bd(),Q,A,this.Y,this.jc,this.Bc,Y),G+=Q,this.O=G,!0},p}(),D=function(){function p(z,G,L,ca,Y){this.jc=z;this.Y=G;this.Bc=L;this.Pd=ca;this.$e=Y;this.O=0}return p.prototype.Initialize=function(z){this.Jd=[];for(var G=this.O=0,L=!0;G<z.byteLength&&L;){var ca=new la,Y=new C(ca,this.jc,this.Y,this.Bc,this.Pd,this.$e);L=new DataView(z.buffer,z.byteOffset+G);if(L=Y.Initialize(L)){if(G+=Y.O,this.Pd&&this.$e&&ca.jb.Group===this.Pd&&ca.jb.Element===
this.$e)break;this.Jd.push(ca)}}return this.O=G,!0},p}()},751:(Da,va,fa)=>{fa.d(va,{h:()=>T});var la=fa(608);const T=function(){function W(){}return W.Qp=function(U,I,K,x,m){U=U.Ed;if(m>I.SamplesPerPixel)throw new RangeError("Channel is "+m+", but max is "+I.SamplesPerPixel);K=I.Ya*x+K;if(m=!0===I.Gl?K*I.SamplesPerPixel+m:I.Ya*I.Rows*m+K,I.Rf)if(8===I.BitsAllocated)m=U.getUint8(m);else{if(16!==I.BitsAllocated)throw new RangeError("BitsAllocated="+I.BitsAllocated+", and is not supported yet");m=U.getUint16(2*
m,!0)}else if(8===I.BitsAllocated)m=U.getInt8(m);else{if(16!==I.BitsAllocated)throw new RangeError("BitsAllocated="+I.BitsAllocated+", and is not supported yet");m=U.getInt16(2*m,!0)}return m*I.qe+I.le},W.Rq=function(U,I){I=I.Ed;for(var K,x=Number.MIN_VALUE,m=Number.MAX_VALUE,C=0;C<U.Ya*U.Rows*U.SamplesPerPixel;C++){if(U.Rf)if(8===U.BitsAllocated)K=I.getUint8(C);else{if(16!==U.BitsAllocated)throw new RangeError("BitsAllocated="+U.BitsAllocated+", and is not supported yet");K=I.getUint16(2*C,!0)}else if(8===
U.BitsAllocated)K=I.getInt8(C);else{if(16!==U.BitsAllocated)throw new RangeError("BitsAllocated="+U.BitsAllocated+", and is not supported yet");K=I.getInt16(2*C,!0)}x=Math.max(x,K);m=Math.min(m,K)}return[m,x]},W.Qq=function(U,I){I=U.jj(I);return I.Type!==la.h.Oc()?null:W.Rq(U.v,I)},W.Zq=function(U,I,K){U=255*((U-K.Nf)/K.Gd+.5);return I&&(U=255-U),Math.floor(Math.min(Math.max(U,0),255))},W}()},608:(Da,va,fa)=>{function la(D){this.Type=D}fa.d(va,{h:()=>C});var T=new la("image/bin","bin"),W=new la("image/raw",
"raw"),U=new la("image/jpeg","jpeg"),I=new la("image/jp2","jp2"),K=new la("image/rle","rle"),x=new la("image/jpll","jpll"),m=new la("image/jls","jls");const C=function(){function D(){}return D.Zg=function(){return T},D.Oc=function(){return W},D.Pf=function(){return U},D.Of=function(){return I},D.kj=function(){return x},D.lj=function(){return m},D.mj=function(){return K},D}()},195:(Da,va,fa)=>{fa.d(va,{h:()=>la});const la=function(){function T(){}return T.ij=function(W,U,I){var K=U+I;if(K>W.byteLength)throw new RangeError("DataView max length="+
W.byteLength+", but offset="+U+", length="+I);for(I="";U<K;U++){var x=W.getUint8(U);if(0===x)break;I+=String.fromCharCode(x)}return I},T.Hl=function(W){return 4294967295===W},T}()},12:(Da,va,fa)=>{function la(){}function T(x,m,C){this.Uf=x;this.Vf=m;this.jh=C}fa.d(va,{h:()=>K});var W=fa(195),U=fa(701);fa(698);fa(468);var I=fa(76);const K=function(){function x(){}return x.G=function(m,C){return(m=W.h.ij(C,m.Mb,m.sa))?m.replace(/^\s+|\s+$/g,""):m},x.u=function(m,C,D){for(var p=0;p<m.length;p++){var z=
m[p];if(z.jb.Group==C&&z.jb.Element==D)return z}return null},x.Nc=function(m,C,D){var p=m.js;m=m.dm;if(1<p||1===m.length)return C=m[C],new DataView(D.buffer,C.Mb,C.sa);if(1===p){var z=0;m.forEach(function(ca){z+=ca.sa});var G=new Int8Array(z),L=0;return m.forEach(function(ca){G.set(new Uint8Array(D.buffer.slice(ca.Mb,ca.Mb+ca.sa)),L);L+=ca.sa}),new DataView(G.buffer)}throw new RangeError("Number of frames is unknown for the data element");},x.Qf=function(m,C){return(m=x.u(m,2,16))?x.G(m,C):"1.2.840.10008.1.2"},
x.Bl=function(m,C){return(m=x.u(m,40,16))?x.Ad(m,C):0},x.yl=function(m,C){return(m=x.u(m,40,17))?x.Ad(m,C):0},x.Up=function(m,C){return(m=x.u(m,40,8))?(C=x.G(m,C),parseInt(C)):1},x.Mp=function(m,C){return(m=x.u(m,40,256))?x.Ad(m,C):0},x.Jq=function(m,C){return(m=x.u(m,40,2))?x.Ad(m,C):0},x.tq=function(m,C){return(m=x.u(m,40,4))?x.G(m,C):null},x.Np=function(m,C){return(m=x.u(m,40,257))?x.Ad(m,C):0},x.bq=function(m,C){return(m=x.u(m,40,258))?x.Ad(m,C):0},x.vq=function(m,C){return(m=x.u(m,40,6))?x.Ad(m,
C):0},x.uq=function(m,C){return(m=x.u(m,40,259))?x.Ad(m,C):0},x.iq=function(m,C){if(m=x.u(m,40,4178))if(C=x.G(m,C))return parseFloat(C);return 0},x.Tq=function(m,C){if(m=x.u(m,40,4179))if(C=x.G(m,C))return parseFloat(C);return 1},x.Yq=function(m,C){var D=[],p=x.u(m,40,4176),z=x.u(m,40,4177);m=x.u(m,40,4181);if(p&&z){p=x.G(p,C);var G=x.G(z,C);if(p&&G){z=p.split("\\");p=G.split("\\");G=[];var L=null;if(m&&(L=x.G(m,C))&&(G=L.split("\\")),z.length===p.length&&0<z.length)for(C=0;C<z.length;C++)m=null,
G.length===z.length&&(m=G[C]),m||="DEFAULT",D.push(new U.h(parseFloat(z[C]),parseFloat(p[C]),!1,m))}}return D},x.Uq=function(m,C){var D=x.u(m,40,48),p=x.u(m,24,136);null===p&&(p=x.u(m,24,80));var z=0;p&&(z=x.G(p,C),z=parseFloat(z));return(D||=x.u(m,24,4452),D||=x.u(m,24,8208),D)?(m=x.G(D,C).split("\\"),new T(parseFloat(m[0]),parseFloat(m[1]),z,"mm")):null},x.Ol=function(m,C){return Array(Math.max(C-String(m).length+1,0)).join("0")+m},x.gq=function(m,C,D,p){var z=x.u(m,32,19),G=x.u(m,8,24);m="UNKNOWN";
null!==G&&(m=x.G(G,C));G="";return(1<p&&(G=x.Ol(D,10)+"."),z)?(C=x.G(z,C))?G+x.Ol(parseInt(C),10)+"."+m:G+m:G+m},x.Nq=function(m,C){return(m=x.u(m,32,14))?x.G(m,C):null},x.Vq=function(m,C){return(m=x.u(m,32,13))?x.G(m,C):null},x.Fq=function(m,C){if(m=x.u(m,40,4178))if(C=x.G(m,C))return parseFloat(C);return 0},x.Gq=function(m,C){if(m=x.u(m,40,4179))if(C=x.G(m,C))return parseFloat(C);return 1},x.Lq=function(m,C){return(m=x.u(m,8,33))?x.G(m,C):null},x.Jp=function(m,C){return(m=x.u(m,8,34))?x.G(m,C):
null},x.Kp=function(m,C){return(m=x.u(m,32,18))?parseInt(x.G(m,C)):0},x.Lp=function(m,C){return(m=x.u(m,8,50))?x.G(m,C):null},x.hq=function(m,C){return(m=x.u(m,32,19))?x.G(m,C):null},x.$p=function(m,C){return(m=x.u(m,24,4195))?parseFloat(x.G(m,C)):0},x.Vp=function(m,C){return(m=x.u(m,24,4368))?parseFloat(x.G(m,C)):0},x.Wp=function(m,C){return(m=x.u(m,24,4369))?parseFloat(x.G(m,C)):0},x.wq=function(m,C){return(m=x.u(m,24,5392))?parseFloat(x.G(m,C)):0},x.xq=function(m,C){return(m=x.u(m,24,5393))?parseFloat(x.G(m,
C)):0},x.pq=function(m,C){return(m=x.u(m,16,32))?x.G(m,C):null},x.Pq=function(m,C){return(m=x.u(m,32,14))?x.G(m,C):null},x.nj=function(m,C,D,p){return(m=x.u(m,C,D))?x.G(m,p):null},x.kq=function(m,C){return(m=x.u(m,8,96))?x.G(m,C):null},x.Mq=function(m,C){return(m=x.u(m,8,4158))?x.G(m,C):""},x.qq=function(m,C){return(m=x.u(m,16,16))?x.G(m,C):null},x.rq=function(m,C){return(m=x.u(m,16,4144))?parseFloat(x.G(m,C)):0},x.Xq=function(m,C){return(m=x.u(m,84,4097))?x.G(m,C):null},x.Kq=function(m,C){var D=
[];if("SQ"==m.Bd()){var p=m.jc,z=new I.h(p,m.Y,m.Bc,65534,57565),G=m.Mb,L=G+m.sa;0==p&&(m=new DataView(C.buffer,G+8),z.Initialize(m),z.Jd.forEach(function(ca){ca.Mb<L&&D.push(ca)}))}return D},x.Dq=function(m,C){return(m=x.u(m,24,4210))?x.G(m,C):null},x.Cq=function(m,C){return(m=x.u(m,24,4216))?x.G(m,C):null},x.Aq=function(m,C){return(m=x.u(m,24,4212))?parseFloat(x.G(m,C)):0},x.yq=function(m,C){return(m=x.u(m,24,4213))?parseFloat(x.G(m,C)):0},x.zq=function(m,C){return(m=x.u(m,24,4214))?parseFloat(x.G(m,
C)):0},x.Eq=function(m,C){return(m=x.u(m,24,4211))?x.G(m,C):null},x.Tp=function(m,C){return(m=x.u(m,84,4897))?parseFloat(x.G(m,C)):0},x.Xp=function(m,C){return(m=x.u(m,84,4898))?parseFloat(x.G(m,C)):0},x.Sp=function(m,C){return(m=x.u(m,84,4354))?x.G(m,C):null},x.Bq=function(m,C){var D=[];if(m=x.u(m,84,22)){var p=x.Kq(m,C);m=x.Dq(p,C);var z=x.Aq(p,C),G=x.yq(p,C),L=x.zq(p,C),ca=x.Eq(p,C);C=x.Cq(p,C);p=new la;p.RadiopharmaceuticalStartTime=m;p.RadionuclideTotalDose=z;p.RadionuclideHalfLife=G;p.RadionuclidePositronFraction=
L;p.RadiopharmaceuticalStopTime=ca;p.RadiopharmaceuticalStartDateTime=C;D.push(p)}return D},x.cq=function(m,C){m=x.u(m,32,55);if(null===m)return[1,0,0,0,1,0];C=x.G(m,C);return x.Pl(C)},x.Hq=function(m,C){return(m=x.u(m,8,22))?x.G(m,C):null},x.Zp=function(m,C){return(m=x.u(m,32,82))?x.G(m,C):null},x.fq=function(m,C){return(m=x.u(m,8,8))?x.G(m,C).split("\\"):[]},x.Iq=function(m,C){return(m=x.u(m,8,24))?x.G(m,C):null},x.eq=function(m,C){m=x.u(m,32,50);if(null===m)return[0,0,0];C=x.G(m,C);return x.Pl(C)},
x.Sq=function(m,C){return(m=x.u(m,24,80))?parseFloat(x.G(m,C)):0},x.Oq=function(m,C){return(m=x.u(m,8,49))?x.G(m,C):null},x.Rp=function(m,C){return(m=x.u(m,40,81))?x.G(m,C).split("\\"):[]},x.lq=function(m,C){return(m=x.u(m,40,8))?parseInt(x.G(m,C)):1},x.Pl=function(m){return m.split("\\").map(Number)},x.Ad=function(m,C){if(2!=m.sa)throw new TypeError("Uint16 length should be 2, not "+m.sa);return C.getUint16(m.Mb,m.Y)},x}()},698:(Da,va,fa)=>{fa.d(va,{h:()=>m});var la=fa(701),T=fa(12),W=fa(608),U=
fa(751),I=fa(468),K=fa(838);const x=function(){function C(){}return C.wp=function(D,p){var z=p;return D.fj.forEach(function(G){"00100010"===G.Id&&"substitute"===G.Method&&(z=G.Value)}),z&&z.length>p.length&&(z=z.substring(0,p.length)),z},C}(),m=function(){function C(D,p,z,G,L){this.v=D;this.th=p;this.eg=z;this.T=G;this.vh=L;this.dg=this.wh=null;this.Modality=this.Yb=this.Ve="";this.gj=0;this.bj=this.Ib=null}return C.prototype.jj=function(D){if(null===this.wh&&(this.wh=this.th.yc(this.gj,this.v,T.h.u(this.T,
32736,16),D,this.eg),this.dg=U.h.Qq(this,D),this.wh.Type===W.h.Oc())){D=this.dg[0]*this.v.qe+this.v.le;var p=this.dg[1]*this.v.qe+this.v.le;if(!this.Ib){var z=(2<<this.v.HighBit)*this.v.qe+this.v.le,G=0*this.v.qe+this.v.le,L=z-G;this.bj=new la.h((D+p)/2,p-D,!0,"AUTO");L>2*this.bj.Gd?this.Ib=this.bj:this.Ib=new la.h((z+G)/2,L,!0,"AUTO")}}return this.wh},C.prototype.nq=function(D){return this.th.zd(this.gj,this.v,T.h.u(this.T,32736,16),D)},C.prototype.pa=function(D,p,z,G,L){(D=T.h.nj(2>=z?this.vh:this.T,
z,G,D))&&p.push([(new I.h(z,G)).toString(),D,L])},C.Pp=function(D,p){var z="";return 0<D?(z+="RAO ",z+=D.toPrecision(3).toString()):0>D?(z+="LAO ",z+=(-D).toPrecision(3).toString()):z+="AP ",z+="\uff0c",0>p?(z+="CAU ",z+=(-p).toPrecision(3).toString()):0<p?(z+="CRA ",z+=p.toPrecision(3).toString()):z+="AP ",z},C.prototype.hj=function(D){var p=[],z=T.h.nj(this.T,24,5392,D),G=T.h.nj(this.T,24,5393,D);z&&G&&p.push(["STATIC_ORIENTATION",C.Pp(-parseFloat(z),parseFloat(G)),!0]);this.pa(D,p,2,16,!1);this.pa(D,
p,16,16,!0);this.pa(D,p,16,32,!0);this.pa(D,p,16,48,!0);this.pa(D,p,16,64,!0);this.pa(D,p,8,128,!0);this.pa(D,p,32,16,!0);this.pa(D,p,32,13,!1);this.pa(D,p,32,4144,!0);this.pa(D,p,8,4158,!0);this.pa(D,p,32,16384,!0);this.pa(D,p,50,16384,!0);this.pa(D,p,24,135,!0);this.pa(D,p,24,128,!0);this.pa(D,p,24,129,!0);this.pa(D,p,8,34,!0);this.pa(D,p,32,17,!0);this.pa(D,p,16,4112,!0);this.pa(D,p,8,32,!1);this.pa(D,p,8,48,!1);this.pa(D,p,24,136,!0);this.pa(D,p,24,80,!0);this.pa(D,p,32,4161,!0);this.pa(D,p,32,
82,!1);this.pa(D,p,32,50,!1);this.pa(D,p,32,55,!1);z=T.h.yl(this.T,D);D=T.h.Bl(this.T,D);return p.push(["0x0028001X",z.toString()+"/"+D.toString(),!1]),p},C.prototype.jq=function(){if(null===this.dg)throw Error("Min/Max has not been initialized");return this.dg},C.prototype.wi=function(D,p,z){z=z?K.l.cn(z):null;D.Columns=this.v.Ya;D.Rows=this.v.Rows;D.PhotometricInterpretation=this.v.PhotometricInterpretation;D.BitsAllocated=this.v.BitsAllocated;D.BitsStored=this.v.BitsStored;D.PixelRepresentation=
this.v.Rf?0:1;D.SamplesPerPixel=this.v.SamplesPerPixel;D.HighBit=this.v.HighBit;D.Modality=this.Modality;this.v.zb&&(D.PixelSpacing=[this.v.zb.Uf,this.v.zb.Vf]);0<this.v.Wf.length?(D.WindowCenter=this.v.Wf[0].Nf,D.WindowWidth=this.v.Wf[0].Gd):this.Ib&&(D.WindowCenter=this.Ib.Nf,D.WindowWidth=this.Ib.Gd);D.InstanceNumber=parseInt(T.h.hq(this.T,p));D.SOPClassUID=T.h.Hq(this.T,p);D.FrameOfReferenceUID=T.h.Zp(this.T,p);D.ImageType=T.h.fq(this.T,p);D.SOPInstanceUID=T.h.Iq(this.T,p);D.SeriesInstanceUID=
T.h.Nq(this.T,p);D.StudyInstanceUID=T.h.Vq(this.T,p);D.RescaleIntercept=T.h.Fq(this.T,p);D.RescaleSlope=T.h.Gq(this.T,p);D.SeriesDate=T.h.Lq(this.T,p);D.AcquisitionDate=T.h.Jp(this.T,p);D.AcquisitionNumber=T.h.Kp(this.T,p);D.AcquisitionTime=T.h.Lp(this.T,p);D.ImageOrientationPatient=T.h.cq(this.T,p);D.ImagePositionPatient=T.h.eq(this.T,p);D.SliceThickness=T.h.Sq(this.T,p);D.NumberOfFrames=T.h.lq(this.T,p);D.TransferSyntax=T.h.Qf(this.vh,p);D.FrameTime=T.h.$p(this.T,p);D.DistanceSourceToDetector=T.h.Vp(this.T,
p);D.DistanceSourceToPatient=T.h.Wp(this.T,p);D.PositionerPrimaryAngle=T.h.wq(this.T,p);D.PositionerSecondaryAngle=T.h.xq(this.T,p);D.PatientID=T.h.pq(this.T,p);D.SeriesDescription=T.h.Mq(this.T,p);D.PatientName=T.h.qq(this.T,p);D.PatientWeight=T.h.rq(this.T,p);D.Units=T.h.Xq(this.T,p);D.DecayFactor=T.h.Tp(this.T,p);D.DoseCalibrationFactor=T.h.Xp(this.T,p);D.DecayCorrection=T.h.Sp(this.T,p);D.SeriesTime=T.h.Oq(this.T,p);D.CorrectedImage=T.h.Rp(this.T,p);p=T.h.Bq(this.T,p);D.RadiopharmaceuticalInformationSequence=
0<p.length?p[0]:void 0;z&&(D.PatientName=x.wp(z,D.PatientName))},C}()},468:(Da,va,fa)=>{fa.d(va,{h:()=>la});const la=function(){function T(W,U){this.Group=W;this.Element=U}return T.prototype.aq=function(){return T.kh(this.Group)},T.prototype.Yp=function(){return T.kh(this.Element)},T.prototype.toString=function(){return"0x"+this.Hw()},T.prototype.Hw=function(){return this.aq()+this.Yp()},Object.defineProperty(T.prototype,"TagString",{get:function(){return this.toString()},enumerable:!1,configurable:!0}),
T.kh=function(W){return(W+65536).toString(16).substr(-4).toUpperCase()},T}()},369:(Da,va,fa)=>{function la(T,W){this.Ed=T;this.Type=W}fa.d(va,{h:()=>la})},68:(Da,va,fa)=>{fa.d(va,{h:()=>la});const la=function(){function T(){}return T.Tl="OB OW OF SQ UT UN".split(" "),T.rl="??;AE;AS;AT;CS;DA;DS;DT;FD;FL;IS;LO;LT;OB;OF;OW;PN;SH;SL;SQ;SS;ST;TM;UI;UL;UN;US;UT;OB or OW;US or SS;US or SS or OW".split(";"),T}()},701:(Da,va,fa)=>{function la(T,W,U,I){this.Nf=T;this.Gd=W;this.Description=I}fa.d(va,{h:()=>
la})},732:Da=>{Da.exports=function W(fa,la,T){function U(x){if(!la[x]){if(!fa[x]){if(I)return I(x,!0);var m=Error("Cannot find module '"+x+"'");throw m.code="MODULE_NOT_FOUND",m;}m=la[x]={exports:{}};fa[x][0].call(m.exports,function(C){return U(fa[x][1][C]||C)},m,m.exports,W,fa,la,T)}return la[x].exports}for(var I=void 0,K=0;K<T.length;K++)U(T[K]);return U}({1:[function(fa,la,T){function W(p){if(!(this instanceof W))return new W(p);p=this.options=K.assign({level:-1,method:8,Wj:16384,ua:15,Su:8,qb:0,
de:""},p||{});p.raw&&0<p.ua?p.ua=-p.ua:p.En&&0<p.ua&&16>p.ua&&(p.ua+=16);this.He=0;this.ca="";this.ended=!1;this.ed=[];this.U=new C;this.U.I=0;var z=I.rt(this.U,p.level,p.method,p.ua,p.Su,p.qb);if(0!==z)throw Error(m[z]);if(p.uk&&I.tt(this.U,p.uk),p.Pb){var G;if(G="string"==typeof p.Pb?x.fl(p.Pb):"[object ArrayBuffer]"===D.call(p.Pb)?new Uint8Array(p.Pb):p.Pb,0!==(z=I.st(this.U,G)))throw Error(m[z]);}}function U(p,z){z=new W(z);if(z.push(p,!0),z.He)throw z.ca||m[z.He];return z.result}var I=fa("./zlib/deflate"),
K=fa("./utils/common"),x=fa("./utils/strings"),m=fa("./zlib/messages"),C=fa("./zlib/zstream"),D=Object.prototype.toString;W.prototype.push=function(p,z){var G,L=this.U,ca=this.options.Wj;if(this.ended)return!1;z=z===~~z?z:!0===z?4:0;"string"==typeof p?L.input=x.fl(p):"[object ArrayBuffer]"===D.call(p)?L.input=new Uint8Array(p):L.input=p;L.Db=0;L.na=L.input.length;do{if(0===L.I&&(L.ya=new K.wc(ca),L.Ea=0,L.I=ca),1!==(G=I.Uh(L,z))&&0!==G)return this.Ne(G),!(this.ended=!0);0!==L.I&&(0!==L.na||4!==z&&
2!==z)||("string"===this.options.de?this.Gg(x.Gs(K.Mi(L.ya,L.Ea))):this.Gg(K.Mi(L.ya,L.Ea)))}while((0<L.na||0===L.I)&&1!==G);return 4===z?(G=I.qt(this.U),this.Ne(G),this.ended=!0,0===G):2!==z||(this.Ne(0),!(L.I=0))};W.prototype.Gg=function(p){this.ed.push(p)};W.prototype.Ne=function(p){0===p&&("string"===this.options.de?this.result=this.ed.join(""):this.result=K.jk(this.ed));this.ed=[];this.He=p;this.ca=this.U.ca};T.lx=W;T.Uh=U;T.lz=function(p,z){return(z=z||{}).raw=!0,U(p,z)};T.En=function(p,z){return(z=
z||{}).En=!0,U(p,z)}},{"./utils/common":3,"./utils/strings":4,"./zlib/deflate":8,"./zlib/messages":13,"./zlib/zstream":15}],2:[function(fa,la,T){function W(G){if(!(this instanceof W))return new W(G);var L=this.options=K.assign({Wj:16384,ua:0,de:""},G||{});L.raw&&0<=L.ua&&16>L.ua&&(L.ua=-L.ua,0===L.ua&&(L.ua=-15));!(0<=L.ua&&16>L.ua)||G&&G.ua||(L.ua+=32);15<L.ua&&48>L.ua&&0==(15&L.ua)&&(L.ua|=15);this.He=0;this.ca="";this.ended=!1;this.ed=[];this.U=new D;this.U.I=0;G=I.pu(this.U,L.ua);if(G!==m.re)throw Error(C[G]);
if(this.uk=new p,I.ou(this.U,this.uk),L.Pb&&("string"==typeof L.Pb?L.Pb=x.fl(L.Pb):"[object ArrayBuffer]"===z.call(L.Pb)&&(L.Pb=new Uint8Array(L.Pb)),L.raw&&(G=I.On(this.U,L.Pb))!==m.re))throw Error(C[G]);}function U(G,L){L=new W(L);if(L.push(G,!0),L.He)throw L.ca||C[L.He];return L.result}var I=fa("./zlib/inflate"),K=fa("./utils/common"),x=fa("./utils/strings"),m=fa("./zlib/constants"),C=fa("./zlib/messages"),D=fa("./zlib/zstream"),p=fa("./zlib/gzheader"),z=Object.prototype.toString;W.prototype.push=
function(G,L){var ca,Y,Q,A,M=this.U,y=this.options.Wj,na=this.options.Pb,Ca=!1;if(this.ended)return!1;L=L===~~L?L:!0===L?m.ph:m.Zl;"string"==typeof G?M.input=x.Fs(G):"[object ArrayBuffer]"===z.call(G)?M.input=new Uint8Array(G):M.input=G;M.Db=0;M.na=M.input.length;do{if(0===M.I&&(M.ya=new K.wc(y),M.Ea=0,M.I=y),(ca=I.Ak(M,m.Zl))===m.Cr&&na&&(ca=I.On(this.U,na)),ca===m.Br&&!0===Ca&&(ca=m.re,Ca=!1),ca!==m.qh&&ca!==m.re)return this.Ne(ca),!(this.ended=!0);M.Ea&&(0!==M.I&&ca!==m.qh&&(0!==M.na||L!==m.ph&&
L!==m.$l)||("string"===this.options.de?(Y=x.Sw(M.ya,M.Ea),Q=M.Ea-Y,A=x.Hs(M.ya,Y),M.Ea=Q,M.I=y-Q,Q&&K.kc(M.ya,M.ya,Y,Q,0),this.Gg(A)):this.Gg(K.Mi(M.ya,M.Ea))));0===M.na&&0===M.I&&(Ca=!0)}while((0<M.na||0===M.I)&&ca!==m.qh);return ca===m.qh&&(L=m.ph),L===m.ph?(ca=I.nu(this.U),this.Ne(ca),this.ended=!0,ca===m.re):L!==m.$l||(this.Ne(m.re),!(M.I=0))};W.prototype.Gg=function(G){this.ed.push(G)};W.prototype.Ne=function(G){G===m.re&&("string"===this.options.de?this.result=this.ed.join(""):this.result=K.jk(this.ed));
this.ed=[];this.He=G;this.ca=this.U.ca};T.vx=W;T.Ak=U;T.uA=function(G,L){return(L=L||{}).raw=!0,U(G,L)};T.RC=U},{"./utils/common":3,"./utils/strings":4,"./zlib/constants":6,"./zlib/gzheader":9,"./zlib/inflate":11,"./zlib/messages":13,"./zlib/zstream":15}],3:[function(fa,la,T){fa="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;T.assign=function(I){for(var K,x,m=Array.prototype.slice.call(arguments,1);m.length;){var C=m.shift();if(C){if("object"!=typeof C)throw new TypeError(C+
"must be non-object");for(var D in C)K=C,x=D,Object.prototype.hasOwnProperty.call(K,x)&&(I[D]=C[D])}}return I};T.Mi=function(I,K){return I.length===K?I:I.subarray?I.subarray(0,K):(I.length=K,I)};var W={kc:function(I,K,x,m,C){if(K.subarray&&I.subarray)I.set(K.subarray(x,x+m),C);else for(var D=0;D<m;D++)I[C+D]=K[x+D]},jk:function(I){var K,x;var m=x=0;for(K=I.length;m<K;m++)x+=I[m].length;var C=new Uint8Array(x);m=x=0;for(K=I.length;m<K;m++){var D=I[m];C.set(D,x);x+=D.length}return C}},U={kc:function(I,
K,x,m,C){for(var D=0;D<m;D++)I[C+D]=K[x+D]},jk:function(I){return[].concat.apply([],I)}};T.pw=function(I){I?(T.wc=Uint8Array,T.Xb=Uint16Array,T.Lf=Int32Array,T.assign(T,W)):(T.wc=Array,T.Xb=Array,T.Lf=Array,T.assign(T,U))};T.pw(fa)},{}],4:[function(fa,la,T){function W(m,C){if(65534>C&&(m.subarray&&K||!m.subarray&&I))return String.fromCharCode.apply(null,U.Mi(m,C));for(var D="",p=0;p<C;p++)D+=String.fromCharCode(m[p]);return D}var U=fa("./common"),I=!0,K=!0;try{new Uint8Array(1)}catch(m){K=!1}var x=
new U.wc(256);for(fa=0;256>fa;fa++)x[fa]=252<=fa?6:248<=fa?5:240<=fa?4:224<=fa?3:192<=fa?2:1;x[254]=x[254]=1;T.fl=function(m){var C,D,p,z,G=m.length,L=0;for(p=0;p<G;p++)55296==(64512&(C=m.charCodeAt(p)))&&p+1<G&&56320==(64512&(D=m.charCodeAt(p+1)))&&(C=65536+(C-55296<<10)+(D-56320),p++),L+=128>C?1:2048>C?2:65536>C?3:4;var ca=new U.wc(L);for(p=z=0;z<L;p++)55296==(64512&(C=m.charCodeAt(p)))&&p+1<G&&56320==(64512&(D=m.charCodeAt(p+1)))&&(C=65536+(C-55296<<10)+(D-56320),p++),128>C?ca[z++]=C:(2048>C?ca[z++]=
192|C>>>6:(65536>C?ca[z++]=224|C>>>12:(ca[z++]=240|C>>>18,ca[z++]=128|C>>>12&63),ca[z++]=128|C>>>6&63),ca[z++]=128|63&C);return ca};T.Gs=function(m){return W(m,m.length)};T.Fs=function(m){for(var C=new U.wc(m.length),D=0,p=C.length;D<p;D++)C[D]=m.charCodeAt(D);return C};T.Hs=function(m,C){var D,p,z,G=C||m.length,L=Array(2*G);for(C=D=0;C<G;)if(128>(p=m[C++]))L[D++]=p;else if(4<(z=x[p]))L[D++]=65533,C+=z-1;else{for(p&=2===z?31:3===z?15:7;1<z&&C<G;)p=p<<6|63&m[C++],z--;1<z?L[D++]=65533:65536>p?L[D++]=
p:(p-=65536,L[D++]=55296|p>>10&1023,L[D++]=56320|1023&p)}return W(L,D)};T.Sw=function(m,C){var D;(C=C||m.length)>m.length&&(C=m.length);for(D=C-1;0<=D&&128==(192&m[D]);)D--;return 0>D||0===D?C:D+x[m[D]]>C?D:C}},{"./common":3}],5:[function(fa,la){la.exports=function(T,W,U,I){var K=65535&T|0;T=T>>>16&65535|0;for(var x;0!==U;){for(U-=x=2E3<U?2E3:U;T=T+(K=K+W[I++]|0)|0,--x;);K%=65521;T%=65521}return K|T<<16|0}},{}],6:[function(fa,la){la.exports={Zl:0,ly:1,$l:2,iy:3,ph:4,Yx:5,py:6,re:0,qh:1,Cr:2,ey:-1,
ny:-2,Zx:-3,Br:-5,ky:0,Wx:1,Vx:9,$x:-1,gy:1,jy:2,my:3,hy:4,ay:0,Xx:0,oy:1,qy:2,by:8}},{}],7:[function(fa,la){var T=function(){for(var W,U=[],I=0;256>I;I++){W=I;for(var K=0;8>K;K++)W=1&W?3988292384^W>>>1:W>>>1;U[I]=W}return U}();la.exports=function(W,U,I,K){I=K+I;for(W^=-1;K<I;K++)W=W>>>8^T[255&(W^U[K])];return-1^W}},{}],8:[function(fa,la,T){function W(w,da){return w.ca=Ca[da],da}function U(w){for(var da=w.length;0<=--da;)w[da]=0}function I(w){var da=w.state,ea=da.pending;ea>w.I&&(ea=w.I);0!==ea&&
(A.kc(w.ya,da.Aa,da.Ig,ea,w.Ea),w.Ea+=ea,da.Ig+=ea,w.ee+=ea,w.I-=ea,da.pending-=ea,0===da.pending&&(da.Ig=0))}function K(w,da){M.ls(w,0<=w.bc?w.bc:-1,w.s-w.bc,da);w.bc=w.s;I(w.U)}function x(w,da){w.Aa[w.pending++]=da}function m(w,da){w.Aa[w.pending++]=da>>>8&255;w.Aa[w.pending++]=255&da}function C(w,da){var ea,R,xa=w.bo,za=w.s,ua=w.fc,Fa=w.ko,Sa=w.s>w.yb-262?w.s-(w.yb-262):0,Ga=w.window,ba=w.he,O=w.Xc,u=w.s+258,B=Ga[za+ua-1],E=Ga[za+ua];w.fc>=w.Cn&&(xa>>=2);Fa>w.D&&(Fa=w.D);do if(Ga[(ea=da)+ua]===
E&&Ga[ea+ua-1]===B&&Ga[ea]===Ga[za]&&Ga[++ea]===Ga[za+1]){za+=2;for(ea++;Ga[++za]===Ga[++ea]&&Ga[++za]===Ga[++ea]&&Ga[++za]===Ga[++ea]&&Ga[++za]===Ga[++ea]&&Ga[++za]===Ga[++ea]&&Ga[++za]===Ga[++ea]&&Ga[++za]===Ga[++ea]&&Ga[++za]===Ga[++ea]&&za<u;);if(R=258-(u-za),za=u-258,ua<R){if(w.tf=da,Fa<=(ua=R))break;B=Ga[za+ua-1];E=Ga[za+ua]}}while((da=O[da&ba])>Sa&&0!=--xa);return ua<=w.D?ua:w.D}function D(w){var da,ea,R,xa,za,ua,Fa,Sa,Ga,ba=w.yb;do{if(xa=w.rp-w.D-w.s,w.s>=ba+(ba-262)){A.kc(w.window,w.window,
ba,ba,0);w.tf-=ba;w.s-=ba;w.bc-=ba;for(da=ea=w.ci;R=w.head[--da],w.head[da]=ba<=R?R-ba:0,--ea;);for(da=ea=ba;R=w.Xc[--da],w.Xc[da]=ba<=R?R-ba:0,--ea;);xa+=ba}if(0===w.U.na)break;if(za=w.U,ua=w.window,Fa=w.s+w.D,Ga=void 0,(Sa=xa)<(Ga=za.na)&&(Ga=Sa),ea=0===Ga?0:(za.na-=Ga,A.kc(ua,za.input,za.Db,Ga,Fa),1===za.state.ha?za.V=y(za.V,ua,Ga,Fa):2===za.state.ha&&(za.V=na(za.V,ua,Ga,Fa)),za.Db+=Ga,za.ad+=Ga,Ga),w.D+=ea,3<=w.D+w.Sb)for(da=w.s-w.Sb,w.ga=w.window[da],w.ga=(w.ga<<w.kd^w.window[da+1])&w.jd;w.Sb&&
(w.ga=(w.ga<<w.kd^w.window[da+3-1])&w.jd,w.Xc[da&w.he]=w.head[w.ga],w.head[w.ga]=da,da++,w.Sb--,!(3>w.D+w.Sb)););}while(262>w.D&&0!==w.U.na)}function p(w,da){for(var ea,R;;){if(262>w.D){if(D(w),262>w.D&&0===da)return 1;if(0===w.D)break}if(ea=0,3<=w.D&&(w.ga=(w.ga<<w.kd^w.window[w.s+3-1])&w.jd,ea=w.Xc[w.s&w.he]=w.head[w.ga],w.head[w.ga]=w.s),0!==ea&&w.s-ea<=w.yb-262&&(w.la=C(w,ea)),3<=w.la)if(R=M.Qd(w,w.s-w.tf,w.la-3),w.D-=w.la,w.la<=w.Mk&&3<=w.D){for(w.la--;w.s++,w.ga=(w.ga<<w.kd^w.window[w.s+3-1])&
w.jd,ea=w.Xc[w.s&w.he]=w.head[w.ga],w.head[w.ga]=w.s,0!=--w.la;);w.s++}else w.s+=w.la,w.la=0,w.ga=w.window[w.s],w.ga=(w.ga<<w.kd^w.window[w.s+1])&w.jd;else R=M.Qd(w,0,w.window[w.s]),w.D--,w.s++;if(R&&(K(w,!1),0===w.U.I))return 1}return w.Sb=2>w.s?w.s:2,4===da?(K(w,!0),0===w.U.I?3:4):w.pc&&(K(w,!1),0===w.U.I)?1:2}function z(w,da){for(var ea,R,xa;;){if(262>w.D){if(D(w),262>w.D&&0===da)return 1;if(0===w.D)break}if(ea=0,3<=w.D&&(w.ga=(w.ga<<w.kd^w.window[w.s+3-1])&w.jd,ea=w.Xc[w.s&w.he]=w.head[w.ga],
w.head[w.ga]=w.s),w.fc=w.la,w.zo=w.tf,w.la=2,0!==ea&&w.fc<w.Mk&&w.s-ea<=w.yb-262&&(w.la=C(w,ea),5>=w.la&&(1===w.qb||3===w.la&&4096<w.s-w.tf)&&(w.la=2)),3<=w.fc&&w.la<=w.fc){xa=w.s+w.D-3;R=M.Qd(w,w.s-1-w.zo,w.fc-3);w.D-=w.fc-1;for(w.fc-=2;++w.s<=xa&&(w.ga=(w.ga<<w.kd^w.window[w.s+3-1])&w.jd,ea=w.Xc[w.s&w.he]=w.head[w.ga],w.head[w.ga]=w.s),0!=--w.fc;);if(w.Le=0,w.la=2,w.s++,R&&(K(w,!1),0===w.U.I))return 1}else if(w.Le){if(M.Qd(w,0,w.window[w.s-1])&&K(w,!1),w.s++,w.D--,0===w.U.I)return 1}else w.Le=1,
w.s++,w.D--}return w.Le&&(M.Qd(w,0,w.window[w.s-1]),w.Le=0),w.Sb=2>w.s?w.s:2,4===da?(K(w,!0),0===w.U.I?3:4):w.pc&&(K(w,!1),0===w.U.I)?1:2}function G(w,da,ea,R,xa){this.gu=w;this.Nu=da;this.av=ea;this.Mu=R;this.Lt=xa}function L(){this.U=null;this.status=0;this.Aa=null;this.ha=this.pending=this.Ig=this.tc=0;this.ba=null;this.Jc=0;this.method=8;this.rf=-1;this.he=this.ql=this.yb=0;this.window=null;this.rp=0;this.head=this.Xc=null;this.ko=this.Cn=this.qb=this.level=this.Mk=this.bo=this.fc=this.D=this.tf=
this.s=this.Le=this.zo=this.la=this.bc=this.kd=this.jd=this.sk=this.ci=this.ga=0;this.Qb=new A.Xb(1146);this.Ge=new A.Xb(122);this.tb=new A.Xb(78);U(this.Qb);U(this.Ge);U(this.tb);this.Em=this.Lh=this.ei=null;this.cd=new A.Xb(16);this.Da=new A.Xb(573);U(this.Da);this.jf=this.ld=0;this.depth=new A.Xb(573);U(this.depth);this.kb=this.Ab=this.Sb=this.matches=this.Ff=this.sd=this.mg=this.pc=this.zg=this.Gk=0}function ca(w){var da;return w&&w.state?(w.ad=w.ee=0,w.Mh=2,(da=w.state).pending=0,da.Ig=0,0>da.ha&&
(da.ha=-da.ha),da.status=da.ha?42:113,w.V=2===da.ha?0:1,da.rf=0,M.ms(da),0):W(w,-2)}function Y(w){var da,ea=ca(w);return 0===ea&&((da=w.state).rp=2*da.yb,U(da.head),da.Mk=wa[da.level].Nu,da.Cn=wa[da.level].gu,da.ko=wa[da.level].av,da.bo=wa[da.level].Mu,da.s=0,da.bc=0,da.D=0,da.Sb=0,da.la=da.fc=2,da.Le=0,da.ga=0),ea}function Q(w,da,ea,R,xa,za){if(!w)return-2;var ua=1;if(-1===da&&(da=6),0>R?(ua=0,R=-R):15<R&&(ua=2,R-=16),1>xa||9<xa||8!==ea||8>R||15<R||0>da||9<da||0>za||4<za)return W(w,-2);8===R&&(R=
9);var Fa=new L;return(w.state=Fa).U=w,Fa.ha=ua,Fa.ba=null,Fa.ql=R,Fa.yb=1<<Fa.ql,Fa.he=Fa.yb-1,Fa.sk=xa+7,Fa.ci=1<<Fa.sk,Fa.jd=Fa.ci-1,Fa.kd=~~((Fa.sk+3-1)/3),Fa.window=new A.wc(2*Fa.yb),Fa.head=new A.Xb(Fa.ci),Fa.Xc=new A.Xb(Fa.yb),Fa.zg=1<<xa+6,Fa.tc=4*Fa.zg,Fa.Aa=new A.wc(Fa.tc),Fa.mg=Fa.zg,Fa.Gk=3*Fa.zg,Fa.level=da,Fa.qb=za,Fa.method=ea,Y(w)}var A=fa("../utils/common"),M=fa("./trees"),y=fa("./adler32"),na=fa("./crc32"),Ca=fa("./messages");var wa=[new G(0,0,0,0,function(w,da){var ea=65535;for(ea>
w.tc-5&&(ea=w.tc-5);;){if(1>=w.D){if(D(w),0===w.D&&0===da)return 1;if(0===w.D)break}w.s+=w.D;w.D=0;var R=w.bc+ea;if((0===w.s||w.s>=R)&&(w.D=w.s-R,w.s=R,K(w,!1),0===w.U.I)||w.s-w.bc>=w.yb-262&&(K(w,!1),0===w.U.I))return 1}return w.Sb=0,4===da?(K(w,!0),0===w.U.I?3:4):(w.s>w.bc&&(K(w,!1),w.U.I),1)}),new G(4,4,8,4,p),new G(4,5,16,8,p),new G(4,6,32,32,p),new G(4,4,16,16,z),new G(8,16,32,32,z),new G(8,16,128,128,z),new G(8,32,128,256,z),new G(32,128,258,1024,z),new G(32,258,258,4096,z)];T.kz=function(w,
da){return Q(w,da,8,15,8,0)};T.rt=Q;T.mz=Y;T.nz=ca;T.tt=function(w,da){w&&w.state&&(2!==w.state.ha||(w.state.ba=da))};T.Uh=function(w,da){var ea,R;if(!w||!w.state||5<da||0>da)return w?W(w,-2):-2;if(R=w.state,!w.ya||!w.input&&0!==w.na||666===R.status&&4!==da)return W(w,0===w.I?-5:-2);if(R.U=w,ea=R.rf,R.rf=da,42===R.status)if(2===R.ha)w.V=0,x(R,31),x(R,139),x(R,8),R.ba?(x(R,(R.ba.text?1:0)+(R.ba.Tc?2:0)+(R.ba.oa?4:0)+(R.ba.name?8:0)+(R.ba.Ce?16:0)),x(R,255&R.ba.time),x(R,R.ba.time>>8&255),x(R,R.ba.time>>
16&255),x(R,R.ba.time>>24&255),x(R,9===R.level?2:2<=R.qb||2>R.level?4:0),x(R,255&R.ba.qo),R.ba.oa&&R.ba.oa.length&&(x(R,255&R.ba.oa.length),x(R,R.ba.oa.length>>8&255)),R.ba.Tc&&(w.V=na(w.V,R.Aa,R.pending,0)),R.Jc=0,R.status=69):(x(R,0),x(R,0),x(R,0),x(R,0),x(R,0),x(R,9===R.level?2:2<=R.qb||2>R.level?4:0),x(R,3),R.status=113);else{var xa=8+(R.ql-8<<4)<<8;xa|=(2<=R.qb||2>R.level?0:6>R.level?1:6===R.level?2:3)<<6;0!==R.s&&(xa|=32);R.status=113;m(R,xa+(31-xa%31));0!==R.s&&(m(R,w.V>>>16),m(R,65535&w.V));
w.V=1}if(69===R.status)if(R.ba.oa){for(xa=R.pending;R.Jc<(65535&R.ba.oa.length)&&(R.pending!==R.tc||(R.ba.Tc&&R.pending>xa&&(w.V=na(w.V,R.Aa,R.pending-xa,xa)),I(w),xa=R.pending,R.pending!==R.tc));)x(R,255&R.ba.oa[R.Jc]),R.Jc++;R.ba.Tc&&R.pending>xa&&(w.V=na(w.V,R.Aa,R.pending-xa,xa));R.Jc===R.ba.oa.length&&(R.Jc=0,R.status=73)}else R.status=73;if(73===R.status)if(R.ba.name){xa=R.pending;do{if(R.pending===R.tc&&(R.ba.Tc&&R.pending>xa&&(w.V=na(w.V,R.Aa,R.pending-xa,xa)),I(w),xa=R.pending,R.pending===
R.tc)){var za=1;break}x(R,za=R.Jc<R.ba.name.length?255&R.ba.name.charCodeAt(R.Jc++):0)}while(0!==za);R.ba.Tc&&R.pending>xa&&(w.V=na(w.V,R.Aa,R.pending-xa,xa));0===za&&(R.Jc=0,R.status=91)}else R.status=91;if(91===R.status)if(R.ba.Ce){xa=R.pending;do{if(R.pending===R.tc&&(R.ba.Tc&&R.pending>xa&&(w.V=na(w.V,R.Aa,R.pending-xa,xa)),I(w),xa=R.pending,R.pending===R.tc)){za=1;break}x(R,za=R.Jc<R.ba.Ce.length?255&R.ba.Ce.charCodeAt(R.Jc++):0)}while(0!==za);R.ba.Tc&&R.pending>xa&&(w.V=na(w.V,R.Aa,R.pending-
xa,xa));0===za&&(R.status=103)}else R.status=103;if(103===R.status&&(R.ba.Tc?(R.pending+2>R.tc&&I(w),R.pending+2<=R.tc&&(x(R,255&w.V),x(R,w.V>>8&255),w.V=0,R.status=113)):R.status=113),0!==R.pending){if(I(w),0===w.I)return R.rf=-1,0}else if(0===w.na&&(da<<1)-(4<da?9:0)<=(ea<<1)-(4<ea?9:0)&&4!==da)return W(w,-5);if(666===R.status&&0!==w.na)return W(w,-5);if(0!==w.na||0!==R.D||0!==da&&666!==R.status){ea=2===R.qb?function(ua,Fa){for(var Sa;;){if(0===ua.D&&(D(ua),0===ua.D)){if(0===Fa)return 1;break}if(ua.la=
0,Sa=M.Qd(ua,0,ua.window[ua.s]),ua.D--,ua.s++,Sa&&(K(ua,!1),0===ua.U.I))return 1}return ua.Sb=0,4===Fa?(K(ua,!0),0===ua.U.I?3:4):ua.pc&&(K(ua,!1),0===ua.U.I)?1:2}(R,da):3===R.qb?function(ua,Fa){for(var Sa,Ga,ba,O,u=ua.window;;){if(258>=ua.D){if(D(ua),258>=ua.D&&0===Fa)return 1;if(0===ua.D)break}if(ua.la=0,3<=ua.D&&0<ua.s&&(Ga=u[ba=ua.s-1])===u[++ba]&&Ga===u[++ba]&&Ga===u[++ba]){for(O=ua.s+258;Ga===u[++ba]&&Ga===u[++ba]&&Ga===u[++ba]&&Ga===u[++ba]&&Ga===u[++ba]&&Ga===u[++ba]&&Ga===u[++ba]&&Ga===u[++ba]&&
ba<O;);ua.la=258-(O-ba);ua.la>ua.D&&(ua.la=ua.D)}if(3<=ua.la?(Sa=M.Qd(ua,1,ua.la-3),ua.D-=ua.la,ua.s+=ua.la,ua.la=0):(Sa=M.Qd(ua,0,ua.window[ua.s]),ua.D--,ua.s++),Sa&&(K(ua,!1),0===ua.U.I))return 1}return ua.Sb=0,4===Fa?(K(ua,!0),0===ua.U.I?3:4):ua.pc&&(K(ua,!1),0===ua.U.I)?1:2}(R,da):wa[R.level].Lt(R,da);if(3!==ea&&4!==ea||(R.status=666),1===ea||3===ea)return 0===w.I&&(R.rf=-1),0;if(2===ea&&(1===da?M.ks(R):5!==da&&(M.ns(R,0,0,!1),3===da&&(U(R.head),0===R.D&&(R.s=0,R.bc=0,R.Sb=0))),I(w),0===w.I))return R.rf=
-1,0}return 4!==da?0:0>=R.ha?1:(2===R.ha?(x(R,255&w.V),x(R,w.V>>8&255),x(R,w.V>>16&255),x(R,w.V>>24&255),x(R,255&w.ad),x(R,w.ad>>8&255),x(R,w.ad>>16&255),x(R,w.ad>>24&255)):(m(R,w.V>>>16),m(R,65535&w.V)),I(w),0<R.ha&&(R.ha=-R.ha),0!==R.pending?0:1)};T.qt=function(w){var da;return w&&w.state?42!==(da=w.state.status)&&69!==da&&73!==da&&91!==da&&103!==da&&113!==da&&666!==da?W(w,-2):(w.state=null,113===da?W(w,-3):0):-2};T.st=function(w,da){var ea,R,xa;var za=da.length;if(!w||!w.state||2===(R=(ea=w.state).ha)||
1===R&&42!==ea.status||ea.D)return-2;1===R&&(w.V=y(w.V,da,za,0));ea.ha=0;za>=ea.yb&&(0===R&&(U(ea.head),ea.s=0,ea.bc=0,ea.Sb=0),xa=new A.wc(ea.yb),A.kc(xa,da,za-ea.yb,ea.yb,0),da=xa,za=ea.yb);xa=w.na;var ua=w.Db;var Fa=w.input;w.na=za;w.Db=0;w.input=da;for(D(ea);3<=ea.D;){da=ea.s;for(za=ea.D-2;ea.ga=(ea.ga<<ea.kd^ea.window[da+3-1])&ea.jd,ea.Xc[da&ea.he]=ea.head[ea.ga],ea.head[ea.ga]=da,da++,--za;);ea.s=da;ea.D=2;D(ea)}return ea.s+=ea.D,ea.bc=ea.s,ea.Sb=ea.D,ea.D=0,ea.la=ea.fc=2,ea.Le=0,w.Db=ua,w.input=
Fa,w.na=xa,ea.ha=R,0};T.jz="pako deflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./messages":13,"./trees":14}],9:[function(fa,la){la.exports=function(){this.qo=this.ax=this.time=this.text=0;this.oa=null;this.hk=0;this.Ce=this.name="";this.Tc=0;this.done=!1}},{}],10:[function(fa,la){la.exports=function(T,W){var U,I,K;var x=T.state;var m=T.Db;var C=T.input;var D=m+(T.na-5);var p=T.Ea;var z=T.ya;W=p-(W-T.I);var G=p+(T.I-257);var L=x.Vh;var ca=x.Wb;var Y=x.xd;var Q=x.Vb;
var A=x.window;var M=x.Ud;var y=x.La;var na=x.pd;var Ca=x.Fe;var wa=(1<<x.Vc)-1;var w=(1<<x.ff)-1;a:do{15>y&&(M+=C[m++]<<y,y+=8,M+=C[m++]<<y,y+=8);var da=na[M&wa];b:for(;;){if(M>>>=U=da>>>24,y-=U,0==(U=da>>>16&255))z[p++]=65535&da;else{if(!(16&U)){if(0==(64&U)){da=na[(65535&da)+(M&(1<<U)-1)];continue b}if(32&U){x.mode=12;break a}T.ca="invalid literal/length code";x.mode=30;break a}var ea=65535&da;(U&=15)&&(y<U&&(M+=C[m++]<<y,y+=8),ea+=M&(1<<U)-1,M>>>=U,y-=U);15>y&&(M+=C[m++]<<y,y+=8,M+=C[m++]<<y,
y+=8);da=Ca[M&w];c:for(;;){if(M>>>=U=da>>>24,y-=U,!(16&(U=da>>>16&255))){if(0==(64&U)){da=Ca[(65535&da)+(M&(1<<U)-1)];continue c}T.ca="invalid distance code";x.mode=30;break a}if(I=65535&da,y<(U&=15)&&(M+=C[m++]<<y,(y+=8)<U&&(M+=C[m++]<<y,y+=8)),L<(I+=M&(1<<U)-1)){T.ca="invalid distance too far back";x.mode=30;break a}if(M>>>=U,y-=U,(U=p-W)<I){if(Y<(U=I-U)&&x.Yk){T.ca="invalid distance too far back";x.mode=30;break a}if(K=A,(da=0)===Q){if(da+=ca-U,U<ea){for(ea-=U;z[p++]=A[da++],--U;);da=p-I;K=z}}else if(Q<
U){if(da+=ca+Q-U,(U-=Q)<ea){for(ea-=U;z[p++]=A[da++],--U;);if(da=0,Q<ea){for(ea-=U=Q;z[p++]=A[da++],--U;);da=p-I;K=z}}}else if(da+=Q-U,U<ea){for(ea-=U;z[p++]=A[da++],--U;);da=p-I;K=z}for(;2<ea;)z[p++]=K[da++],z[p++]=K[da++],z[p++]=K[da++],ea-=3;ea&&(z[p++]=K[da++],1<ea&&(z[p++]=K[da++]))}else{for(da=p-I;z[p++]=z[da++],z[p++]=z[da++],z[p++]=z[da++],2<(ea-=3););ea&&(z[p++]=z[da++],1<ea&&(z[p++]=z[da++]))}break}}break}}while(m<D&&p<G);m-=ea=y>>3;M&=(1<<(y-=ea<<3))-1;T.Db=m;T.Ea=p;T.na=m<D?D-m+5:5-(m-
D);T.I=p<G?G-p+257:257-(p-G);x.Ud=M;x.La=y}},{}],11:[function(fa,la,T){function W(A){return(A>>>24&255)+(A>>>8&65280)+((65280&A)<<8)+((255&A)<<24)}function U(){this.mode=0;this.gi=!1;this.ha=0;this.tk=!1;this.total=this.check=this.Vh=this.flags=0;this.head=null;this.Vb=this.xd=this.Wb=this.Kf=0;this.window=null;this.oa=this.offset=this.length=this.La=this.Ud=0;this.Fe=this.pd=null;this.oc=this.Dg=this.zf=this.jo=this.ff=this.Vc=0;this.next=null;this.wb=new D.Xb(320);this.Ug=new D.Xb(288);this.Xm=
this.Wn=null;this.Yw=this.back=this.Yk=0}function I(A){var M;return A&&A.state?(M=A.state,A.ad=A.ee=M.total=0,A.ca="",M.ha&&(A.V=1&M.ha),M.mode=1,M.gi=0,M.tk=0,M.Vh=32768,M.head=null,M.Ud=0,M.La=0,M.pd=M.Wn=new D.Lf(852),M.Fe=M.Xm=new D.Lf(592),M.Yk=1,M.back=-1,0):-2}function K(A){var M;return A&&A.state?((M=A.state).Wb=0,M.xd=0,M.Vb=0,I(A)):-2}function x(A,M){var y,na;return A&&A.state?(na=A.state,0>M?(y=0,M=-M):(y=1+(M>>4),48>M&&(M&=15)),M&&(8>M||15<M)?-2:(null!==na.window&&na.Kf!==M&&(na.window=
null),na.ha=y,na.Kf=M,K(A))):-2}function m(A,M){var y,na;return A?(na=new U,(A.state=na).window=null,0!==(y=x(A,M))&&(A.state=null),y):-2}function C(A,M,y,na){var Ca;A=A.state;return null===A.window&&(A.Wb=1<<A.Kf,A.Vb=0,A.xd=0,A.window=new D.wc(A.Wb)),na>=A.Wb?(D.kc(A.window,M,y-A.Wb,A.Wb,0),A.Vb=0,A.xd=A.Wb):(na<(Ca=A.Wb-A.Vb)&&(Ca=na),D.kc(A.window,M,y-na,Ca,A.Vb),(na-=Ca)?(D.kc(A.window,M,y-na,na,0),A.Vb=na,A.xd=A.Wb):(A.Vb+=Ca,A.Vb===A.Wb&&(A.Vb=0),A.xd<A.Wb&&(A.xd+=Ca))),0}var D=fa("../utils/common"),
p=fa("./adler32"),z=fa("./crc32"),G=fa("./inffast"),L=fa("./inftrees"),ca,Y,Q=!0;T.vA=K;T.wA=x;T.xA=I;T.tA=function(A){return m(A,15)};T.pu=m;T.Ak=function(A,M){var y,na,Ca,wa,w,da,ea,R,xa=0,za=new D.wc(4),ua=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!A||!A.state||!A.ya||!A.input&&0!==A.na)return-2;12===(y=A.state).mode&&(y.mode=13);var Fa=A.Ea;var Sa=A.ya;var Ga=A.I;var ba=A.Db;var O=A.input;var u=A.na;var B=y.Ud;var E=y.La;var V=u;var ha=Ga;var ia=0;a:for(;;)switch(y.mode){case 1:if(0===
y.ha){y.mode=13;break}for(;16>E;){if(0===u)break a;u--;B+=O[ba++]<<E;E+=8}if(2&y.ha&&35615===B){za[y.check=0]=255&B;za[1]=B>>>8&255;y.check=z(y.check,za,2,0);E=B=0;y.mode=2;break}if(y.flags=0,y.head&&(y.head.done=!1),!(1&y.ha)||(((255&B)<<8)+(B>>8))%31){A.ca="incorrect header check";y.mode=30;break}if(8!=(15&B)){A.ca="unknown compression method";y.mode=30;break}if(E-=4,ea=8+(15&(B>>>=4)),0===y.Kf)y.Kf=ea;else if(ea>y.Kf){A.ca="invalid window size";y.mode=30;break}y.Vh=1<<ea;A.V=y.check=1;y.mode=512&
B?10:12;E=B=0;break;case 2:for(;16>E;){if(0===u)break a;u--;B+=O[ba++]<<E;E+=8}if(y.flags=B,8!=(255&y.flags)){A.ca="unknown compression method";y.mode=30;break}if(57344&y.flags){A.ca="unknown header flags set";y.mode=30;break}y.head&&(y.head.text=B>>8&1);512&y.flags&&(za[0]=255&B,za[1]=B>>>8&255,y.check=z(y.check,za,2,0));E=B=0;y.mode=3;case 3:for(;32>E;){if(0===u)break a;u--;B+=O[ba++]<<E;E+=8}y.head&&(y.head.time=B);512&y.flags&&(za[0]=255&B,za[1]=B>>>8&255,za[2]=B>>>16&255,za[3]=B>>>24&255,y.check=
z(y.check,za,4,0));E=B=0;y.mode=4;case 4:for(;16>E;){if(0===u)break a;u--;B+=O[ba++]<<E;E+=8}y.head&&(y.head.ax=255&B,y.head.qo=B>>8);512&y.flags&&(za[0]=255&B,za[1]=B>>>8&255,y.check=z(y.check,za,2,0));E=B=0;y.mode=5;case 5:if(1024&y.flags){for(;16>E;){if(0===u)break a;u--;B+=O[ba++]<<E;E+=8}y.length=B;y.head&&(y.head.hk=B);512&y.flags&&(za[0]=255&B,za[1]=B>>>8&255,y.check=z(y.check,za,2,0));E=B=0}else y.head&&(y.head.oa=null);y.mode=6;case 6:if(1024&y.flags&&(u<(na=y.length)&&(na=u),na&&(y.head&&
(ea=y.head.hk-y.length,y.head.oa||(y.head.oa=Array(y.head.hk)),D.kc(y.head.oa,O,ba,na,ea)),512&y.flags&&(y.check=z(y.check,O,na,ba)),u-=na,ba+=na,y.length-=na),y.length))break a;y.length=0;y.mode=7;case 7:if(2048&y.flags){if(0===u)break a;for(na=0;ea=O[ba+na++],y.head&&ea&&65536>y.length&&(y.head.name+=String.fromCharCode(ea)),ea&&na<u;);if(512&y.flags&&(y.check=z(y.check,O,na,ba)),u-=na,ba+=na,ea)break a}else y.head&&(y.head.name=null);y.length=0;y.mode=8;case 8:if(4096&y.flags){if(0===u)break a;
for(na=0;ea=O[ba+na++],y.head&&ea&&65536>y.length&&(y.head.Ce+=String.fromCharCode(ea)),ea&&na<u;);if(512&y.flags&&(y.check=z(y.check,O,na,ba)),u-=na,ba+=na,ea)break a}else y.head&&(y.head.Ce=null);y.mode=9;case 9:if(512&y.flags){for(;16>E;){if(0===u)break a;u--;B+=O[ba++]<<E;E+=8}if(B!==(65535&y.check)){A.ca="header crc mismatch";y.mode=30;break}E=B=0}y.head&&(y.head.Tc=y.flags>>9&1,y.head.done=!0);A.V=y.check=0;y.mode=12;break;case 10:for(;32>E;){if(0===u)break a;u--;B+=O[ba++]<<E;E+=8}A.V=y.check=
W(B);E=B=0;y.mode=11;case 11:if(0===y.tk)return A.Ea=Fa,A.I=Ga,A.Db=ba,A.na=u,y.Ud=B,y.La=E,2;A.V=y.check=1;y.mode=12;case 12:if(5===M||6===M)break a;case 13:if(y.gi){B>>>=7&E;E-=7&E;y.mode=27;break}for(;3>E;){if(0===u)break a;u--;B+=O[ba++]<<E;E+=8}switch(y.gi=1&B,--E,3&(B>>>=1)){case 0:y.mode=14;break;case 1:var ka=y;if(Q){ca=new D.Lf(512);Y=new D.Lf(32);for(wa=0;144>wa;)ka.wb[wa++]=8;for(;256>wa;)ka.wb[wa++]=9;for(;280>wa;)ka.wb[wa++]=7;for(;288>wa;)ka.wb[wa++]=8;L(1,ka.wb,0,288,ca,0,ka.Ug,{La:9});
for(wa=0;32>wa;)ka.wb[wa++]=5;L(2,ka.wb,0,32,Y,0,ka.Ug,{La:5});Q=!1}ka.pd=ca;ka.Vc=9;ka.Fe=Y;ka.ff=5;if(y.mode=20,6!==M)break;B>>>=2;E-=2;break a;case 2:y.mode=17;break;case 3:A.ca="invalid block type",y.mode=30}B>>>=2;E-=2;break;case 14:B>>>=7&E;for(E-=7&E;32>E;){if(0===u)break a;u--;B+=O[ba++]<<E;E+=8}if((65535&B)!=(B>>>16^65535)){A.ca="invalid stored block lengths";y.mode=30;break}if(y.length=65535&B,E=B=0,y.mode=15,6===M)break a;case 15:y.mode=16;case 16:if(na=y.length){if(u<na&&(na=u),Ga<na&&
(na=Ga),0===na)break a;D.kc(Sa,O,ba,na,Fa);u-=na;ba+=na;Ga-=na;Fa+=na;y.length-=na;break}y.mode=12;break;case 17:for(;14>E;){if(0===u)break a;u--;B+=O[ba++]<<E;E+=8}if(y.zf=257+(31&B),B>>>=5,E-=5,y.Dg=1+(31&B),B>>>=5,E-=5,y.jo=4+(15&B),B>>>=4,E-=4,286<y.zf||30<y.Dg){A.ca="too many length or distance symbols";y.mode=30;break}y.oc=0;y.mode=18;case 18:for(;y.oc<y.jo;){for(;3>E;){if(0===u)break a;u--;B+=O[ba++]<<E;E+=8}y.wb[ua[y.oc++]]=7&B;B>>>=3;E-=3}for(;19>y.oc;)y.wb[ua[y.oc++]]=0;if(y.pd=y.Wn,y.Vc=
7,R={La:y.Vc},ia=L(0,y.wb,0,19,y.pd,0,y.Ug,R),y.Vc=R.La,ia){A.ca="invalid code lengths set";y.mode=30;break}y.oc=0;y.mode=19;case 19:for(;y.oc<y.zf+y.Dg;){for(;xa=y.pd[B&(1<<y.Vc)-1],w=65535&xa,!((wa=xa>>>24)<=E);){if(0===u)break a;u--;B+=O[ba++]<<E;E+=8}if(16>w)B>>>=wa,E-=wa,y.wb[y.oc++]=w;else{if(16===w){for(ka=wa+2;E<ka;){if(0===u)break a;u--;B+=O[ba++]<<E;E+=8}if(B>>>=wa,E-=wa,0===y.oc){A.ca="invalid bit length repeat";y.mode=30;break}ea=y.wb[y.oc-1];na=3+(3&B);B>>>=2;E-=2}else if(17===w){for(ka=
wa+3;E<ka;){if(0===u)break a;u--;B+=O[ba++]<<E;E+=8}E-=wa;ea=0;na=3+(7&(B>>>=wa));B>>>=3;E-=3}else{for(ka=wa+7;E<ka;){if(0===u)break a;u--;B+=O[ba++]<<E;E+=8}E-=wa;ea=0;na=11+(127&(B>>>=wa));B>>>=7;E-=7}if(y.oc+na>y.zf+y.Dg){A.ca="invalid bit length repeat";y.mode=30;break}for(;na--;)y.wb[y.oc++]=ea}}if(30===y.mode)break;if(0===y.wb[256]){A.ca="invalid code -- missing end-of-block";y.mode=30;break}if(y.Vc=9,R={La:y.Vc},ia=L(1,y.wb,0,y.zf,y.pd,0,y.Ug,R),y.Vc=R.La,ia){A.ca="invalid literal/lengths set";
y.mode=30;break}if(y.ff=6,y.Fe=y.Xm,R={La:y.ff},ia=L(2,y.wb,y.zf,y.Dg,y.Fe,0,y.Ug,R),y.ff=R.La,ia){A.ca="invalid distances set";y.mode=30;break}if(y.mode=20,6===M)break a;case 20:y.mode=21;case 21:if(6<=u&&258<=Ga){A.Ea=Fa;A.I=Ga;A.Db=ba;A.na=u;y.Ud=B;y.La=E;G(A,ha);Fa=A.Ea;Sa=A.ya;Ga=A.I;ba=A.Db;O=A.input;u=A.na;B=y.Ud;E=y.La;12===y.mode&&(y.back=-1);break}for(y.back=0;ka=(xa=y.pd[B&(1<<y.Vc)-1])>>>16&255,w=65535&xa,!((wa=xa>>>24)<=E);){if(0===u)break a;u--;B+=O[ba++]<<E;E+=8}if(ka&&0==(240&ka)){var ma=
wa;var ya=ka;for(da=w;ka=(xa=y.pd[da+((B&(1<<ma+ya)-1)>>ma)])>>>16&255,w=65535&xa,!(ma+(wa=xa>>>24)<=E);){if(0===u)break a;u--;B+=O[ba++]<<E;E+=8}B>>>=ma;E-=ma;y.back+=ma}if(B>>>=wa,E-=wa,y.back+=wa,y.length=w,0===ka){y.mode=26;break}if(32&ka){y.back=-1;y.mode=12;break}if(64&ka){A.ca="invalid literal/length code";y.mode=30;break}y.oa=15&ka;y.mode=22;case 22:if(y.oa){for(ka=y.oa;E<ka;){if(0===u)break a;u--;B+=O[ba++]<<E;E+=8}y.length+=B&(1<<y.oa)-1;B>>>=y.oa;E-=y.oa;y.back+=y.oa}y.Yw=y.length;y.mode=
23;case 23:for(;ka=(xa=y.Fe[B&(1<<y.ff)-1])>>>16&255,w=65535&xa,!((wa=xa>>>24)<=E);){if(0===u)break a;u--;B+=O[ba++]<<E;E+=8}if(0==(240&ka)){ma=wa;ya=ka;for(da=w;ka=(xa=y.Fe[da+((B&(1<<ma+ya)-1)>>ma)])>>>16&255,w=65535&xa,!(ma+(wa=xa>>>24)<=E);){if(0===u)break a;u--;B+=O[ba++]<<E;E+=8}B>>>=ma;E-=ma;y.back+=ma}if(B>>>=wa,E-=wa,y.back+=wa,64&ka){A.ca="invalid distance code";y.mode=30;break}y.offset=w;y.oa=15&ka;y.mode=24;case 24:if(y.oa){for(ka=y.oa;E<ka;){if(0===u)break a;u--;B+=O[ba++]<<E;E+=8}y.offset+=
B&(1<<y.oa)-1;B>>>=y.oa;E-=y.oa;y.back+=y.oa}if(y.offset>y.Vh){A.ca="invalid distance too far back";y.mode=30;break}y.mode=25;case 25:if(0===Ga)break a;if(na=ha-Ga,y.offset>na){if((na=y.offset-na)>y.xd&&y.Yk){A.ca="invalid distance too far back";y.mode=30;break}na>y.Vb?(na-=y.Vb,Ca=y.Wb-na):Ca=y.Vb-na;na>y.length&&(na=y.length);wa=y.window}else wa=Sa,Ca=Fa-y.offset,na=y.length;Ga<na&&(na=Ga);Ga-=na;for(y.length-=na;Sa[Fa++]=wa[Ca++],--na;);0===y.length&&(y.mode=21);break;case 26:if(0===Ga)break a;
Sa[Fa++]=y.length;Ga--;y.mode=21;break;case 27:if(y.ha){for(;32>E;){if(0===u)break a;u--;B|=O[ba++]<<E;E+=8}if(ha-=Ga,A.ee+=ha,y.total+=ha,ha&&(A.V=y.check=y.flags?z(y.check,Sa,ha,Fa-ha):p(y.check,Sa,ha,Fa-ha)),ha=Ga,(y.flags?B:W(B))!==y.check){A.ca="incorrect data check";y.mode=30;break}E=B=0}y.mode=28;case 28:if(y.ha&&y.flags){for(;32>E;){if(0===u)break a;u--;B+=O[ba++]<<E;E+=8}if(B!==(4294967295&y.total)){A.ca="incorrect length check";y.mode=30;break}E=B=0}y.mode=29;case 29:ia=1;break a;case 30:ia=
-3;break a;case 31:return-4;default:return-2}return A.Ea=Fa,A.I=Ga,A.Db=ba,A.na=u,y.Ud=B,y.La=E,(y.Wb||ha!==A.I&&30>y.mode&&(27>y.mode||4!==M))&&C(A,A.ya,A.Ea,ha-A.I)?(y.mode=31,-4):(V-=A.na,ha-=A.I,A.ad+=V,A.ee+=ha,y.total+=ha,y.ha&&ha&&(A.V=y.check=y.flags?z(y.check,Sa,ha,A.Ea-ha):p(y.check,Sa,ha,A.Ea-ha)),A.Mh=y.La+(y.gi?64:0)+(12===y.mode?128:0)+(20===y.mode||15===y.mode?256:0),(0===V&&0===ha||4===M)&&0===ia&&(ia=-5),ia)};T.nu=function(A){if(!A||!A.state)return-2;var M=A.state;return M.window&&
(M.window=null),A.state=null,0};T.ou=function(A,M){var y;A&&A.state&&(0==(2&(y=A.state).ha)||((y.head=M).done=!1))};T.On=function(A,M){var y,na=M.length;return A&&A.state?0!==(y=A.state).ha&&11!==y.mode?-2:11===y.mode&&p(1,M,na,0)!==y.check?-3:C(A,M,na,na)?(y.mode=31,-4):(y.tk=1,0):-2};T.sA="pako inflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./inffast":10,"./inftrees":12}],12:[function(fa,la){var T=fa("../utils/common"),W=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,
35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],U=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],I=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],K=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];la.exports=function(x,m,C,D,p,z,G,L){var ca,Y,Q,A,M,y,na=L.La,Ca,wa,w,da,ea,R=0,xa,za=null,ua=0,Fa=new T.Xb(16);var Sa=new T.Xb(16);var Ga=
null,ba=0;for(Ca=0;15>=Ca;Ca++)Fa[Ca]=0;for(wa=0;wa<D;wa++)Fa[m[C+wa]]++;var O=na;for(w=15;1<=w&&0===Fa[w];w--);if(w<O&&(O=w),0===w)return p[z++]=20971520,p[z++]=20971520,L.La=1,0;for(na=1;na<w&&0===Fa[na];na++);O<na&&(O=na);for(Ca=ca=1;15>=Ca;Ca++)if(ca<<=1,0>(ca-=Fa[Ca]))return-1;if(0<ca&&(0===x||1!==w))return-1;Sa[1]=0;for(Ca=1;15>Ca;Ca++)Sa[Ca+1]=Sa[Ca]+Fa[Ca];for(wa=0;wa<D;wa++)0!==m[C+wa]&&(G[Sa[m[C+wa]]++]=wa);if(0===x?(za=Ga=G,A=19):1===x?(za=W,ua-=257,Ga=U,ba-=257,A=256):(za=I,Ga=K,A=-1),
Ca=na,Sa=z,ea=wa=xa=0,Q=-1,D=(R=1<<(da=O))-1,1===x&&852<R||2===x&&592<R)return 1;for(;;){var u=Ca-ea;G[wa]<A?(M=0,y=G[wa]):G[wa]>A?(M=Ga[ba+G[wa]],y=za[ua+G[wa]]):(M=96,y=0);ca=1<<Ca-ea;for(na=Y=1<<da;p[Sa+(xa>>ea)+(Y-=ca)]=u<<24|M<<16|y|0,0!==Y;);for(ca=1<<Ca-1;xa&ca;)ca>>=1;if(0!==ca?(xa&=ca-1,xa+=ca):xa=0,wa++,0==--Fa[Ca]){if(Ca===w)break;Ca=m[C+G[wa]]}if(O<Ca&&(xa&D)!==Q){0===ea&&(ea=O);Sa+=na;for(ca=1<<(da=Ca-ea);da+ea<w&&!(0>=(ca-=Fa[da+ea]));)da++,ca<<=1;if(R+=1<<da,1===x&&852<R||2===x&&592<
R)return 1;p[Q=xa&D]=O<<24|da<<16|Sa-z|0}}return 0!==xa&&(p[Sa+xa]=Ca-ea<<24|4194304),L.La=O,0}},{"../utils/common":3}],13:[function(fa,la){la.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],14:[function(fa,la,T){function W(u){for(var B=u.length;0<=--B;)u[B]=0}function U(u,B,E,V,ha){this.Zo=u;this.Ft=B;this.Et=E;this.Bt=V;this.Ou=ha;this.Hn=u&&u.length}function I(u,
B){this.Zm=u;this.vf=0;this.$d=B}function K(u){return 256>u?xa[u]:xa[256+(u>>>7)]}function x(u,B){u.Aa[u.pending++]=255&B;u.Aa[u.pending++]=B>>>8&255}function m(u,B,E){u.kb>16-E?(u.Ab|=B<<u.kb&65535,x(u,u.Ab),u.Ab=B>>16-u.kb,u.kb+=E-16):(u.Ab|=B<<u.kb&65535,u.kb+=E)}function C(u,B,E){m(u,E[2*B],E[2*B+1])}function D(u,B){for(var E=0;E|=1&u,u>>>=1,E<<=1,0<--B;);return E>>>1}function p(u,B,E){var V,ha=Array(16),ia=0;for(V=1;15>=V;V++)ha[V]=ia=ia+E[V-1]<<1;for(E=0;E<=B;E++)V=u[2*E+1],0!==V&&(u[2*E]=D(ha[V]++,
V))}function z(u){var B;for(B=0;286>B;B++)u.Qb[2*B]=0;for(B=0;30>B;B++)u.Ge[2*B]=0;for(B=0;19>B;B++)u.tb[2*B]=0;u.Qb[512]=1;u.sd=u.Ff=0;u.pc=u.matches=0}function G(u){8<u.kb?x(u,u.Ab):0<u.kb&&(u.Aa[u.pending++]=u.Ab);u.Ab=0;u.kb=0}function L(u,B,E,V){var ha=2*B,ia=2*E;return u[ha]<u[ia]||u[ha]===u[ia]&&V[B]<=V[E]}function ca(u,B,E){for(var V=u.Da[E],ha=E<<1;ha<=u.ld&&(ha<u.ld&&L(B,u.Da[ha+1],u.Da[ha],u.depth)&&ha++,!L(B,V,u.Da[ha],u.depth));)u.Da[E]=u.Da[ha],E=ha,ha<<=1;u.Da[E]=V}function Y(u,B,E){var V,
ha,ia,ka,ma=0;if(0!==u.pc)for(;V=u.Aa[u.mg+2*ma]<<8|u.Aa[u.mg+2*ma+1],ha=u.Aa[u.Gk+ma],ma++,0===V?C(u,ha,B):(C(u,(ia=za[ha])+256+1,B),0!==(ka=Ca[ia])&&m(u,ha-=ua[ia],ka),C(u,ia=K(--V),E),0!==(ka=wa[ia])&&m(u,V-=ba[ia],ka)),ma<u.pc;);C(u,256,B)}function Q(u,B){var E,V,ha,ia=B.Zm,ka=B.$d.Zo,ma=B.$d.Hn,ya=B.$d.Bt,Aa=-1;u.ld=0;u.jf=573;for(E=0;E<ya;E++)0!==ia[2*E]?(u.Da[++u.ld]=Aa=E,u.depth[E]=0):ia[2*E+1]=0;for(;2>u.ld;)ia[2*(ha=u.Da[++u.ld]=2>Aa?++Aa:0)]=1,u.depth[ha]=0,u.sd--,ma&&(u.Ff-=ka[2*ha+1]);
B.vf=Aa;for(E=u.ld>>1;1<=E;E--)ca(u,ia,E);for(ha=ya;E=u.Da[1],u.Da[1]=u.Da[u.ld--],ca(u,ia,1),V=u.Da[1],u.Da[--u.jf]=E,u.Da[--u.jf]=V,ia[2*ha]=ia[2*E]+ia[2*V],u.depth[ha]=(u.depth[E]>=u.depth[V]?u.depth[E]:u.depth[V])+1,ia[2*E+1]=ia[2*V+1]=ha,u.Da[1]=ha++,ca(u,ia,1),2<=u.ld;);u.Da[--u.jf]=u.Da[1];var Na,Ha,sa,$a,La;E=B.Zm;V=B.vf;ha=B.$d.Zo;ka=B.$d.Hn;ma=B.$d.Ft;ya=B.$d.Et;var Ra=B.$d.Ou,eb=0;for(sa=0;15>=sa;sa++)u.cd[sa]=0;E[2*u.Da[u.jf]+1]=0;for(B=u.jf+1;573>B;B++)Ra<(sa=E[2*E[2*(Na=u.Da[B])+1]+
1]+1)&&(sa=Ra,eb++),E[2*Na+1]=sa,V<Na||(u.cd[sa]++,$a=0,ya<=Na&&($a=ma[Na-ya]),La=E[2*Na],u.sd+=La*(sa+$a),ka&&(u.Ff+=La*(ha[2*Na+1]+$a)));if(0!==eb){do{for(sa=Ra-1;0===u.cd[sa];)sa--;u.cd[sa]--;u.cd[sa+1]+=2;u.cd[Ra]--;eb-=2}while(0<eb);for(sa=Ra;0!==sa;sa--)for(Na=u.cd[sa];0!==Na;)V<(Ha=u.Da[--B])||(E[2*Ha+1]!==sa&&(u.sd+=(sa-E[2*Ha+1])*E[2*Ha],E[2*Ha+1]=sa),Na--)}p(ia,Aa,u.cd)}function A(u,B,E){var V,ha=-1,ia=B[1],ka=0,ma=7,ya=4;0===ia&&(ma=138,ya=3);B[2*(E+1)+1]=65535;for(V=0;V<=E;V++){var Aa=
ia;ia=B[2*(V+1)+1];++ka<ma&&Aa===ia||(ka<ya?u.tb[2*Aa]+=ka:0!==Aa?(Aa!==ha&&u.tb[2*Aa]++,u.tb[32]++):10>=ka?u.tb[34]++:u.tb[36]++,ha=Aa,(ka=0)===ia?(ma=138,ya=3):Aa===ia?(ma=6,ya=3):(ma=7,ya=4))}}function M(u,B,E){var V,ha,ia=-1,ka=B[1],ma=0,ya=7,Aa=4;0===ka&&(ya=138,Aa=3);for(V=0;V<=E;V++)if(ha=ka,ka=B[2*(V+1)+1],!(++ma<ya&&ha===ka)){if(ma<Aa)for(;C(u,ha,u.tb),0!=--ma;);else 0!==ha?(ha!==ia&&(C(u,ha,u.tb),ma--),C(u,16,u.tb),m(u,ma-3,2)):10>=ma?(C(u,17,u.tb),m(u,ma-3,3)):(C(u,18,u.tb),m(u,ma-11,7));
ia=ha;(ma=0)===ka?(ya=138,Aa=3):ha===ka?(ya=6,Aa=3):(ya=7,Aa=4)}}function y(u,B,E,V){m(u,V?1:0,3);G(u);x(u,E);x(u,~E);na.kc(u.Aa,u.window,B,E,u.pending);u.pending+=E}var na=fa("../utils/common"),Ca=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],wa=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],da=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ea=Array(576);W(ea);var R=Array(60);W(R);var xa=Array(512);W(xa);var za=Array(256);
W(za);var ua=Array(29);W(ua);var Fa,Sa,Ga,ba=Array(30);W(ba);var O=!1;T.ms=function(u){if(!O){var B,E,V,ha=Array(16);for(V=E=0;28>V;V++)for(ua[V]=E,B=0;B<1<<Ca[V];B++)za[E++]=V;za[E-1]=V;for(V=E=0;16>V;V++)for(ba[V]=E,B=0;B<1<<wa[V];B++)xa[E++]=V;for(E>>=7;30>V;V++)for(ba[V]=E<<7,B=0;B<1<<wa[V]-7;B++)xa[256+E++]=V;for(B=0;15>=B;B++)ha[B]=0;for(B=0;143>=B;)ea[2*B+1]=8,B++,ha[8]++;for(;255>=B;)ea[2*B+1]=9,B++,ha[9]++;for(;279>=B;)ea[2*B+1]=7,B++,ha[7]++;for(;287>=B;)ea[2*B+1]=8,B++,ha[8]++;p(ea,287,
ha);for(B=0;30>B;B++)R[2*B+1]=5,R[2*B]=D(B,5);Fa=new U(ea,Ca,257,286,15);Sa=new U(R,wa,0,30,15);Ga=new U([],w,0,19,7);O=!0}u.ei=new I(u.Qb,Fa);u.Lh=new I(u.Ge,Sa);u.Em=new I(u.tb,Ga);u.Ab=0;u.kb=0;z(u)};T.ns=y;T.ls=function(u,B,E,V){var ha,ia,ka=0;0<u.level?(2===u.U.Mh&&(u.U.Mh=function(ma){var ya,Aa=4093624447;for(ya=0;31>=ya;ya++,Aa>>>=1)if(1&Aa&&0!==ma.Qb[2*ya])return 0;if(0!==ma.Qb[18]||0!==ma.Qb[20]||0!==ma.Qb[26])return 1;for(ya=32;256>ya;ya++)if(0!==ma.Qb[2*ya])return 1;return 0}(u)),Q(u,u.ei),
Q(u,u.Lh),ka=function(ma){var ya;A(ma,ma.Qb,ma.ei.vf);A(ma,ma.Ge,ma.Lh.vf);Q(ma,ma.Em);for(ya=18;3<=ya&&0===ma.tb[2*da[ya]+1];ya--);return ma.sd+=3*(ya+1)+14,ya}(u),ha=u.sd+3+7>>>3,(ia=u.Ff+3+7>>>3)<=ha&&(ha=ia)):ha=ia=E+5;E+4<=ha&&-1!==B?y(u,B,E,V):4===u.qb||ia===ha?(m(u,2+(V?1:0),3),Y(u,ea,R)):(m(u,4+(V?1:0),3),function(ma,ya,Aa,Na){var Ha;m(ma,ya-257,5);m(ma,Aa-1,5);m(ma,Na-4,4);for(Ha=0;Ha<Na;Ha++)m(ma,ma.tb[2*da[Ha]+1],3);M(ma,ma.Qb,ya-1);M(ma,ma.Ge,Aa-1)}(u,u.ei.vf+1,u.Lh.vf+1,ka+1),Y(u,u.Qb,
u.Ge));z(u);V&&G(u)};T.Qd=function(u,B,E){return u.Aa[u.mg+2*u.pc]=B>>>8&255,u.Aa[u.mg+2*u.pc+1]=255&B,u.Aa[u.Gk+u.pc]=255&E,u.pc++,0===B?u.Qb[2*E]++:(u.matches++,B--,u.Qb[2*(za[E]+256+1)]++,u.Ge[2*K(B)]++),u.pc===u.zg-1};T.ks=function(u){m(u,2,3);C(u,256,ea);16===u.kb?(x(u,u.Ab),u.Ab=0,u.kb=0):8<=u.kb&&(u.Aa[u.pending++]=255&u.Ab,u.Ab>>=8,u.kb-=8)}},{"../utils/common":3}],15:[function(fa,la){la.exports=function(){this.input=null;this.ad=this.na=this.Db=0;this.ya=null;this.ee=this.I=this.Ea=0;this.ca=
"";this.state=null;this.Mh=2;this.V=0}},{}],"/":[function(fa,la){var T={};(0,fa("./lib/utils/common").assign)(T,fa("./lib/deflate"),fa("./lib/inflate"),fa("./lib/zlib/constants"));la.exports=T},{"./lib/deflate":1,"./lib/inflate":2,"./lib/utils/common":3,"./lib/zlib/constants":6}]},{},[])("/")},2:Da=>{var va;!function(fa,la,T,W){function U(H,Z,ja){return setTimeout(C(H,ja),Z)}function I(H,Z,ja){return!!Array.isArray(H)&&(K(H,ja[Z],ja),!0)}function K(H,Z,ja){var ra;if(H)if(H.forEach)H.forEach(Z,ja);
else if(H.length!==W)for(ra=0;ra<H.length;)Z.call(ja,H[ra],ra,H),ra++;else for(ra in H)H.hasOwnProperty(ra)&&Z.call(ja,H[ra],ra,H)}function x(H,Z,ja){var ra="DEPRECATED METHOD: "+Z+"\n"+ja+" AT \n";return function(){var Ja=Error("get-stack-trace");Ja=Ja&&Ja.stack?Ja.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace";var Ua=fa.console&&(fa.console.warn||fa.console.log);return Ua&&Ua.call(fa.console,ra,Ja),H.apply(this,
arguments)}}function m(H,Z,ja){var ra=Z.prototype;(Z=H.prototype=Object.create(ra)).constructor=H;Z._super=ra;ja&&rb(Z,ja)}function C(H,Z){return function(){return H.apply(Z,arguments)}}function D(H,Z){return"function"==typeof H?H.apply(Z&&Z[0]||W,Z):H}function p(H,Z,ja){K(L(Z),function(ra){H.addEventListener(ra,ja,!1)})}function z(H,Z,ja){K(L(Z),function(ra){H.removeEventListener(ra,ja,!1)})}function G(H,Z){for(;H;){if(H==Z)return!0;H=H.parentNode}return!1}function L(H){return H.trim().split(/\s+/g)}
function ca(H,Z,ja){if(H.indexOf&&!ja)return H.indexOf(Z);for(var ra=0;ra<H.length;){if(ja&&H[ra][ja]==Z||!ja&&H[ra]===Z)return ra;ra++}return-1}function Y(H){return Array.prototype.slice.call(H,0)}function Q(H,Z,ja){for(var ra=[],Ja=[],Ua=0;Ua<H.length;){var Ta=Z?H[Ua][Z]:H[Ua];0>ca(Ja,Ta)&&ra.push(H[Ua]);Ja[Ua]=Ta;Ua++}return ja&&(ra=Z?ra.sort(function(Wa,Ib){return Wa[Z]>Ib[Z]}):ra.sort()),ra}function A(H,Z){for(var ja,ra,Ja=Z[0].toUpperCase()+Z.slice(1),Ua=0;Ua<La.length;){if((ra=(ja=La[Ua])?
ja+Ja:Z)in H)return ra;Ua++}return W}function M(H){H=H.ownerDocument||H;return H.defaultView||H.parentWindow||fa}function y(H,Z){var ja=this;this.manager=H;this.callback=Z;this.element=H.element;this.target=H.options.inputTarget;this.domHandler=function(ra){D(H.options.enable,[H])&&ja.handler(ra)};this.init()}function na(H,Z,ja){var ra=ja.pointers.length,Ja=ja.changedPointers.length,Ua=Z&1&&0==ra-Ja;ja.isFirst=!!Ua;ja.isFinal=!!(Z&12&&0==ra-Ja);Ua&&(H.session={});ja.eventType=Z;(function(Ta,Wa){var Ib=
Ta.session,xc=Wa.pointers,Jb=xc.length;Ib.firstInput||(Ib.firstInput=Ca(Wa));1<Jb&&!Ib.firstMultiple?Ib.firstMultiple=Ca(Wa):1===Jb&&(Ib.firstMultiple=!1);var Wb=Ib.firstInput,gc=(Jb=Ib.firstMultiple)?Jb.center:Wb.center,jc=Wa.center=wa(xc);Wa.timeStamp=bb();Wa.deltaTime=Wa.timeStamp-Wb.timeStamp;Wa.angle=R(gc,jc);Wa.distance=ea(gc,jc);(function(Eb,Za){var tb=Za.center,Xb=Eb.offsetDelta||{},ub=Eb.prevDelta||{},Va=Eb.prevInput||{};1!==Za.eventType&&4!==Va.eventType||(ub=Eb.prevDelta={x:Va.deltaX||
0,y:Va.deltaY||0},Xb=Eb.offsetDelta={x:tb.x,y:tb.y});Za.deltaX=ub.x+(tb.x-Xb.x);Za.deltaY=ub.y+(tb.y-Xb.y)})(Ib,Wa);Wa.offsetDirection=da(Wa.deltaX,Wa.deltaY);var fd;Wb=w(Wa.deltaTime,Wa.deltaX,Wa.deltaY);Wa.overallVelocityX=Wb.x;Wa.overallVelocityY=Wb.y;Wa.overallVelocity=eb(Wb.x)>eb(Wb.y)?Wb.x:Wb.y;Wa.scale=Jb?(fd=Jb.pointers,ea(xc[0],xc[1],Pb)/ea(fd[0],fd[1],Pb)):1;Wa.rotation=Jb?function(Eb,Za){return R(Za[1],Za[0],Pb)+R(Eb[1],Eb[0],Pb)}(Jb.pointers,xc):0;Wa.maxPointers=Ib.prevInput?Wa.pointers.length>
Ib.prevInput.maxPointers?Wa.pointers.length:Ib.prevInput.maxPointers:Wa.pointers.length;(function(Eb,Za){var tb=Eb.lastInterval||Za;var Xb=Za.timeStamp-tb.timeStamp;if(8!=Za.eventType&&(25<Xb||tb.velocity===W)){var ub=Za.deltaX-tb.deltaX;tb=Za.deltaY-tb.deltaY;var Va=w(Xb,ub,tb);Xb=Va.x;var ab=Va.y;Va=eb(Va.x)>eb(Va.y)?Va.x:Va.y;ub=da(ub,tb);Eb.lastInterval=Za}else Va=tb.velocity,Xb=tb.velocityX,ab=tb.velocityY,ub=tb.direction;Za.velocity=Va;Za.velocityX=Xb;Za.velocityY=ab;Za.direction=ub})(Ib,Wa);
Ta=Ta.element;G(Wa.srcEvent.target,Ta)&&(Ta=Wa.srcEvent.target);Wa.target=Ta})(H,ja);H.emit("hammer.input",ja);H.recognize(ja);H.session.prevInput=ja}function Ca(H){for(var Z=[],ja=0;ja<H.pointers.length;)Z[ja]={clientX:Ra(H.pointers[ja].clientX),clientY:Ra(H.pointers[ja].clientY)},ja++;return{timeStamp:bb(),pointers:Z,center:wa(Z),deltaX:H.deltaX,deltaY:H.deltaY}}function wa(H){var Z=H.length;if(1===Z)return{x:Ra(H[0].clientX),y:Ra(H[0].clientY)};for(var ja=0,ra=0,Ja=0;Ja<Z;)ja+=H[Ja].clientX,ra+=
H[Ja].clientY,Ja++;return{x:Ra(ja/Z),y:Ra(ra/Z)}}function w(H,Z,ja){return{x:Z/H||0,y:ja/H||0}}function da(H,Z){return H===Z?1:eb(H)>=eb(Z)?0>H?2:4:0>Z?8:16}function ea(H,Z,ja){ja||=Qa;var ra=Z[ja[0]]-H[ja[0]];H=Z[ja[1]]-H[ja[1]];return Math.sqrt(ra*ra+H*H)}function R(H,Z,ja){ja||=Qa;return 180*Math.atan2(Z[ja[1]]-H[ja[1]],Z[ja[0]]-H[ja[0]])/Math.PI}function xa(){this.evEl="mousedown";this.evWin="mousemove mouseup";this.pressed=!1;y.apply(this,arguments)}function za(){this.evEl=vb;this.evWin=Bb;y.apply(this,
arguments);this.store=this.manager.session.pointerEvents=[]}function ua(){this.evTarget="touchstart";this.evWin="touchstart touchmove touchend touchcancel";this.started=!1;y.apply(this,arguments)}function Fa(){this.evTarget="touchstart touchmove touchend touchcancel";this.targetIds={};y.apply(this,arguments)}function Sa(H,Z){var ja=Y(H.touches),ra=this.targetIds;if(Z&3&&1===ja.length)return ra[ja[0].identifier]=!0,[ja,ja];var Ja;H=Y(H.changedTouches);var Ua=[],Ta=this.target;if(Ja=ja.filter(function(Wa){return G(Wa.target,
Ta)}),1===Z)for(ja=0;ja<Ja.length;)ra[Ja[ja].identifier]=!0,ja++;for(ja=0;ja<H.length;)ra[H[ja].identifier]&&Ua.push(H[ja]),Z&12&&delete ra[H[ja].identifier],ja++;return Ua.length?[Q(Ja.concat(Ua),"identifier",!0),Ua]:void 0}function Ga(){y.apply(this,arguments);var H=C(this.handler,this);this.touch=new Fa(this.manager,H);this.mouse=new xa(this.manager,H);this.primaryTouch=null;this.lastTouches=[]}function ba(H){H=H.changedPointers[0];if(H.identifier===this.primaryTouch){var Z={x:H.clientX,y:H.clientY};
this.lastTouches.push(Z);var ja=this.lastTouches;setTimeout(function(){var ra=ja.indexOf(Z);-1<ra&&ja.splice(ra,1)},2500)}}function O(H,Z){this.manager=H;this.set(Z)}function u(H){this.options=rb({},this.defaults,H||{});this.id=gb++;this.manager=null;H=this.options.enable;this.options.enable=H===W?!0:H;this.state=1;this.simultaneous={};this.requireFail=[]}function B(H){return 16&H?"cancel":8&H?"end":4&H?"move":2&H?"start":""}function E(H){return 16==H?"down":8==H?"up":2==H?"left":4==H?"right":""}
function V(H,Z){return(Z=Z.manager)?Z.get(H):H}function ha(){u.apply(this,arguments)}function ia(){ha.apply(this,arguments);this.pY=this.pX=null}function ka(){ha.apply(this,arguments)}function ma(){u.apply(this,arguments);this._input=this._timer=null}function ya(){ha.apply(this,arguments)}function Aa(){ha.apply(this,arguments)}function Na(){u.apply(this,arguments);this.pCenter=this.pTime=!1;this._input=this._timer=null;this.count=0}function Ha(H,Z){var ja=Z=Z||{},ra=Z.recognizers;return ja.recognizers=
ra===W?Ha.defaults.preset:ra,new sa(H,Z)}function sa(H,Z){this.options=rb({},Ha.defaults,Z||{});this.options.inputTarget=this.options.inputTarget||H;this.handlers={};this.session={};this.recognizers=[];this.oldCssProps={};this.element=H;this.input=new (this.options.inputClass||(Fb?za:kc?Fa:pb?Ga:xa))(this,na);this.touchAction=new O(this,this.options.touchAction);$a(this,!0);K(this.options.recognizers,function(ja){var ra=this.add(new ja[0](ja[1]));ja[2]&&ra.recognizeWith(ja[2]);ja[3]&&ra.requireFailure(ja[3])},
this)}function $a(H,Z){var ja,ra=H.element;ra.style&&(K(H.options.cssProps,function(Ja,Ua){ja=A(ra.style,Ua);Z?(H.oldCssProps[ja]=ra.style[ja],ra.style[ja]=Ja):ra.style[ja]=H.oldCssProps[ja]||""}),Z||(H.oldCssProps={}))}var La=" webkit Moz MS ms o".split(" ");T=la.createElement("div");var Ra=Math.round,eb=Math.abs,bb=Date.now;var rb="function"!=typeof Object.assign?function(H){if(H===W||null===H)throw new TypeError("Cannot convert undefined or null to object");for(var Z=Object(H),ja=1;ja<arguments.length;ja++){var ra=
arguments[ja];if(ra!==W&&null!==ra)for(var Ja in ra)ra.hasOwnProperty(Ja)&&(Z[Ja]=ra[Ja])}return Z}:Object.assign;var ob=x(function(H,Z,ja){for(var ra=Object.keys(Z),Ja=0;Ja<ra.length;)(!ja||ja&&H[ra[Ja]]===W)&&(H[ra[Ja]]=Z[ra[Ja]]),Ja++;return H},"extend","Use `assign`."),db=x(function(H,Z){return ob(H,Z,!0)},"merge","Use `assign`."),gb=1,pb="ontouchstart"in fa,Fb=A(fa,"PointerEvent")!==W,kc=pb&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Qa=["x","y"],Pb=["clientX","clientY"];
y.prototype={handler:function(){},init:function(){this.evEl&&p(this.element,this.evEl,this.domHandler);this.evTarget&&p(this.target,this.evTarget,this.domHandler);this.evWin&&p(M(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&z(this.element,this.evEl,this.domHandler);this.evTarget&&z(this.target,this.evTarget,this.domHandler);this.evWin&&z(M(this.element),this.evWin,this.domHandler)}};var yc={mousedown:1,mousemove:2,mouseup:4};m(xa,y,{handler:function(H){var Z=yc[H.type];
Z&1&&0===H.button&&(this.pressed=!0);2&Z&&1!==H.which&&(Z=4);this.pressed&&(Z&4&&(this.pressed=!1),this.callback(this.manager,Z,{pointers:[H],changedPointers:[H],pointerType:"mouse",srcEvent:H}))}});var Lc={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},hc={2:"touch",3:"pen",4:"mouse",5:"kinect"},vb="pointerdown",Bb="pointermove pointerup pointercancel";fa.MSPointerEvent&&!fa.PointerEvent&&(vb="MSPointerDown",Bb="MSPointerMove MSPointerUp MSPointerCancel");m(za,y,{handler:function(H){var Z=
this.store,ja=!1,ra=H.type.toLowerCase().replace("ms","");ra=Lc[ra];var Ja=hc[H.pointerType]||H.pointerType,Ua="touch"==Ja,Ta=ca(Z,H.pointerId,"pointerId");ra&1&&(0===H.button||Ua)?0>Ta&&(Z.push(H),Ta=Z.length-1):ra&12&&(ja=!0);0>Ta||(Z[Ta]=H,this.callback(this.manager,ra,{pointers:Z,changedPointers:[H],pointerType:Ja,srcEvent:H}),ja&&Z.splice(Ta,1))}});var Yb={touchstart:1,touchmove:2,touchend:4,touchcancel:8};m(ua,y,{handler:function(H){var Z=Yb[H.type];if(1===Z&&(this.started=!0),this.started){var ja=
Y(H.touches),ra=Y(H.changedTouches);var Ja=(Z&12&&(ja=Q(ja.concat(ra),"identifier",!0)),[ja,ra]);Z&12&&0==Ja[0].length-Ja[1].length&&(this.started=!1);this.callback(this.manager,Z,{pointers:Ja[0],changedPointers:Ja[1],pointerType:"touch",srcEvent:H})}}});var Kb={touchstart:1,touchmove:2,touchend:4,touchcancel:8};m(Fa,y,{handler:function(H){var Z=Kb[H.type],ja=Sa.call(this,H,Z);ja&&this.callback(this.manager,Z,{pointers:ja[0],changedPointers:ja[1],pointerType:"touch",srcEvent:H})}});m(Ga,y,{handler:function(H,
Z,ja){var ra="touch"==ja.pointerType,Ja="mouse"==ja.pointerType;if(!(Ja&&ja.sourceCapabilities&&ja.sourceCapabilities.firesTouchEvents)){if(ra)Z&1?(this.primaryTouch=ja.changedPointers[0].identifier,ba.call(this,ja)):Z&12&&ba.call(this,ja);else{if(ra=Ja)a:{ra=ja.srcEvent.clientX;Ja=ja.srcEvent.clientY;for(var Ua=0;Ua<this.lastTouches.length;Ua++){var Ta=this.lastTouches[Ua],Wa=Math.abs(Ja-Ta.y);if(25>=Math.abs(ra-Ta.x)&&25>=Wa){ra=!0;break a}}ra=!1}if(ra)return}this.callback(H,Z,ja)}},destroy:function(){this.touch.destroy();
this.mouse.destroy()}});var Rb=A(T.style,"touchAction"),wb=Rb!==W,ic=function(){if(!wb)return!1;var H={},Z=fa.CSS&&fa.CSS.supports;return"auto;manipulation;pan-y;pan-x;pan-x pan-y;none".split(";").forEach(function(ja){H[ja]=!Z||fa.CSS.supports("touch-action",ja)}),H}();O.prototype={set:function(H){"compute"==H&&(H=this.compute());wb&&this.manager.element.style&&ic[H]&&(this.manager.element.style[Rb]=H);this.actions=H.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},
compute:function(){var H=[];return K(this.manager.recognizers,function(Z){D(Z.options.enable,[Z])&&(H=H.concat(Z.getTouchAction()))}),function(Z){if(-1<Z.indexOf("none"))return"none";var ja=-1<Z.indexOf("pan-x"),ra=-1<Z.indexOf("pan-y");return ja&&ra?"none":ja||ra?ja?"pan-x":"pan-y":-1<Z.indexOf("manipulation")?"manipulation":"auto"}(H.join(" "))},preventDefaults:function(H){var Z=H.srcEvent,ja=H.offsetDirection;if(this.manager.session.prevented)Z.preventDefault();else{var ra=this.actions,Ja=-1<ra.indexOf("none")&&
!ic.none,Ua=-1<ra.indexOf("pan-y")&&!ic["pan-y"];ra=-1<ra.indexOf("pan-x")&&!ic["pan-x"];if(Ja){var Ta=2>H.distance,Wa=250>H.deltaTime;if(1===H.pointers.length&&Ta&&Wa)return}if(!ra||!Ua)return Ja||Ua&&ja&6||ra&&ja&24?this.preventSrc(Z):void 0}},preventSrc:function(H){this.manager.session.prevented=!0;H.preventDefault()}};u.prototype={defaults:{},set:function(H){return rb(this.options,H),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(H){if(I(H,"recognizeWith",this))return this;
var Z=this.simultaneous;return Z[(H=V(H,this)).id]||(Z[H.id]=H,H.recognizeWith(this)),this},dropRecognizeWith:function(H){return I(H,"dropRecognizeWith",this)||(H=V(H,this),delete this.simultaneous[H.id]),this},requireFailure:function(H){if(I(H,"requireFailure",this))return this;var Z=this.requireFail;return-1===ca(Z,H=V(H,this))&&(Z.push(H),H.requireFailure(this)),this},dropRequireFailure:function(H){if(I(H,"dropRequireFailure",this))return this;H=V(H,this);H=ca(this.requireFail,H);return-1<H&&this.requireFail.splice(H,
1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(H){return!!this.simultaneous[H.id]},emit:function(H){function Z(Ja){ja.manager.emit(Ja,H)}var ja=this,ra=this.state;8>ra&&Z(ja.options.event+B(ra));Z(ja.options.event);H.additionalEvent&&Z(H.additionalEvent);8<=ra&&Z(ja.options.event+B(ra))},tryEmit:function(H){if(this.canEmit())return this.emit(H);this.state=32},canEmit:function(){for(var H=0;H<this.requireFail.length;){if(!(this.requireFail[H].state&
33))return!1;H++}return!0},recognize:function(H){H=rb({},H);if(!D(this.options.enable,[this,H]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1);this.state=this.process(H);30&this.state&&this.tryEmit(H)},process:function(){},getTouchAction:function(){},reset:function(){}};m(ha,u,{defaults:{pointers:1},attrTest:function(H){var Z=this.options.pointers;return 0===Z||H.pointers.length===Z},process:function(H){var Z=this.state,ja=H.eventType,ra=6&Z;H=this.attrTest(H);return ra&&(ja&
8||!H)?16|Z:ra||H?ja&4?8|Z:2&Z?4|Z:2:32}});m(ia,ha,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var H=this.options.direction,Z=[];return H&6&&Z.push("pan-y"),H&24&&Z.push("pan-x"),Z},directionTest:function(H){var Z=this.options,ja=!0,ra=H.distance,Ja=H.direction,Ua=H.deltaX,Ta=H.deltaY;return Ja&Z.direction||(Z.direction&6?(Ja=0===Ua?1:0>Ua?2:4,ja=Ua!=this.pX,ra=Math.abs(H.deltaX)):(Ja=0===Ta?1:0>Ta?8:16,ja=Ta!=this.pY,ra=Math.abs(H.deltaY))),H.direction=
Ja,ja&&ra>Z.threshold&&Ja&Z.direction},attrTest:function(H){return ha.prototype.attrTest.call(this,H)&&(2&this.state||!(2&this.state)&&this.directionTest(H))},emit:function(H){this.pX=H.deltaX;this.pY=H.deltaY;var Z=E(H.direction);Z&&(H.additionalEvent=this.options.event+Z);this._super.emit.call(this,H)}});m(ka,ha,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(H){return this._super.attrTest.call(this,H)&&(Math.abs(H.scale-1)>this.options.threshold||
2&this.state)},emit:function(H){1!==H.scale&&(H.additionalEvent=this.options.event+(1>H.scale?"in":"out"));this._super.emit.call(this,H)}});m(ma,u,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(H){var Z=this.options,ja=H.pointers.length===Z.pointers,ra=H.distance<Z.threshold,Ja=H.deltaTime>Z.time;if(this._input=H,!ra||!ja||H.eventType&12&&!Ja)this.reset();else if(H.eventType&1)this.reset(),this._timer=U(function(){this.state=8;
this.tryEmit()},Z.time,this);else if(H.eventType&4)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(H){8===this.state&&(H&&H.eventType&4?this.manager.emit(this.options.event+"up",H):(this._input.timeStamp=bb(),this.manager.emit(this.options.event,this._input)))}});m(ya,ha,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(H){return this._super.attrTest.call(this,H)&&(Math.abs(H.rotation)>this.options.threshold||
2&this.state)}});m(Aa,ha,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return ia.prototype.getTouchAction.call(this)},attrTest:function(H){var Z,ja=this.options.direction;return ja&30?Z=H.overallVelocity:ja&6?Z=H.overallVelocityX:ja&24&&(Z=H.overallVelocityY),this._super.attrTest.call(this,H)&&ja&H.offsetDirection&&H.distance>this.options.threshold&&H.maxPointers==this.options.pointers&&eb(Z)>this.options.velocity&&H.eventType&4},emit:function(H){var Z=
E(H.offsetDirection);Z&&this.manager.emit(this.options.event+Z,H);this.manager.emit(this.options.event,H)}});m(Na,u,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(H){var Z=this.options,ja=H.pointers.length===Z.pointers,ra=H.distance<Z.threshold,Ja=H.deltaTime<Z.time;if(this.reset(),H.eventType&1&&0===this.count)return this.failTimeout();if(ra&&Ja&&ja){if(4!=H.eventType)return this.failTimeout();
ja=!this.pTime||H.timeStamp-this.pTime<Z.interval;ra=!this.pCenter||ea(this.pCenter,H.center)<Z.posThreshold;if(this.pTime=H.timeStamp,this.pCenter=H.center,ra&&ja?this.count+=1:this.count=1,this._input=H,0==this.count%Z.taps)return this.hasRequireFailures()?(this._timer=U(function(){this.state=8;this.tryEmit()},Z.interval,this),2):8}return 32},failTimeout:function(){return this._timer=U(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==
this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});Ha.VERSION="2.0.7";Ha.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[ya,{enable:!1}],[ka,{enable:!1},["rotate"]],[Aa,{direction:6}],[ia,{direction:6},["swipe"]],[Na],[Na,{event:"doubletap",taps:2},["tap"]],[ma]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};
sa.prototype={set:function(H){return rb(this.options,H),H.touchAction&&this.touchAction.update(),H.inputTarget&&(this.input.destroy(),this.input.target=H.inputTarget,this.input.init()),this},stop:function(H){this.session.stopped=H?2:1},recognize:function(H){var Z=this.session;if(!Z.stopped){this.touchAction.preventDefaults(H);var ja=this.recognizers,ra=Z.curRecognizer;(!ra||ra&&8&ra.state)&&(ra=Z.curRecognizer=null);for(var Ja=0;Ja<ja.length;){var Ua=ja[Ja];2===Z.stopped||ra&&Ua!=ra&&!Ua.canRecognizeWith(ra)?
Ua.reset():Ua.recognize(H);!ra&&14&Ua.state&&(ra=Z.curRecognizer=Ua);Ja++}}},get:function(H){if(H instanceof u)return H;for(var Z=this.recognizers,ja=0;ja<Z.length;ja++)if(Z[ja].options.event==H)return Z[ja];return null},add:function(H){if(I(H,"add",this))return this;var Z=this.get(H.options.event);return Z&&this.remove(Z),this.recognizers.push(H),H.manager=this,this.touchAction.update(),H},remove:function(H){if(I(H,"remove",this))return this;if(H=this.get(H)){var Z=this.recognizers;H=ca(Z,H);-1!==
H&&(Z.splice(H,1),this.touchAction.update())}return this},on:function(H,Z){if(H!==W&&Z!==W){var ja=this.handlers;return K(L(H),function(ra){ja[ra]=ja[ra]||[];ja[ra].push(Z)}),this}},off:function(H,Z){if(H!==W){var ja=this.handlers;return K(L(H),function(ra){Z?ja[ra]&&ja[ra].splice(ca(ja[ra],Z),1):delete ja[ra]}),this}},emit:function(H,Z){this.options.domEvents&&function(ra,Ja){var Ua=la.createEvent("Event");Ua.initEvent(ra,!0,!0);Ua.gesture=Ja;Ja.target.dispatchEvent(Ua)}(H,Z);var ja=this.handlers[H]&&
this.handlers[H].slice();if(ja&&ja.length)for(Z.type=H,Z.preventDefault=function(){Z.srcEvent.preventDefault()},H=0;H<ja.length;)ja[H](Z),H++},destroy:function(){this.element&&$a(this,!1);this.handlers={};this.session={};this.input.destroy();this.element=null}};rb(Ha,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,
DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:sa,Input:y,TouchAction:O,TouchInput:Fa,MouseInput:xa,PointerEventInput:za,TouchMouseInput:Ga,SingleTouchInput:ua,Recognizer:u,AttrRecognizer:ha,Tap:Na,Pan:ia,Swipe:Aa,Pinch:ka,Rotate:ya,Press:ma,on:p,off:z,each:K,merge:db,extend:ob,assign:rb,inherit:m,bindFn:C,prefixed:A});(void 0!==fa?fa:"undefined"!=typeof self?self:{}).Hammer=Ha;(va=Ha)===W||(Da.exports=va)}(window,document)}},Pa={};Ea.l=fb;Ea.n=Da=>{var va=
Da&&Da.sy?()=>Da.default:()=>Da;return Ea.d(va,{a:va}),va};Ea.d=(Da,va)=>{for(var fa in va)Ea.Af(va,fa)&&!Ea.Af(Da,fa)&&Object.defineProperty(Da,fa,{enumerable:!0,get:va[fa]})};Ea.f={};Ea.e=Da=>Promise.all(Object.keys(Ea.f).reduce((va,fa)=>(Ea.f[fa](Da,va),va),[]));Ea.Mw=Da=>({62:"DicomJpegLs",205:"DicomJpegLossless",256:"DicomJpegBaseline",301:"DicomUncompressed",476:"NativeJpegBaseline",758:"NativeJpeg2000",769:"DicomRleLossless",794:"DicomJpeg2000"})[Da]+".js";Ea.Af=(Da,va)=>Object.prototype.hasOwnProperty.call(Da,
va);var mb={};Ea.xg=(Da,va,fa)=>{if(mb[Da])mb[Da].push(va);else{var la;if(void 0!==fa){fa=document.getElementsByTagName("script");for(var T=0;T<fa.length;T++){var W=fa[T];if(W.getAttribute("src")==Da){var U=W;break}}}U||(la=!0,(U=document.createElement("script")).charset="utf-8",U.timeout=120,Ea.Xu&&U.setAttribute("nonce",Ea.Xu),U.src=Da);mb[Da]=[va];va=(K,x)=>{U.onerror=U.onload=null;clearTimeout(I);var m=mb[Da];if(delete mb[Da],U.parentNode&&U.parentNode.removeChild(U),m&&m.forEach(C=>C(x)),K)return K(x)};
var I=setTimeout(va.bind(null,void 0,{type:"timeout",target:U}),12E4);U.onerror=va.bind(null,U.onerror);U.onload=va.bind(null,U.onload);la&&document.head.appendChild(U)}};Ea.r=Da=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Da,Symbol.toStringTag,{value:"Module"});Object.defineProperty(Da,"__esModule",{value:!0})};Ea.p="/qt-sdk/";(()=>{var Da={949:0};Ea.f.BA=(la,T)=>{var W=Ea.Af(Da,la)?Da[la]:void 0;if(0!==W)if(W)T.push(W[2]);else{var U=new Promise((K,x)=>W=Da[la]=[K,x]);
T.push(W[2]=U);var I=Error();Ea.xg(Ea.p+Ea.Mw(la),K=>{if(Ea.Af(Da,la)&&(0!==(W=Da[la])&&(Da[la]=void 0),W)){var x=K&&("load"===K.type?"missing":K.type);K=K&&K.target&&K.target.src;I.message="Loading chunk "+la+" failed.\n("+x+": "+K+")";I.name="ChunkLoadError";I.type=x;I.request=K;W[1](I)}},"chunk-"+la,la)}};var va=(la,T)=>{var W,[U,I,K]=T,x=0;if(U.some(m=>0!==Da[m])){for(W in I)Ea.Af(I,W)&&(Ea.l[W]=I[W]);K&&K(Ea)}for(la&&la(T);x<U.length;x++)la=U[x],Ea.Af(Da,la)&&Da[la]&&Da[la][0](),Da[la]=0},fa=
self.aa=self.aa||[];fa.forEach(va.bind(null,0));fa.push=va.bind(null,fa.push.bind(fa))})();var Ya={};return(()=>{function Da(a,b){function c(n){return function(l){return function(g){if(d)throw new TypeError("Generator is already executing.");for(;k&&(k=0,g[0]&&(h=0)),h;)try{if(d=1,e&&(f=2&g[0]?e.return:g[0]?e.throw||((f=e.return)&&f.call(e),0):e.next)&&!(f=f.call(e,g[1])).done)return f;switch(e=0,f&&(g=[2&g[0],f.value]),g[0]){case 0:case 1:f=g;break;case 4:return h.label++,{value:g[1],done:!1};case 5:h.label++;
e=g[1];g=[0];continue;case 7:g=h.o.pop();h.m.pop();continue;default:if(!((f=0<(f=h.m).length&&f[f.length-1])||6!==g[0]&&2!==g[0])){h=0;continue}if(3===g[0]&&(!f||g[1]>f[0]&&g[1]<f[3]))h.label=g[1];else if(6===g[0]&&h.label<f[1])h.label=f[1],f=g;else if(f&&h.label<f[2])h.label=f[2],h.o.push(g);else{f[2]&&h.o.pop();h.m.pop();continue}}g=b.call(a,h)}catch(r){g=[6,r],e=0}finally{d=f=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([n,l])}}var d,e,f,k,h={label:0,i:function(){if(1&f[0])throw f[1];
return f[1]},m:[],o:[]};return k={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k}function va(a,b,c,d){return new (c||=Promise)(function(e,f){function k(l){try{n(d.next(l))}catch(g){f(g)}}function h(l){try{n(d.throw(l))}catch(g){f(g)}}function n(l){var g;l.done?e(l.value):(g=l.value,g instanceof c?g:new c(function(r){r(g)})).then(k,h)}n((d=d.apply(a,b||[])).next())})}function fa(a,b){function c(n){return function(l){return function(g){if(d)throw new TypeError("Generator is already executing.");
for(;k&&(k=0,g[0]&&(h=0)),h;)try{if(d=1,e&&(f=2&g[0]?e.return:g[0]?e.throw||((f=e.return)&&f.call(e),0):e.next)&&!(f=f.call(e,g[1])).done)return f;switch(e=0,f&&(g=[2&g[0],f.value]),g[0]){case 0:case 1:f=g;break;case 4:return h.label++,{value:g[1],done:!1};case 5:h.label++;e=g[1];g=[0];continue;case 7:g=h.o.pop();h.m.pop();continue;default:if(!((f=0<(f=h.m).length&&f[f.length-1])||6!==g[0]&&2!==g[0])){h=0;continue}if(3===g[0]&&(!f||g[1]>f[0]&&g[1]<f[3]))h.label=g[1];else if(6===g[0]&&h.label<f[1])h.label=
f[1],f=g;else if(f&&h.label<f[2])h.label=f[2],h.o.push(g);else{f[2]&&h.o.pop();h.m.pop();continue}}g=b.call(a,h)}catch(r){g=[6,r],e=0}finally{d=f=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([n,l])}}var d,e,f,k,h={label:0,i:function(){if(1&f[0])throw f[1];return f[1]},m:[],o:[]};return k={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k}function la(a,b,c,d){return new (c||=Promise)(function(e,f){function k(l){try{n(d.next(l))}catch(g){f(g)}}
function h(l){try{n(d.throw(l))}catch(g){f(g)}}function n(l){var g;l.done?e(l.value):(g=l.value,g instanceof c?g:new c(function(r){r(g)})).then(k,h)}n((d=d.apply(a,b||[])).next())})}function T(){return T=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a},T.apply(this,arguments)}function W(){}function U(){this.studies=[]}function I(){this.series=[]}function K(){this.instances=[]}function x(){}
function m(a,b){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(c[e]=d[e])},m(a,b)}function C(a,b){function c(n){return function(l){return function(g){if(d)throw new TypeError("Generator is already executing.");for(;k&&(k=0,g[0]&&(h=0)),h;)try{if(d=1,e&&(f=2&g[0]?e.return:g[0]?e.throw||((f=e.return)&&f.call(e),0):e.next)&&!(f=f.call(e,g[1])).done)return f;switch(e=0,f&&(g=[2&g[0],
f.value]),g[0]){case 0:case 1:f=g;break;case 4:return h.label++,{value:g[1],done:!1};case 5:h.label++;e=g[1];g=[0];continue;case 7:g=h.o.pop();h.m.pop();continue;default:if(!((f=0<(f=h.m).length&&f[f.length-1])||6!==g[0]&&2!==g[0])){h=0;continue}if(3===g[0]&&(!f||g[1]>f[0]&&g[1]<f[3]))h.label=g[1];else if(6===g[0]&&h.label<f[1])h.label=f[1],f=g;else if(f&&h.label<f[2])h.label=f[2],h.o.push(g);else{f[2]&&h.o.pop();h.m.pop();continue}}g=b.call(a,h)}catch(r){g=[6,r],e=0}finally{d=f=0}if(5&g[0])throw g[1];
return{value:g[0]?g[1]:void 0,done:!0}}([n,l])}}var d,e,f,k,h={label:0,i:function(){if(1&f[0])throw f[1];return f[1]},m:[],o:[]};return k={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k}function D(a,b,c,d){return new (c||=Promise)(function(e,f){function k(l){try{n(d.next(l))}catch(g){f(g)}}function h(l){try{n(d.throw(l))}catch(g){f(g)}}function n(l){var g;l.done?e(l.value):(g=l.value,g instanceof c?g:new c(function(r){r(g)})).then(k,h)}
n((d=d.apply(a,b||[])).next())})}function p(){}function z(){}function G(a,b){function c(n){return function(l){return function(g){if(d)throw new TypeError("Generator is already executing.");for(;k&&(k=0,g[0]&&(h=0)),h;)try{if(d=1,e&&(f=2&g[0]?e.return:g[0]?e.throw||((f=e.return)&&f.call(e),0):e.next)&&!(f=f.call(e,g[1])).done)return f;switch(e=0,f&&(g=[2&g[0],f.value]),g[0]){case 0:case 1:f=g;break;case 4:return h.label++,{value:g[1],done:!1};case 5:h.label++;e=g[1];g=[0];continue;case 7:g=h.o.pop();
h.m.pop();continue;default:if(!((f=0<(f=h.m).length&&f[f.length-1])||6!==g[0]&&2!==g[0])){h=0;continue}if(3===g[0]&&(!f||g[1]>f[0]&&g[1]<f[3]))h.label=g[1];else if(6===g[0]&&h.label<f[1])h.label=f[1],f=g;else if(f&&h.label<f[2])h.label=f[2],h.o.push(g);else{f[2]&&h.o.pop();h.m.pop();continue}}g=b.call(a,h)}catch(r){g=[6,r],e=0}finally{d=f=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([n,l])}}var d,e,f,k,h={label:0,i:function(){if(1&f[0])throw f[1];return f[1]},m:[],o:[]};return k=
{next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k}function L(a,b,c,d){return new (c||=Promise)(function(e,f){function k(l){try{n(d.next(l))}catch(g){f(g)}}function h(l){try{n(d.throw(l))}catch(g){f(g)}}function n(l){var g;l.done?e(l.value):(g=l.value,g instanceof c?g:new c(function(r){r(g)})).then(k,h)}n((d=d.apply(a,b||[])).next())})}function ca(a,b,c,d){this.mb=a;this.Pa=b;this.zi=c;this.Ln=d}function Y(a,b){this.promise=a;this.Gm=b}function Q(a,
b,c,d,e,f,k,h){this.rows=b;this.columns=c;this.Tb=d;this.Ob=e;this.Rb=f;this.rowPixelSpacing=k;this.columnPixelSpacing=h}function A(a,b){function c(n){return function(l){return function(g){if(d)throw new TypeError("Generator is already executing.");for(;k&&(k=0,g[0]&&(h=0)),h;)try{if(d=1,e&&(f=2&g[0]?e.return:g[0]?e.throw||((f=e.return)&&f.call(e),0):e.next)&&!(f=f.call(e,g[1])).done)return f;switch(e=0,f&&(g=[2&g[0],f.value]),g[0]){case 0:case 1:f=g;break;case 4:return h.label++,{value:g[1],done:!1};
case 5:h.label++;e=g[1];g=[0];continue;case 7:g=h.o.pop();h.m.pop();continue;default:if(!((f=0<(f=h.m).length&&f[f.length-1])||6!==g[0]&&2!==g[0])){h=0;continue}if(3===g[0]&&(!f||g[1]>f[0]&&g[1]<f[3]))h.label=g[1];else if(6===g[0]&&h.label<f[1])h.label=f[1],f=g;else if(f&&h.label<f[2])h.label=f[2],h.o.push(g);else{f[2]&&h.o.pop();h.m.pop();continue}}g=b.call(a,h)}catch(r){g=[6,r],e=0}finally{d=f=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([n,l])}}var d,e,f,k,h={label:0,i:function(){if(1&
f[0])throw f[1];return f[1]},m:[],o:[]};return k={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k}function M(a,b,c,d){return new (c||=Promise)(function(e,f){function k(l){try{n(d.next(l))}catch(g){f(g)}}function h(l){try{n(d.throw(l))}catch(g){f(g)}}function n(l){var g;l.done?e(l.value):(g=l.value,g instanceof c?g:new c(function(r){r(g)})).then(k,h)}n((d=d.apply(a,b||[])).next())})}function y(){this.cloudSeriesIds=[];this.appStates=""}function na(a,
b){function c(n){return function(l){return function(g){if(d)throw new TypeError("Generator is already executing.");for(;k&&(k=0,g[0]&&(h=0)),h;)try{if(d=1,e&&(f=2&g[0]?e.return:g[0]?e.throw||((f=e.return)&&f.call(e),0):e.next)&&!(f=f.call(e,g[1])).done)return f;switch(e=0,f&&(g=[2&g[0],f.value]),g[0]){case 0:case 1:f=g;break;case 4:return h.label++,{value:g[1],done:!1};case 5:h.label++;e=g[1];g=[0];continue;case 7:g=h.o.pop();h.m.pop();continue;default:if(!((f=0<(f=h.m).length&&f[f.length-1])||6!==
g[0]&&2!==g[0])){h=0;continue}if(3===g[0]&&(!f||g[1]>f[0]&&g[1]<f[3]))h.label=g[1];else if(6===g[0]&&h.label<f[1])h.label=f[1],f=g;else if(f&&h.label<f[2])h.label=f[2],h.o.push(g);else{f[2]&&h.o.pop();h.m.pop();continue}}g=b.call(a,h)}catch(r){g=[6,r],e=0}finally{d=f=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([n,l])}}var d,e,f,k,h={label:0,i:function(){if(1&f[0])throw f[1];return f[1]},m:[],o:[]};return k={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(k[Symbol.iterator]=
function(){return this}),k}function Ca(a,b,c,d){return new (c||=Promise)(function(e,f){function k(l){try{n(d.next(l))}catch(g){f(g)}}function h(l){try{n(d.throw(l))}catch(g){f(g)}}function n(l){var g;l.done?e(l.value):(g=l.value,g instanceof c?g:new c(function(r){r(g)})).then(k,h)}n((d=d.apply(a,b||[])).next())})}function wa(a,b){function c(n){return function(l){return function(g){if(d)throw new TypeError("Generator is already executing.");for(;k&&(k=0,g[0]&&(h=0)),h;)try{if(d=1,e&&(f=2&g[0]?e.return:
g[0]?e.throw||((f=e.return)&&f.call(e),0):e.next)&&!(f=f.call(e,g[1])).done)return f;switch(e=0,f&&(g=[2&g[0],f.value]),g[0]){case 0:case 1:f=g;break;case 4:return h.label++,{value:g[1],done:!1};case 5:h.label++;e=g[1];g=[0];continue;case 7:g=h.o.pop();h.m.pop();continue;default:if(!((f=0<(f=h.m).length&&f[f.length-1])||6!==g[0]&&2!==g[0])){h=0;continue}if(3===g[0]&&(!f||g[1]>f[0]&&g[1]<f[3]))h.label=g[1];else if(6===g[0]&&h.label<f[1])h.label=f[1],f=g;else if(f&&h.label<f[2])h.label=f[2],h.o.push(g);
else{f[2]&&h.o.pop();h.m.pop();continue}}g=b.call(a,h)}catch(r){g=[6,r],e=0}finally{d=f=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([n,l])}}var d,e,f,k,h={label:0,i:function(){if(1&f[0])throw f[1];return f[1]},m:[],o:[]};return k={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k}function w(a,b,c,d){return new (c||=Promise)(function(e,f){function k(l){try{n(d.next(l))}catch(g){f(g)}}function h(l){try{n(d.throw(l))}catch(g){f(g)}}
function n(l){var g;l.done?e(l.value):(g=l.value,g instanceof c?g:new c(function(r){r(g)})).then(k,h)}n((d=d.apply(a,b||[])).next())})}function da(){}function ea(){}function R(a,b){function c(n){return function(l){return function(g){if(d)throw new TypeError("Generator is already executing.");for(;k&&(k=0,g[0]&&(h=0)),h;)try{if(d=1,e&&(f=2&g[0]?e.return:g[0]?e.throw||((f=e.return)&&f.call(e),0):e.next)&&!(f=f.call(e,g[1])).done)return f;switch(e=0,f&&(g=[2&g[0],f.value]),g[0]){case 0:case 1:f=g;break;
case 4:return h.label++,{value:g[1],done:!1};case 5:h.label++;e=g[1];g=[0];continue;case 7:g=h.o.pop();h.m.pop();continue;default:if(!((f=0<(f=h.m).length&&f[f.length-1])||6!==g[0]&&2!==g[0])){h=0;continue}if(3===g[0]&&(!f||g[1]>f[0]&&g[1]<f[3]))h.label=g[1];else if(6===g[0]&&h.label<f[1])h.label=f[1],f=g;else if(f&&h.label<f[2])h.label=f[2],h.o.push(g);else{f[2]&&h.o.pop();h.m.pop();continue}}g=b.call(a,h)}catch(r){g=[6,r],e=0}finally{d=f=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([n,
l])}}var d,e,f,k,h={label:0,i:function(){if(1&f[0])throw f[1];return f[1]},m:[],o:[]};return k={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k}function xa(a,b,c,d){return new (c||=Promise)(function(e,f){function k(l){try{n(d.next(l))}catch(g){f(g)}}function h(l){try{n(d.throw(l))}catch(g){f(g)}}function n(l){var g;l.done?e(l.value):(g=l.value,g instanceof c?g:new c(function(r){r(g)})).then(k,h)}n((d=d.apply(a,b||[])).next())})}function za(a,
b,c,d,e){this.DataView=a;this.TransferSyntax=b;this.v=d;this.gh=e}function ua(a,b){function c(n){return function(l){return function(g){if(d)throw new TypeError("Generator is already executing.");for(;k&&(k=0,g[0]&&(h=0)),h;)try{if(d=1,e&&(f=2&g[0]?e.return:g[0]?e.throw||((f=e.return)&&f.call(e),0):e.next)&&!(f=f.call(e,g[1])).done)return f;switch(e=0,f&&(g=[2&g[0],f.value]),g[0]){case 0:case 1:f=g;break;case 4:return h.label++,{value:g[1],done:!1};case 5:h.label++;e=g[1];g=[0];continue;case 7:g=h.o.pop();
h.m.pop();continue;default:if(!((f=0<(f=h.m).length&&f[f.length-1])||6!==g[0]&&2!==g[0])){h=0;continue}if(3===g[0]&&(!f||g[1]>f[0]&&g[1]<f[3]))h.label=g[1];else if(6===g[0]&&h.label<f[1])h.label=f[1],f=g;else if(f&&h.label<f[2])h.label=f[2],h.o.push(g);else{f[2]&&h.o.pop();h.m.pop();continue}}g=b.call(a,h)}catch(r){g=[6,r],e=0}finally{d=f=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([n,l])}}var d,e,f,k,h={label:0,i:function(){if(1&f[0])throw f[1];return f[1]},m:[],o:[]};return k=
{next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k}function Fa(a,b,c,d){return new (c||=Promise)(function(e,f){function k(l){try{n(d.next(l))}catch(g){f(g)}}function h(l){try{n(d.throw(l))}catch(g){f(g)}}function n(l){var g;l.done?e(l.value):(g=l.value,g instanceof c?g:new c(function(r){r(g)})).then(k,h)}n((d=d.apply(a,b||[])).next())})}function Sa(a,b){function c(n){return function(l){return function(g){if(d)throw new TypeError("Generator is already executing.");
for(;k&&(k=0,g[0]&&(h=0)),h;)try{if(d=1,e&&(f=2&g[0]?e.return:g[0]?e.throw||((f=e.return)&&f.call(e),0):e.next)&&!(f=f.call(e,g[1])).done)return f;switch(e=0,f&&(g=[2&g[0],f.value]),g[0]){case 0:case 1:f=g;break;case 4:return h.label++,{value:g[1],done:!1};case 5:h.label++;e=g[1];g=[0];continue;case 7:g=h.o.pop();h.m.pop();continue;default:if(!((f=0<(f=h.m).length&&f[f.length-1])||6!==g[0]&&2!==g[0])){h=0;continue}if(3===g[0]&&(!f||g[1]>f[0]&&g[1]<f[3]))h.label=g[1];else if(6===g[0]&&h.label<f[1])h.label=
f[1],f=g;else if(f&&h.label<f[2])h.label=f[2],h.o.push(g);else{f[2]&&h.o.pop();h.m.pop();continue}}g=b.call(a,h)}catch(r){g=[6,r],e=0}finally{d=f=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([n,l])}}var d,e,f,k,h={label:0,i:function(){if(1&f[0])throw f[1];return f[1]},m:[],o:[]};return k={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k}function Ga(a,b,c,d){return new (c||=Promise)(function(e,f){function k(l){try{n(d.next(l))}catch(g){f(g)}}
function h(l){try{n(d.throw(l))}catch(g){f(g)}}function n(l){var g;l.done?e(l.value):(g=l.value,g instanceof c?g:new c(function(r){r(g)})).then(k,h)}n((d=d.apply(a,b||[])).next())})}function ba(a,b,c,d,e,f,k,h,n,l,g,r,q,F,J,P,S,X,oa,ta,qa,Ma,Oa,Ka){this.minPixelValue=a;this.maxPixelValue=b;this.slope=c;this.intercept=d;this.windowCenter=e;this.windowWidth=f;this.render=k;this.Oa=h;this.rows=n;this.columns=l;this.height=g;this.width=r;this.color=q;this.columnPixelSpacing=F;this.rowPixelSpacing=J;this.invert=
P;this.sizeInBytes=S;this.descriptions=X;this.defaultWindowCenter=oa;this.defaultWindowWidth=ta;this.unsigned=qa;this.depthPixelSpacing=Ma;this.quality=Oa;this.pixelBytes=Ka}function O(a,b){function c(n){return function(l){return function(g){if(d)throw new TypeError("Generator is already executing.");for(;k&&(k=0,g[0]&&(h=0)),h;)try{if(d=1,e&&(f=2&g[0]?e.return:g[0]?e.throw||((f=e.return)&&f.call(e),0):e.next)&&!(f=f.call(e,g[1])).done)return f;switch(e=0,f&&(g=[2&g[0],f.value]),g[0]){case 0:case 1:f=
g;break;case 4:return h.label++,{value:g[1],done:!1};case 5:h.label++;e=g[1];g=[0];continue;case 7:g=h.o.pop();h.m.pop();continue;default:if(!((f=0<(f=h.m).length&&f[f.length-1])||6!==g[0]&&2!==g[0])){h=0;continue}if(3===g[0]&&(!f||g[1]>f[0]&&g[1]<f[3]))h.label=g[1];else if(6===g[0]&&h.label<f[1])h.label=f[1],f=g;else if(f&&h.label<f[2])h.label=f[2],h.o.push(g);else{f[2]&&h.o.pop();h.m.pop();continue}}g=b.call(a,h)}catch(r){g=[6,r],e=0}finally{d=f=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,
done:!0}}([n,l])}}var d,e,f,k,h={label:0,i:function(){if(1&f[0])throw f[1];return f[1]},m:[],o:[]};return k={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k}function u(a,b,c,d){return new (c||=Promise)(function(e,f){function k(l){try{n(d.next(l))}catch(g){f(g)}}function h(l){try{n(d.throw(l))}catch(g){f(g)}}function n(l){var g;l.done?e(l.value):(g=l.value,g instanceof c?g:new c(function(r){r(g)})).then(k,h)}n((d=d.apply(a,b||[])).next())})}
function B(a,b,c){this.rj=a;this.ah=b;this.Cd=c}function E(){}function V(a,b){function c(n){return function(l){return function(g){if(d)throw new TypeError("Generator is already executing.");for(;k&&(k=0,g[0]&&(h=0)),h;)try{if(d=1,e&&(f=2&g[0]?e.return:g[0]?e.throw||((f=e.return)&&f.call(e),0):e.next)&&!(f=f.call(e,g[1])).done)return f;switch(e=0,f&&(g=[2&g[0],f.value]),g[0]){case 0:case 1:f=g;break;case 4:return h.label++,{value:g[1],done:!1};case 5:h.label++;e=g[1];g=[0];continue;case 7:g=h.o.pop();
h.m.pop();continue;default:if(!((f=0<(f=h.m).length&&f[f.length-1])||6!==g[0]&&2!==g[0])){h=0;continue}if(3===g[0]&&(!f||g[1]>f[0]&&g[1]<f[3]))h.label=g[1];else if(6===g[0]&&h.label<f[1])h.label=f[1],f=g;else if(f&&h.label<f[2])h.label=f[2],h.o.push(g);else{f[2]&&h.o.pop();h.m.pop();continue}}g=b.call(a,h)}catch(r){g=[6,r],e=0}finally{d=f=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([n,l])}}var d,e,f,k,h={label:0,i:function(){if(1&f[0])throw f[1];return f[1]},m:[],o:[]};return k=
{next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k}function ha(a,b,c,d){return new (c||=Promise)(function(e,f){function k(l){try{n(d.next(l))}catch(g){f(g)}}function h(l){try{n(d.throw(l))}catch(g){f(g)}}function n(l){var g;l.done?e(l.value):(g=l.value,g instanceof c?g:new c(function(r){r(g)})).then(k,h)}n((d=d.apply(a,b||[])).next())})}function ia(a,b){this.Yb=a;this.bh=b}function ka(a){a=a.replace("S","i");return a=a.replace("I","s"),a=a.replace("R",
"l"),a=a.replace("L","r"),a=a.replace("A","p"),a=a.replace("P","a"),a=a.toUpperCase(),a}function ma(a){var b=Cb(a);a="";const c=0>b.x?"R":"L",d=0>b.y?"A":"P",e=0>b.z?"I":"S";b=new pa.H.Xe(Math.abs(b.x),Math.abs(b.y),Math.abs(b.z));for(let f=0;3>f;f++)if(1E-4<b.x&&b.x>b.y&&b.x>b.z)a+=c,b.x=0;else if(1E-4<b.y&&b.y>b.x&&b.y>b.z)a+=d,b.y=0;else{if(!(1E-4<b.z&&b.z>b.x&&b.z>b.y))break;a+=e;b.z=0}return a}function ya(a,b,c){const d=jb(a,"arrowAnnotate");if(d&&d.data)for(let f=0;f<d.data.length;f++){var e=
d.data[f];const k=Sb.za(a,e,b,c);e=Mc(e.handles.textBox,b);if(!0===k||e)return!0}return!1}function Aa(a){function b(f){const k=f.detail;a.ac?a.ac(k):function(h){const n=pa.j,l=h.element,g=a.gd(h);if(g){if(lc(l,a.fa,g),1===Object.keys(g.handles).length&&h.type===N.ka)return g.active=!1,g.handles.end.active=!1,g.handles.end.highlight=!1,g.invalidated=!0,Tb(h,g.handles)&&kb(l,a.fa,g),void n.A(l);l.removeEventListener(N.rb,a.gb||b);l.removeEventListener(N.ka,a.Fa||c);l.removeEventListener(N.ea,a.ma||
d);n.A(l);Yc(h,a.fa,g,g.handles.end,function(){g.active=!1;g.invalidated=!0;Tb(h,g.handles)&&kb(l,a.fa,g);l.addEventListener(N.rb,a.gb||b);l.addEventListener(N.ka,a.Fa||c);l.addEventListener(N.ea,a.ma||d);n.A(l);cb(l,N.dh,null)})}}(k);f.stopImmediatePropagation();f.preventDefault()}function c(f){function k(){xb(r);Tb(h,q.handles)&&kb(l,a.fa,q);n.A(l);l.addEventListener(N.ea,a.ma||d);l.addEventListener(N.ka,a.Fa||c)}const h=f.detail,n=pa.j,l=h.element,g=h.currentPoints.canvas,r=jb(f.currentTarget,
a.fa);let q,F;if(xb(r),r)for(F=0;F<r.data.length;F++){q=r.data[F];const J=Od(l,q.handles,g,25);if(J)return l.removeEventListener(N.ea,a.ma||d),l.removeEventListener(N.ka,a.Fa||c),q.active=!0,J.active=!0,n.A(l),mc(f,a.fa,q,J,k),f.stopImmediatePropagation(),void f.preventDefault()}if(r&&a.za)for(F=0;F<r.data.length;F++)if(q=r.data[F],a.za(l,q,g))return l.removeEventListener(N.ea,a.ma||d),l.removeEventListener(N.ka,a.Fa||c),q.active=!0,n.A(l),sc(f,q,0,a.fa,!0,k),f.stopImmediatePropagation(),void f.preventDefault();
return a.gb?a.gb(f):b(f),!1}function d(f){function k(J,P){r.active=!1;r.invalidated=!0;Tb(h,r.handles)&&kb(h.element,a.fa,r);n.A(h.element);l.addEventListener(N.ea,a.ma||d);l.addEventListener(N.ka,a.Fa||c);a.Qa&&l.addEventListener(N.ib,a.Qa);J&&J.type===N.ib&&(void 0===P&&(P=J.detail),cb(l,J.type,P))}const h=f.detail,n=pa.j,l=h.element,g=h.Ra.canvas;let r;const q=jb(f.currentTarget,a.fa);let F;if(q){for(F=0;F<q.data.length;F++){r=q.data[F];const J=Od(h.element,r.handles,g,28);if(J)return l.removeEventListener(N.ea,
a.ma||d),l.removeEventListener(N.ka,a.Fa||c),a.Qa&&l.removeEventListener(N.ib,a.Qa),r.active=!0,mc(f,a.fa,r,J,k),f.stopImmediatePropagation(),f.preventDefault(),void f.stopPropagation()}if(a.za)for(F=0;F<q.data.length;F++)if(r=q.data[F],a.za(h.element,r,g))return l.removeEventListener(N.ea,a.ma||d),l.removeEventListener(N.ka,a.Fa||c),a.Qa&&l.removeEventListener(N.ib,a.Qa),sc(f,r,0,a.fa,!0,k),f.stopImmediatePropagation(),f.preventDefault(),void f.stopPropagation()}}const e={enable:function(f){f.removeEventListener(pa.j.da.qa,
a.Ja);f.removeEventListener(N.ea,a.ma||d);f.removeEventListener(N.rb,a.gb||b);f.removeEventListener(N.ka,a.Fa||c);f.addEventListener(pa.j.da.qa,a.Ja);a.Hc&&f.removeEventListener(N.xc,a.Hc);a.Qa&&f.removeEventListener(N.ib,a.Qa);pa.j.A(f)},disable:function(f){f.removeEventListener(pa.j.da.qa,a.Ja);f.removeEventListener(N.ea,a.ma||d);f.removeEventListener(N.rb,a.gb||b);f.removeEventListener(N.ka,a.Fa||c);a.Hc&&f.removeEventListener(N.xc,a.Hc);a.Qa&&f.removeEventListener(N.ib,a.Qa);pa.j.A(f)},ia:function(f){f.removeEventListener(pa.j.da.qa,
a.Ja);f.removeEventListener(N.ea,a.ma||d);f.removeEventListener(N.rb,a.gb||b);f.removeEventListener(N.ka,a.Fa||c);f.addEventListener(pa.j.da.qa,a.Ja);f.addEventListener(N.ea,a.ma||d);f.addEventListener(N.rb,a.gb||b);f.addEventListener(N.ka,a.Fa||c);a.Hc&&(f.removeEventListener(N.xc,a.Hc),f.addEventListener(N.xc,a.Hc));a.Qa&&(f.removeEventListener(N.ib,a.Qa),f.addEventListener(N.ib,a.Qa));pa.j.A(f)},W:function(f){const k=N.Fd;cb(f,k,{fa:a.fa,type:k});f.removeEventListener(pa.j.da.qa,a.Ja);f.removeEventListener(N.ea,
a.ma||d);f.removeEventListener(N.rb,a.gb||b);f.removeEventListener(N.ka,a.Fa||c);f.addEventListener(pa.j.da.qa,a.Ja);f.addEventListener(N.ea,a.ma||d);a.Hc&&f.removeEventListener(N.xc,a.Hc);a.Qa&&f.removeEventListener(N.ib,a.Qa);pa.j.A(f)},ma:a.ma||d,gb:a.gb||b,Fa:a.Fa||c};return a.za&&(e.za=a.za),a.Hc&&(e.Hc=a.Hc),a.Qa&&(e.Qa=a.Qa),a.ac&&(e.ac=a.ac),e}function Na(a,b){this.Va=void 0!==a?a:new sa(1,0,0);this.lc=void 0!==b?b:0}function Ha(a,b,c,d,e,f,k,h,n,l,g,r,q,F,J,P){const S=this.elements=new Float32Array(16);
S[0]=void 0!==a?a:1;S[4]=b||0;S[8]=c||0;S[12]=d||0;S[1]=e||0;S[5]=void 0!==f?f:1;S[9]=k||0;S[13]=h||0;S[2]=n||0;S[6]=l||0;S[10]=void 0!==g?g:1;S[14]=r||0;S[3]=q||0;S[7]=F||0;S[11]=J||0;S[15]=void 0!==P?P:1}function sa(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0}function $a(a,b,c,d){let e=Qa();const f=a.Oa();a.stats.nf=Qa()-e;const k=f.length,h=a.minPixelValue;let n,l=0,g=0;if(e=Qa(),n=c instanceof Pd.sj?c.Table:c,0>h)for(;g<k;)c=b[f[g++]+-h],c=n[c],d[l++]=c[0],d[l++]=c[1],d[l++]=c[2],d[l++]=c[3];else for(;g<
k;)c=b[f[g++]],c=n[c],d[l++]=c[0],d[l++]=c[1],d[l++]=c[2],d[l++]=c[3];a.stats.qf=Qa()-e}function La(a,b,c){let d=Qa();const e=a.Oa();a.stats.nf=Qa()-d;const f=e.length,k=a.minPixelValue;let h,n=0,l=0;if(d=Qa(),h=b instanceof Pd.sj?b.Table:b,0>k)for(;l<f;)b=h[e[l++]+-k],c[n++]=b[0],c[n++]=b[1],c[n++]=b[2],c[n++]=b[3];else for(;l<f;)b=h[e[l++]],c[n++]=b[0],c[n++]=b[1],c[n++]=b[2],c[n++]=b[3];a.stats.qf=Qa()-d}var Ra;function eb(a,b=!1){a.Eg=!0;b&&(a.nd=!0)}function bb(a,b,c){return c?function(d){const e=
d.qc[0],f=d.qc[d.qc.length-1],k=d.Xh+d.qc.length;return h=>h<d.Xh?e:h>=k?f:d.qc[h]}(c):function(d,e){return f=>f*d+e}(a,b)}function rb(a,b,c){return c?function(d){const e=Math.max(...d.qc).toString(2).length-8,f=d.qc[0]>>e,k=d.qc[d.qc.length-1]>>e,h=d.Xh+d.qc.length-1;return function(n){return n<d.Xh?f:n>=h?k:d.qc[n-d.Xh]>>e}}(c):function(d,e){return function(f){return 255*((f-e)/d+.5)}}(a,b)}function ob(a,b,c,d,e,f){const k=a.maxPixelValue,h=a.minPixelValue,n=Math.min(h,0);void 0===a.ja&&(a.ja={},
a.ja.Ag=new Uint8ClampedArray(k-n+1));const l=a.ja.Ag;a=bb(a.slope,a.intercept,e);b=rb(b,c,f);if(!0===d)for(d=h;d<=k;d++)l[d+-n]=255-b(a(d));else for(d=h;d<=k;d++)l[d+-n]=b(a(d));return l}function db(a,b){if(null==a)throw Error(b);}function gb(a,b=null){return db(a,"getImageSize: parameter image must not be undefined"),db(a.width,"getImageSize: parameter image must have width"),db(a.height,"getImageSize: parameter image must have height"),null!=b&&0!==b&&180!==b?{height:a.width,width:a.height}:{width:a.width,
height:a.height}}function pb(a,b,c=null){db(a,"getImageScale: parameter windowSize must not be undefined");db(b,"getImageScale: parameter image must not be undefined");c=gb(b,c);var d=b.rowPixelSpacing||1;const e=b.columnPixelSpacing||1;let f=1;b=1;d<e?b=e/d:f=d/e;d=a.height/c.height/f;a=a.width/c.width/b;return{TC:d,kA:a,Po:Math.min(a,d)}}function Fb(a,b){if(void 0===a)throw Error("getDefaultViewport: parameter canvas must not be undefined");return void 0===b?{scale:1,$:{x:0,y:0},B:{windowWidth:void 0,
windowCenter:void 0},invert:!1,Kc:!1,rotation:0,md:!1,wd:!1,rc:void 0,Ub:void 0,bb:void 0,fi:!1,P:{Gb:{x:1,y:1},lb:{x:1,y:1},rowPixelSpacing:1,columnPixelSpacing:1,Rk:"NONE"}}:{scale:pb(a,b,0).Po,$:{x:0,y:0},B:{windowWidth:b.windowWidth,windowCenter:b.windowCenter},invert:b.invert,Kc:!1,rotation:0,md:!1,wd:!1,rc:b.rc,Ub:b.Ub,bb:b.bb,fi:!!b.fi,P:{Gb:{x:1,y:1},lb:{x:b.columns,y:b.rows},rowPixelSpacing:void 0===b.rowPixelSpacing?1:b.rowPixelSpacing,columnPixelSpacing:void 0===b.columnPixelSpacing?1:
b.columnPixelSpacing,Rk:"NONE"}}}function kc(a){var b;(b=window.requestAnimationFrame(a)||window.webkitRequestAnimationFrame(a)||window.mozRequestAnimationFrame(a)||window.oRequestAnimationFrame(a)||window.msRequestAnimationFrame(a))||(window.setTimeout(a,1E3/60),b=void 0);return b}function Qa(){return window.performance?performance.now():Date.now()}function Pb(a,b,c){let d=Qa();const e=a.Oa();a.stats.nf=Qa()-d;const f=e.length,k=a.minPixelValue;let h=3,n=0;if(d=Qa(),e instanceof Int16Array)if(0>
k)for(;n<f;)c[h]=b[e[n++]+-k],h+=4;else for(;n<f;)c[h]=b[e[n++]],h+=4;else if(e instanceof Uint16Array)for(;n<f;)c[h]=b[e[n++]],h+=4;else if(0>k)for(;n<f;)c[h]=b[e[n++]+-k],h+=4;else for(;n<f;)c[h]=b[e[n++]],h+=4;a.stats.qf=Qa()-d}function yc(a,b,c){let d=Qa();const e=a.Oa();a.stats.nf=Qa()-d;const f=a.minPixelValue;let k=0,h=0;const n=e.length;if(d=Qa(),0>f)for(;h<n;)c[k++]=b[e[h++]+-f],c[k++]=b[e[h++]+-f],c[k]=b[e[h]+-f],h+=2,k+=2;else for(;h<n;)c[k++]=b[e[h++]],c[k++]=b[e[h++]],c[k]=b[e[h]],h+=
2,k+=2;a.stats.qf=Qa()-d}function Lc(a,b){let c=0,d=a.length-1;for(;c<=d;){const e=c+Math.floor((d-c)/2),f=a[e];if(f===b)return e;b<f?d=e-1:c=e+1}return c}function hc(a,b,c){let d;const e=[],f=[],k=[],h=[];c=null===c?1:c;for(d=0;d<b.length;d++){var n=b[d];e.push((a-1)*n[0]);f.push(n[1]);k.push(n[1])}n=function(l,g,r){g=(1-l)/((r=null===r?100:r)-1);const q=[];for(;0<r--;)q.push(l),l+=g;return q[q.length-1]=1,q}(0,0,a);for(d=0;d<a;d++)n[d]=(a-1)*Math.pow(n[d],c);c=function(l,g){let r;const q=[],F=g.length;
l.sort(function(J,P){return J-P});for(r=0;r<F;r++)q[r]=Lc(l,g[r]);return q}(e,n);for(d=1;d<a-1;d++){const l=c[d];h[d]=(n[d]-e[l-1])/(e[l]-e[l-1])*(f[l]-k[l-1])+k[l-1]}return h[0]=k[0],h[a-1]=f[b.length-1],h}function vb(a,b){let c=me[a];return c||=me[a]=b||{name:"",Ha:[]},!c.Ha&&c.Fb&&(c.Ha=function(d,e,f){const k=[];f=null===f?1:f;const h=hc(e=null===e?256:e,d.red,f),n=hc(e,d.green,f);f=hc(e,d.blue,f);for(d=0;d<e;d++)k.push([Math.round(255*h[d]),Math.round(255*n[d]),Math.round(255*f[d]),255]);return k}(c.Fb,
c.pb,c.gamma)),{getId:()=>a,Tz:()=>c.name,VB(d){c.name=d},dA:()=>c.Ha.length,iw(d){for(;c.Ha.length<d;)c.Ha.push(jg);c.Ha.length=d},kn(d){return this.di(d)?c.Ha[d]:jg},Sz(d){const e=c.Ha.length;return d=e?d%e:0,this.kn(d)},setColor(d,e){this.di(d)&&(c.Ha[d]=e)},uy(d){c.Ha.push(d)},yA(d,e){this.di(d)&&c.Ha.splice(d,1,e)},wB(d){this.di(d)&&c.Ha.splice(d,1)},Qy(){c.Ha=[]},Ms(d){if(d){var e=c.Ha.length;d.jw(e);for(let f=0;f<e;f++)d.mw(f,c.Ha[f])}},Yj(){const d=new kg;return this.Ms(d),d},di:d=>0<=d&&
d<c.Ha.length}}function Bb(a,b,c){let d=Qa();const e=a.Oa();a.stats.nf=Qa()-d;const f=e.length,k=a.minPixelValue;let h,n=0,l=0;if(d=Qa(),e instanceof Int16Array)if(0>k)for(;l<f;)h=b[e[l++]+-k],c[n++]=h,c[n++]=h,c[n++]=h,c[n++]=255;else for(;l<f;)h=b[e[l++]],c[n++]=h,c[n++]=h,c[n++]=h,c[n++]=255;else if(e instanceof Uint16Array)for(;l<f;)h=b[e[l++]],c[n++]=h,c[n++]=h,c[n++]=h,c[n++]=255;else if(0>k)for(;l<f;)h=b[e[l++]+-k],c[n++]=h,c[n++]=h,c[n++]=h,c[n++]=255;else for(;l<f;)h=b[e[l++]],c[n++]=h,c[n++]=
h,c[n++]=h,c[n++]=255;a.stats.qf=Qa()-d}function Yb(a,b){const c=new Af;c.translate(a.canvas.width/2,a.canvas.height/2);const d=a.viewport.rotation;0!==d&&c.rotate(d*Math.PI/180);let e=a.viewport.scale,f=a.viewport.scale;const k=a.viewport.P.lb.x-(a.viewport.P.Gb.x-1),h=a.viewport.P.lb.y-(a.viewport.P.Gb.y-1);if("NONE"===a.viewport.P.Rk)a.image.rowPixelSpacing<a.image.columnPixelSpacing?e*=a.image.columnPixelSpacing/a.image.rowPixelSpacing:a.image.columnPixelSpacing<a.image.rowPixelSpacing&&(f*=a.image.rowPixelSpacing/
a.image.columnPixelSpacing);else if(e=a.viewport.P.columnPixelSpacing,f=a.viewport.P.rowPixelSpacing,"SCALE TO FIT"===a.viewport.P.Rk)e=f=Math.min(a.canvas.width/(k*e),a.canvas.height/(h*f)),a.viewport.P.rowPixelSpacing<a.viewport.P.columnPixelSpacing?e*=a.viewport.P.columnPixelSpacing/a.viewport.P.rowPixelSpacing:a.viewport.P.columnPixelSpacing<a.viewport.P.rowPixelSpacing&&(f*=a.viewport.P.rowPixelSpacing/a.viewport.P.columnPixelSpacing);return c.scale(e,f),0!==d&&c.rotate(-d*Math.PI/180),c.translate(a.viewport.$.x,
a.viewport.$.y),0!==d&&c.rotate(d*Math.PI/180),void 0!==b&&c.scale(b,b),a.viewport.md&&c.scale(-1,1),a.viewport.wd&&c.scale(1,-1),c.translate(-k/2,-h/2),c}function Kb(a,b,c){if(void 0===a)throw Error("setToPixelCoordinateSystem: parameter enabledElement must not be undefined");if(void 0===b)throw Error("setToPixelCoordinateSystem: parameter context must not be undefined");a=Yb(a,c);b.setTransform(a.l[0],a.l[1],a.l[2],a.l[3],a.l[4],a.l[5])}function Rb(a,b){const c=a.F.vc;c.width=b.width;c.height=b.height;
const d=c.getContext("2d");d.fillStyle="white";d.fillRect(0,0,c.width,c.height);b=d.getImageData(0,0,b.width,b.height);a.F.Bi=d;a.F.Ci=b}function wb(a){const b=a.viewport,c=a.image.color,d=a.image.quality;return a.F.Gu=a.image.X,a.F.Hu=d,a.F.Un=c,a.F.Iu={windowCenter:b.B.windowCenter,windowWidth:b.B.windowWidth,invert:b.invert,rotation:b.rotation,md:b.md,wd:b.wd,rc:b.rc,Ub:b.Ub,bb:b.bb},a.F}function ic(a,b){const c=a.F.Iu,d=a.F.Hu;return b.X!==a.F.Gu||b.quality!==d||!c||c.windowCenter!==a.viewport.B.windowCenter||
c.windowWidth!==a.viewport.B.windowWidth||c.invert!==a.viewport.invert||c.rotation!==a.viewport.rotation||c.md!==a.viewport.md||c.wd!==a.viewport.wd||c.rc!==a.viewport.rc||c.Ub!==a.viewport.Ub||c.bb!==a.viewport.bb}function H(a,b,c){a.F.vc||(a.F.vc=document.createElement("canvas"));const d=a.F.vc;var e=a.viewport.bb||a.options.bb;if(a.options.bb&&console.warn("enabledElement.options.colormap is deprecated. Use enabledElement.viewport.colormap instead"),e&&"string"==typeof e&&(e=Pd.ln(e)),!e)throw Error("renderLabelMapImage: colormap not found.");
const f=e.getId();if(!1===ic(a,b)&&!0!==c&&a.F.Sd===f)return d;d.width===b.width&&d.height===b.height||Rb(a,b);let k=Qa();a.F.kg&&!c&&a.F.Sd===f||(a.F.kg=e.Yj(),a.F.Sd=f);b.stats=b.stats||{};b.stats.hi=Qa()-k;c=a.F.Ci;e=a.F.Bi;return La(b,a.F.kg,c.data),k=Qa(),e.putImageData(c,0,0),b.stats.ii=Qa()-k,d}function Z(a,b){if(void 0===a)throw Error("renderLabelMapImage: enabledElement parameter must not be undefined");var c=a.image;if(void 0===c)throw Error("renderLabelMapImage: image must be loaded before it can be drawn");
const d=a.canvas.getContext("2d");d.setTransform(1,0,0,1,0,0);d.fillStyle="black";d.fillRect(0,0,a.canvas.width,a.canvas.height);d.imageSmoothingEnabled=!a.viewport.Kc;d.rd=d.imageSmoothingEnabled;Kb(a,d);b=H(a,c,b);c=a.viewport.P.Gb.x-1;const e=a.viewport.P.Gb.y-1,f=a.viewport.P.lb.x-c,k=a.viewport.P.lb.y-e;d.drawImage(b,c,e,f,k,0,0,f,k);a.F=wb(a)}function ja(a,b){return!a&&!b||!(!a||!b)&&a.id===b.id}function ra(a,b,c){if(void 0===a.ja||a.ja.windowCenter!==b.B.windowCenter||a.ja.windowWidth!==b.B.windowWidth||
!ja(a.ja.rc,b.rc)||!ja(a.ja.Ub,b.Ub)||a.ja.invert!==b.invert||!0===c){if(!(b.Ub&&b.Ub.qc&&0<b.Ub.qc.length||void 0!==b.B.windowWidth&&void 0!==b.B.windowCenter)){var d=a.maxPixelValue*a.slope+a.intercept,e=a.minPixelValue*a.slope+a.intercept;c=d-e;d=(d+e)/2;void 0===b.B?b.B={windowWidth:c,windowCenter:d}:(b.B.windowWidth=c,b.B.windowCenter=d)}ob(a,b.B.windowWidth,b.B.windowCenter,b.invert,b.rc,b.Ub);a.ja.windowWidth=b.B.windowWidth;a.ja.windowCenter=b.B.windowCenter;a.ja.invert=b.invert;a.ja.Ub=b.Ub;
a.ja.rc=b.rc}return a.ja.Ag}function Ja(a,b,c){a.F.vc||(a.F.vc=document.createElement("canvas"));const d=a.F.vc;var e=a.viewport.bb||a.options.bb;if(a.options.bb&&console.warn("enabledElement.options.colormap is deprecated. Use enabledElement.viewport.colormap instead"),e&&"string"==typeof e&&(e=Pd.ln(e)),!e)throw Error("renderPseudoColorImage: colormap not found.");var f=e.getId();if(!1===ic(a,b)&&!0!==c&&a.F.Sd===f)return d;d.width===b.width&&d.height===b.height||Rb(a,b);let k=Qa();a.F.kg&&!c&&
a.F.Sd===f||(e.iw(256),a.F.kg=e.Yj(),a.F.Sd=f);c=ra(b,a.viewport,c);b.stats=b.stats||{};b.stats.hi=Qa()-k;e=a.F.Ci;f=a.F.Bi;return $a(b,c,a.F.kg,e.data),k=Qa(),f.putImageData(e,0,0),b.stats.ii=Qa()-k,d}function Ua(a,b){if(void 0===a)throw Error("drawImage: enabledElement parameter must not be undefined");var c=a.image;if(void 0===c)throw Error("drawImage: image must be loaded before it can be drawn");const d=a.canvas.getContext("2d");d.setTransform(1,0,0,1,0,0);d.fillStyle="black";d.fillRect(0,0,
a.canvas.width,a.canvas.height);d.imageSmoothingEnabled=!a.viewport.Kc;d.rd=d.imageSmoothingEnabled;Kb(a,d);b=Ja(a,c,b);c=a.viewport.P.Gb.x-1;const e=a.viewport.P.Gb.y-1,f=a.viewport.P.lb.x-c,k=a.viewport.P.lb.y-e;d.drawImage(b,c,e,f,k,0,0,f,k);a.F=wb(a)}function Ta(a,b,c=null){let d;return"function"==typeof window.CustomEvent?d=new CustomEvent(b,{detail:c,cancelable:!0}):(d=document.createEvent("CustomEvent"),d.initCustomEvent(b,!0,!0,c)),a.dispatchEvent(d)}function Wa(){if(!(td<=Me)){for(Nc.sort(function(a,
b){return a.timeStamp>b.timeStamp?-1:a.timeStamp<b.timeStamp?1:0});td>Me;){const a=Nc[Nc.length-1];td-=a.sizeInBytes;delete ud[a.X];Nc.pop();Ta(nc,yb.Ar,{X:a.X})}Ta(nc,yb.zr,{Pu:Me,Ns:td,dv:Nc.length})}}function Ib(a,b,c){c=a.createShader(c);(a.shaderSource(c,b),a.compileShader(c),a.getShaderParameter(c,a.COMPILE_STATUS)||a.isContextLost())||console.error(`Could not compile shader:\n${a.getShaderInfoLog(c)}`);return c}function xc(a,b,c){b=Ib(a,b,a.VERTEX_SHADER);c=Ib(a,c,a.FRAGMENT_SHADER);const d=
a.createProgram();(a.attachShader(d,b),a.attachShader(d,c),a.linkProgram(d),a.getProgramParameter(d,a.LINK_STATUS)||a.isContextLost())||console.error(`WebGL program filed to link:\n${a.getProgramInfoLog(d)}`);return d}function Jb(){!0!==Ne&&function(a){Ia=null;try{const b={preserveDrawingBuffer:!0};Ia=a.getContext("webgl",b)||a.getContext("experimental-webgl",b);a.removeEventListener("webglcontextlost",Wb,!1);a.addEventListener("webglcontextlost",Wb,!1);a.removeEventListener("webglcontextrestored",
gc,!1);a.addEventListener("webglcontextrestored",gc,!1)}catch(b){throw Error("Error creating WebGL context");}return Ia||(console.error("Unable to initialize WebGL. Your browser may not support it."),Ia=null),Ia}(ne)&&(Bf=Ia.createBuffer(),Ia.bindBuffer(Ia.ARRAY_BUFFER,Bf),Ia.bufferData(Ia.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0]),Ia.STATIC_DRAW),Cf=Ia.createBuffer(),Ia.bindBuffer(Ia.ARRAY_BUFFER,Cf),Ia.bufferData(Ia.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0]),Ia.STATIC_DRAW),function(){for(const a in oe){const b=
oe[a];b.attributes={};b.Nw={};b.Uw="attribute vec2 a_position;attribute vec2 a_texCoord;uniform vec2 u_resolution;varying vec2 v_texCoord;void main() {vec2 zeroToOne = a_position / u_resolution;vec2 zeroToTwo = zeroToOne * 2.0;vec2 clipSpace = zeroToTwo - 1.0;gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);v_texCoord = a_texCoord;}";b.Kg=xc(Ia,b.Uw,b.qg);b.attributes.gp=Ia.getAttribLocation(b.Kg,"a_texCoord");Ia.enableVertexAttribArray(b.attributes.gp);b.attributes.wo=Ia.getAttribLocation(b.Kg,
"a_position");Ia.enableVertexAttribArray(b.attributes.wo);b.Nw.JB=Ia.getUniformLocation(b.Kg,"u_resolution")}}(),Ne=!0)}function Wb(a){a.preventDefault();console.warn("WebGL Context Lost!")}function gc(a){a.preventDefault();Ne=!1;Oe.Bo();Jb()}function jc(a){if(a.color)return"rgb";a=a.Oa();return a instanceof Int16Array?"int16":a instanceof Uint16Array?"uint16":a instanceof Int8Array?"int8":"uint8"}function fd(a,b,c){var d=!0===a.F.Un;a.F.vc&&d||(a.F.vc=document.createElement("canvas"));d=a.F.vc;if(255===
a.viewport.B.windowWidth&&128===a.viewport.B.windowCenter&&!1===a.viewport.invert&&b.jn&&b.jn())return b.jn();if(!1===ic(a,b)&&!0!==c)return d;d.width===b.width&&d.height===b.height||Rb(a,b);c=Qa();const e=function(k,h){if(void 0===k.ja||k.ja.windowCenter!==h.B.windowCenter||k.ja.windowWidth!==h.B.windowWidth||k.ja.invert!==h.invert){var n=h.B.windowWidth,l=h.B.windowCenter,g=h.invert;const r=k.maxPixelValue,q=k.minPixelValue,F=Math.min(q,0);void 0===k.ja&&(k.ja={},k.ja.Ag=new Uint8ClampedArray(r-
F+1));const J=k.ja.Ag;n=rb(n,l,void 0);if(!0===g)for(g=q;g<=r;g++)J[g+-F]=255-n(g*k.slope+k.intercept);else for(g=q;g<=r;g++)J[g+-F]=n(g*k.slope+k.intercept);k.ja.windowWidth=h.B.windowWidth;k.ja.windowCenter=h.B.windowCenter;k.ja.invert=h.invert}return k.ja.Ag}(b,a.viewport);b.stats=b.stats||{};b.stats.hi=Qa()-c;const f=a.F.Ci;a=a.F.Bi;return b.Ii?function(k,h,n){let l=Qa();const g=k.Oa();k.stats.nf=Qa()-l;const r=k.minPixelValue;let q=0,F=0;const J=g.length;if(l=Qa(),0>r)for(;F<J;)n[q++]=h[g[F++]+
-r],n[q++]=h[g[F++]+-r],n[q++]=h[g[F++]+-r],n[q++]=g[F++];else for(;F<J;)n[q++]=h[g[F++]],n[q++]=h[g[F++]],n[q++]=h[g[F++]],n[q++]=g[F++];k.stats.qf=Qa()-l}(b,e,f.data):yc(b,e,f.data),c=Qa(),a.putImageData(f,0,0),b.stats.ii=Qa()-c,d}function Eb(a,b){if(void 0===a)throw Error("renderColorImage: enabledElement parameter must not be undefined");var c=a.image;if(void 0===c)throw Error("renderColorImage: image must be loaded before it can be drawn");const d=a.canvas.getContext("2d");d.setTransform(1,0,
0,1,0,0);d.fillStyle="black";d.fillRect(0,0,a.canvas.width,a.canvas.height);d.imageSmoothingEnabled=!a.viewport.Kc;d.rd=d.imageSmoothingEnabled;Kb(a,d);b=a.options&&a.options.xb&&"webgl"===a.options.xb.toLowerCase()?pe.xb.render(a):fd(a,c,b);c=a.viewport.P.Gb.x-1;const e=a.viewport.P.Gb.y-1,f=a.viewport.P.lb.x-c,k=a.viewport.P.lb.y-e;d.drawImage(b,c,e,f,k,0,0,f,k);a.F=wb(a)}function Za(a,b,c,d=!0){var e=!0===a.F.Un;a.F.vc&&!e||(a.F.vc=document.createElement("canvas"),Rb(a,b));e=a.F.vc;if(!1===ic(a,
b)&&!0!==c)return e;e.width===b.width&&e.height===b.height||Rb(a,b);let f=Qa();c=ra(b,a.viewport,c);b.stats=b.stats||{};b.stats.hi=Qa()-f;const k=a.F.Ci;a=a.F.Bi;return d?Pb(b,c,k.data):Bb(b,c,k.data),f=Qa(),a.putImageData(k,0,0),b.stats.ii=Qa()-f,e}function tb(a,b){if(void 0===a)throw Error("drawImage: enabledElement parameter must not be undefined");var c=a.image;if(void 0===c)throw Error("drawImage: image must be loaded before it can be drawn");const d=a.canvas.getContext("2d");d.setTransform(1,
0,0,1,0,0);d.fillStyle="black";d.fillRect(0,0,a.canvas.width,a.canvas.height);d.imageSmoothingEnabled=!a.viewport.Kc;d.rd=d.imageSmoothingEnabled;Kb(a,d);b=a.options&&a.options.xb&&"webgl"===a.options.xb.toLowerCase()?pe.xb.render(a):Za(a,c,b);c=a.viewport.P.Gb.x-1;const e=a.viewport.P.Gb.y-1,f=a.viewport.P.lb.x-c,k=a.viewport.P.lb.y-e;d.drawImage(b,c,e,f,k,0,0,f,k);a.F=wb(a)}function Xb(a,b){if(void 0===a)throw Error("renderWebImage: enabledElement parameter must not be undefined");const c=a.image;
if(void 0===c)throw Error("renderWebImage: image must be loaded before it can be drawn");if(a.viewport.B.windowWidth===a.image.windowWidth&&a.viewport.B.windowCenter===a.image.windowCenter&&!1===a.viewport.invert){b=a.canvas.getContext("2d");b.setTransform(1,0,0,1,0,0);b.fillStyle="black";b.fillRect(0,0,a.canvas.width,a.canvas.height);b.imageSmoothingEnabled=!a.viewport.Kc;b.rd=b.imageSmoothingEnabled;Kb(a,b);const d=a.viewport.P.Gb.x-1,e=a.viewport.P.Gb.y-1,f=a.viewport.P.lb.x-d;a=a.viewport.P.lb.y-
e;b.drawImage(c.tg(),d,e,f,a,0,0,f,a)}else Eb(a,b)}function ub(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function Va(a){if(void 0===a)throw Error("getEnabledElement: parameter element must not be undefined");for(let b=0;b<gd.length;b++)if(gd[b].element===a)return gd[b];throw Error("element not enabled");}function ab(a){if(void 0===a)throw Error("getEnabledElement: enabledElement element must not be undefined");gd.push(a)}function vd(a){const b=[];return gd.forEach(function(c){c.image&&
c.image.X===a&&b.push(c)}),b}function Zb(a,b=!1){a=Va(a);if(void 0===a.image&&!a.nb.length)throw Error("updateImage: image has not been loaded yet");eb(a,b)}function $b(a,b,c){Ta(b.element,a,{viewport:b.viewport,element:b.element,image:b.image,Ic:b,od:c})}function zc(a,b){if(a.od===b.od)throw Error("rescaleImage: both arguments represent the same layer");const c=a.image,d=b.image;c.X&&d.X&&(b.viewport.scale=b.viewport.scale/a.viewport.scale*a.viewport.scale*(b.viewport.P.columnPixelSpacing*d.width/
(a.viewport.P.columnPixelSpacing*c.width)))}function sb(a,b){return Va(a).nb.find(c=>c.od===b)}function Ac(a){return Va(a).nb}function Qd(a){return Va(a).nb.filter(b=>b.options&&!1!==b.options.visible&&0!==b.options.opacity)}function wd(a,b){const c=Va(a);if(c.Eh!==b){var d=c.nb.findIndex(e=>e.od===b);if(-1===d)throw Error("setActiveLayer: layer not found in layers array");d=c.nb[d];if(!d.image)throw Error("setActiveLayer: layer with undefined image cannot be set as active.");c.Eh=b;c.image=d.image;
c.viewport=d.viewport;Zb(a);$b(yb.vp,c,b)}}function qe(a,b,c){const d=Va(a),e=d.nb[0];let f;if(f=c?sb(a,c):Rd(a),!f)throw Error("setLayerImage: Layer not found");(f.image=b,b)?f.viewport||(a=Fb(d.canvas,b),f.options&&f.options.viewport&&(f.viewport=Object.assign(a,f.options.viewport)),e.od!==c&&zc(e,f)):f.viewport=void 0}function Rd(a){const b=Va(a);return b.nb.find(c=>c.od===b.Eh)}function xd(a){const b=a.Gf||{};b.po=a.viewport.scale;a.Gf=b}function ac(a,b){const c=a.image,d=a.element;var e=a.nb||
[];if(a.canvas&&(a.image||e.length)){var f=Qa();(c.stats={nf:-1,qf:-1,ii:-1,Fu:-1,hi:-1},e&&e.length)?!function(k,h){var n=k.element,l=Ac(n);const g=Rd(n);n=Qd(n);const r=!k.Vn&&k.Ti;k.Vn=k.Ti;r&&l.forEach(function(q){q.viewport&&xd(q)});!0===k.Ti&&function(q,F){q.forEach(J=>{if(J!==F&&J.viewport&&F.viewport){J.Gf||xd(J);var P=(X=J,(S=F).Gf||xd(S),X.Gf||xd(X),X.Gf.po/S.Gf.po),S,X;J.viewport.scale=F.viewport.scale*P;J.viewport.rotation=F.viewport.rotation;J.viewport.$={x:F.viewport.$.x/P,y:F.viewport.$.y/
P};J.viewport.md=F.viewport.md;J.viewport.wd=F.viewport.wd}})}(n,g);l=k.canvas.getContext("2d");l.setTransform(1,0,0,1,0,0);l.fillStyle="black";l.fillRect(0,0,k.canvas.width,k.canvas.height);(function(q,F,J){F.forEach((P,S)=>{if(P.image){q.save();P.canvas=q.canvas;Kb(P,q);var X=P.viewport.bb||P.options.bb,oa=P.viewport.fi,ta=P.nd||J;X&&""!==X&&!0===oa?function(qa,Ma){if(void 0===qa)throw Error("addLabelMapLayer: layer parameter must not be undefined");const Oa=qa.image;if(void 0===Oa)throw Error("addLabelMapLayer: image must be loaded before it can be drawn");
qa.canvas=H(qa,Oa,Ma);Ma=qa.canvas.getContext("2d");Ma.imageSmoothingEnabled=!qa.viewport.Kc;Ma.rd=Ma.imageSmoothingEnabled;qa.F=wb(qa)}(P,ta):X&&""!==X?function(qa,Ma){if(void 0===qa)throw Error("addPseudoColorLayer: layer parameter must not be undefined");const Oa=qa.image;if(void 0===Oa)throw Error("addPseudoColorLayer: image must be loaded before it can be drawn");qa.canvas=Ja(qa,Oa,Ma);Ma=qa.canvas.getContext("2d");Ma.imageSmoothingEnabled=!qa.viewport.Kc;Ma.rd=Ma.imageSmoothingEnabled;qa.F=
wb(qa)}(P,ta):!0===P.image.color?function(qa,Ma){if(void 0===qa)throw Error("addColorLayer: layer parameter must not be undefined");const Oa=qa.image;if(void 0===Oa)throw Error("addColorLayer: image must be loaded before it can be drawn");Oa.Ii=!0;qa.canvas=fd(qa,Oa,Ma);Ma=qa.canvas.getContext("2d");Ma.imageSmoothingEnabled=!qa.viewport.Kc;Ma.rd=Ma.imageSmoothingEnabled;qa.F=wb(qa)}(P,ta):function(qa,Ma,Oa=!1){if(void 0===qa)throw Error("addGrayscaleLayer: layer parameter must not be undefined");
const Ka=qa.image;if(void 0===Ka)throw Error("addGrayscaleLayer: image must be loaded before it can be drawn");qa.canvas=Za(qa,Ka,Ma,Oa);Ma=qa.canvas.getContext("2d");Ma.imageSmoothingEnabled=!qa.viewport.Kc;Ma.rd=Ma.imageSmoothingEnabled;qa.F=wb(qa)}(P,ta,0===S);P.options&&P.options.opacity?q.globalAlpha=P.options.opacity:q.globalAlpha=1;P.options&&P.options.fillStyle&&(q.fillStyle=P.options.fillStyle);q.imageSmoothingEnabled=!P.viewport.Kc;q.rd=q.imageSmoothingEnabled;S=P.viewport.P.Gb.x-1;X=P.viewport.P.Gb.y-
1;oa=P.viewport.P.lb.x-S;ta=P.viewport.P.lb.y-X;q.drawImage(P.canvas,S,X,oa,ta,0,0,oa,ta);q.restore();P.nd=!1}})})(l,n,h)}(a,b):c&&((e=c.render)||(e=a.viewport.bb&&""!==a.viewport.bb&&!0===a.image.fi?Z:a.viewport.bb&&""!==a.viewport.bb?Ua:c.color?Eb:tb),e(a,b));b=Qa()-f;f={viewport:a.viewport,element:d,image:c,Ic:a,ze:a.canvas.getContext("2d"),FB:b};c.stats.Fu=b;a.nd=!1;a.Eg=!1;Ta(d,yb.qa,f)}}function yd(a){return pe.xb.Bu()?(pe.xb.su(),a.xb="webgl",!0):(console.error("WebGL not available, falling back to Canvas renderer"),
delete a.xb,!1)}function re(a,b,c=null,d=null){if(void 0===a)throw Error("renderToCanvas: parameter canvas cannot be undefined");d&&d.xb&&"webgl"===d.xb.toLowerCase()&&yd(d);const e=Fb(a,b);c&&Object.assign(e,c);a={element:a,canvas:a,image:b,nd:!0,Eg:!0,options:d,nb:[],data:{},F:{},viewport:e};Ta(a.element,yb.Nl,{Ic:a,timestamp:Date.now()});ac(a,a.nd)}function Oc(a){const b=Va(a);b.viewport.scale=pb(b.canvas,b.image,b.viewport.rotation).Po;b.viewport.$.x=0;b.viewport.$.y=0;Zb(a)}function tc(a,b){const c=
Va(a),d=c.canvas.width,e=c.canvas.height;!function(f,k){k.width!==f.clientWidth&&(k.width=f.clientWidth,k.style.width=`${f.clientWidth}px`);k.height!==f.clientHeight&&(k.height=f.clientHeight,k.style.height=`${f.clientHeight}px`)}(a,c.canvas);Ta(a,yb.Ip,{element:a});void 0!==c.image&&(b||function(f,k,h){var n=f.viewport.scale,l=gb(f.image,f.viewport.rotation);const g=Math.round(l.width*n);n=Math.round(l.height*n);l=f.viewport.$.x;f=f.viewport.$.y;return g===k&&n<=h||g<=k&&n===h&&0===l&&0===f}(c,d,
e)?Oc(a):(c.viewport.scale=Math.sqrt(c.canvas.width/d*(c.canvas.height/e))*c.viewport.scale,Zb(a)))}function Pe(){let a=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(a+=performance.now()),"x.x.x.x.x.x.xxxx.xxx.x.x.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[xy]/g,function(b){const c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"===b?c:3&c|8).toString(16)})}function se(a){var b;(b=a.querySelector("canvas.quantant-canvas"))||(b=document.createElement("canvas"),
b=(b.style.display="block",b.classList.add("quantant-canvas"),a.appendChild(b),b));return b}function Qe(a,b,c,d,e){if(void 0===a)throw Error("getStoredPixels: parameter element must not be undefined");b=Math.round(b);c=Math.round(c);a=Va(a);const f=[];let k=0;const h=a.image.Oa();for(let n=0;n<e;n++)for(let l=0;l<d;l++){const g=(n+c)*a.image.columns+(l+b);f[k++]=h[g]}return f}function Ab(){if(!(Sd<=Re)){for(oc.sort(function(b,c){return b.timeStamp>c.timeStamp?-1:b.timeStamp<c.timeStamp?1:0});Sd>Re;){var a=
oc[oc.length-1].X;te(a);Ta(nc,yb.dr,{X:a})}a=Se();Ta(nc,yb.br,a)}}function Td(a,b){if(void 0===a)throw Error("putImageLoadObject: imageId must not be undefined");if(void 0===b.promise)throw Error("putImageLoadObject: imageLoadObject.promise must not be undefined");if(!0===Zc.hasOwnProperty(a))throw Error("putImageLoadObject: imageId already in cache");if(b.Gm&&"function"!=typeof b.Gm)throw Error("putImageLoadObject: imageLoadObject.cancelFn must be a function");const c={loaded:!1,X:a,Vo:void 0,yk:b,
timeStamp:Date.now(),sizeInBytes:0};Zc[a]=c;oc.push(c);b.promise.then(function(d){if(-1!==oc.indexOf(c)){if(c.loaded=!0,c.image=d,void 0===d.sizeInBytes)throw Error("putImageLoadObject: image.sizeInBytes must not be undefined");if(void 0===d.sizeInBytes.toFixed)throw Error("putImageLoadObject: image.sizeInBytes is not a number");c.sizeInBytes=d.sizeInBytes;Sd+=c.sizeInBytes;Ta(nc,yb.oj,{action:"addImage",image:c});c.Vo=d.Vo;Ab()}},()=>{oc.splice(oc.indexOf(Zc[a]),1);delete Zc[a]})}function uc(a){if(void 0===
a)throw Error("getImageLoadObject: imageId must not be undefined");a=Zc[a];if(void 0!==a)return a.timeStamp=Date.now(),a.yk}function te(a){if(void 0===a)throw Error("removeImageLoadObject: imageId must not be undefined");const b=Zc[a];if(void 0===b)throw Error("removeImageLoadObject: imageId was not present in imageCache");oc.splice(oc.indexOf(b),1);Sd-=b.sizeInBytes;var c;Ta(nc,yb.oj,{action:"deleteImage",image:b});(c=b.yk).promise.then(function(){c.bk&&c.bk()},function(){c.bk&&c.bk()});delete Zc[a]}
function Se(){return{Pu:Re,Ns:Sd,dv:oc.length}}function Pc(a,b,c){a=a[b.substring(0,b.indexOf(":"))];if(null==a){if(void 0!==Te)return Te(b);throw Error("loadImageFromImageLoader: no image loader for imageId");}c=a(b,c);return c.promise.then(function(d){Ta(nc,yb.er,{image:d})},function(d){Ta(nc,yb.fr,{X:b,error:d})}),c}function Ud(a,b){if(a.color&&!a.ik)throw Error("Color transforms are not implemented yet");var c=a.minPixelValue;let d=0,e=0;const f=a.width*a.height,k=a.vi||a.Oa(),h=new Uint8Array(4*
f);let n;if(a.color=!0,a.ik=!0,a.vi=k,b instanceof Pd.sj)for(b.Is();e<f;)n=k[e++],c=b.Zn(n),h[d++]=c[0],h[d++]=c[1],h[d++]=c[2],h[d++]=c[3];else if(0>c)for(;e<f;)n=k[e++],h[d++]=b[n+-c][0],h[d++]=b[n+-c][1],h[d++]=b[n+-c][2],h[d++]=b[n+-c][3];else for(;e<f;)n=k[e++],h[d++]=b[n][0],h[d++]=b[n][1],h[d++]=b[n][2],h[d++]=b[n][3];a.Ii=!0;a.ja=void 0;a.render=void 0;a.slope=1;a.intercept=0;a.minPixelValue=0;a.maxPixelValue=255;a.windowWidth=255;a.windowCenter=128;a.Oa=()=>h}function Vd(a){return!(!a.restore||
"function"!=typeof a.restore||(a.restore(),0))}function Ue(a,b){if(a.color&&!a.ik)throw Error("Color transforms are not implemented yet");const c=(b=function(e){return e&&"string"==typeof e&&(e=vb(e)),e}(b)).getId();if(a.Sd===c)return!1;if(Vd(a),c){var d=a.minPixelValue||0;const e=a.maxPixelValue||255;a.restore=function(f){if(f.restore)return f.restore;const k=f.color,h=f.Ii,n=f.ja,l=f.slope,g=f.windowWidth,r=f.windowCenter,q=f.minPixelValue,F=f.maxPixelValue;return function(){if(f.color=k,f.Ii=h,
f.ja=n,f.slope=l,f.windowWidth=g,f.windowCenter=r,f.minPixelValue=q,f.maxPixelValue=F,f.vi){const J=f.vi;f.Oa=()=>J}f.vi=void 0;f.Sd=void 0;f.ik=void 0}}(a);b=b.Yj();b.lw(d,e);Ud(a,b);d=function(f){let k=Number.MAX_VALUE,h=Number.MIN_VALUE;const n=f.length;let l;for(let g=0;g<n;g++)l=f[g],k=k<l?k:l,h=h>l?h:l;return{minPixelValue:k,maxPixelValue:h}}(a.Oa());a.minPixelValue=d.minPixelValue;a.maxPixelValue=d.maxPixelValue;a.windowWidth=255;a.windowCenter=128;a.Sd=c}return!0}function zd(a,b,c){return a<
b?b:a>c?c:a}function Ad(a){return"number"==typeof a?a?0>a?-1:1:a==a?0:NaN:NaN}function ue(a,b){var c=a.x-b.x;a=a.y-b.y;return c*c+a*a}function Ve(a,b){return{x:a.x-b.x,y:a.y-b.y}}function We(a,b){return Math.sqrt(Wd(a,b))}function Wd(a,b){a=Ve(a,b);return a.x*a.x+a.y*a.y}function Xd(a){return{S:{x:a.left,y:a.top},J:{x:a.left+a.width,y:a.top+a.height}}}function Bc(a){return{page:pa.H.R.cb(a.page),image:pa.H.R.cb(a.image),client:pa.H.R.cb(a.client),canvas:pa.H.R.cb(a.canvas)}}function cb(a,b,c=null){let d;
return"function"==typeof window.CustomEvent?d=new CustomEvent(b,{detail:c,cancelable:!0}):(d=document.createEvent("CustomEvent"),d.initCustomEvent(b,!0,!0,c)),a.dispatchEvent(d)}function hd(a){return"number"!=typeof a.buttons?a.which:0===a.buttons?0:1==a.buttons%2?1:2==a.buttons%4?3:4==a.buttons%8?2:0}function id(){Df=!1}function Yd(a){const b=pa.j,c=a.currentTarget,d=b.Ia(c);if(d.image){var e=N.zc,f={page:pa.H.R.ec(a),image:b.Ka(c,a.pageX,a.pageY),client:{x:a.clientX,y:a.clientY}};f.canvas=b.Z(c,
f.image);var k=Bc(f);cb(c,e,{event:a,which:a.which,viewport:b.va(c),image:d.image,element:c,Ra:f,pf:k,currentPoints:f,Na:{x:0,y:0},type:e})}}function ve(a){function b(g){const r=N.wa,q={page:pa.H.R.ec(g),image:c.Ka(d,g.pageX,g.pageY),client:{x:g.clientX,y:g.clientY}};q.canvas=c.Z(d,q.image);var F={page:pa.H.R.Sa(q.page,h.page),image:pa.H.R.Sa(q.image,h.image),client:pa.H.R.Sa(q.client,h.client),canvas:pa.H.R.Sa(q.canvas,h.canvas)};F={which:l,viewport:c.va(d),image:e.image,element:d,Ra:k,pf:h,currentPoints:q,
Na:F,type:r,ctrlKey:g.ctrlKey,metaKey:g.metaKey,shiftKey:g.shiftKey};cb(F.element,r,F);h=Bc(q);g.preventDefault();g.stopPropagation()}const c=pa.j,d=a.currentTarget,e=c.Ia(d);if(e.image){lg=setTimeout(id,200);var f=N.hb;d.removeEventListener("mousemove",Bd);var k={page:pa.H.R.ec(a),image:c.Ka(d,a.pageX,a.pageY),client:{x:a.clientX,y:a.clientY}};k.canvas=c.Z(d,k.image);var h=Bc(k),n={event:a,which:hd(a),viewport:c.va(d),image:e.image,element:d,Ra:k,pf:h,currentPoints:k,Na:{x:0,y:0},type:f};cb(n.element,
f,n)&&(n.type=N.Ta,cb(n.element,N.Ta,n));var l=hd(a);d.addEventListener("mousemove",b);d.addEventListener("mouseup",function q(r){clearTimeout(lg);let F=N.$a;Df&&(F=N.Za);const J={page:pa.H.R.ec(r),image:c.Ka(d,r.pageX,r.pageY),client:{x:r.clientX,y:r.clientY}};J.canvas=c.Z(d,J.image);const P={page:pa.H.R.Sa(J.page,h.page),image:pa.H.R.Sa(J.image,h.image),client:pa.H.R.Sa(J.client,h.client),canvas:pa.H.R.Sa(J.canvas,h.canvas)};r={event:r,which:l,viewport:c.va(d),image:e.image,element:d,Ra:k,pf:h,
currentPoints:J,Na:P,type:F};cb(r.element,F,r);d.removeEventListener("mousemove",b);d.removeEventListener("mouseup",q);d.addEventListener("mousemove",Bd);Df=!0})}}function Bd(a){const b=pa.j,c=a.currentTarget,d=b.Ia(c);if(d.image){var e=N.Ba,f={page:pa.H.R.ec(a),image:b.Ka(c,a.pageX,a.pageY),client:{x:a.clientX,y:a.clientY}};f.canvas=b.Z(c,f.image);var k=Bc(f);a={page:pa.H.R.ec(a),image:b.Ka(c,a.pageX,a.pageY),client:{x:a.clientX,y:a.clientY}};a.canvas=b.Z(c,a.image);var h={page:pa.H.R.Sa(a.page,
k.page),image:pa.H.R.Sa(a.image,k.image),client:pa.H.R.Sa(a.client,k.client),canvas:pa.H.R.Sa(a.canvas,k.canvas)};cb(c,e,{viewport:b.va(c),image:d.image,element:c,Ra:f,pf:k,currentPoints:a,Na:h,type:e});Bc(a)}}function Zd(a){a.removeEventListener("mousedown",ve);a.removeEventListener("mousemove",Bd);a.removeEventListener("dblclick",Yd)}function we(a){let b={};return{disable(c){c.removeEventListener(pa.j.da.qa,a)},enable(c){c.removeEventListener(pa.j.da.qa,a);c.addEventListener(pa.j.da.qa,a);pa.j.A(c)},
getConfiguration:()=>b,setConfiguration(c){b=c}}}function jd(a,b){return void 0!==a?a:b}function pc(a){a=a.getContext("2d");return a.setTransform(1,0,0,1,0,0),a}function Cc(a,b){a.save();b(a);a.restore()}function $d(a,b,c){const d=b.color,e=b.lineWidth,f=b.fillStyle;b=b.Ku;a.beginPath();a.strokeStyle=d||a.strokeStyle;a.lineWidth=e||void 0===e&&ae.ug()||a.lineWidth;b&&a.setLineDash(b);c(a);f&&(a.fillStyle=f,a.fill());a.stroke();b&&a.setLineDash([])}function xe(a,b){b.tw&&(a.shadowColor=jd(b.shadowColor,
"#000000"),a.shadowBlur=jd(b.shadowBlur,0),a.shadowOffsetX=jd(b.shadowOffsetX,1),a.shadowOffsetY=jd(b.shadowOffsetY,1))}function $c(a,b,c,d,e,f="pixel"){$d(a,e,k=>{if("pixel"===f){const h=pa.j;c=h.Z(b,c);d=h.Z(b,d)}k.moveTo(c.x,c.y);k.lineTo(d.x,d.y)})}function Dc(a,b,c,d,e="pixel"){$d(a,d,f=>{c.forEach(k=>{let h=k.start;k=k.end;if("pixel"===e){const n=pa.j;h=n.Z(b,h);k=n.Z(b,k)}f.moveTo(h.x,h.y);f.lineTo(k.x,k.y)})})}function Xe(a,b,c,d,e,f="pixel"){$d(a,e,k=>{if("pixel"===f){const h=pa.j;c=h.Z(b,
c);d=d.map(n=>h.Z(b,n))}k.moveTo(c.x,c.y);d.forEach(({x:h,y:n})=>{k.lineTo(h,n)})})}function kd(a,b,c){a.fillStyle=c;a.fillRect(b.left,b.top,b.width,b.height)}function ye(a,b,c,d,e){a={left:0,top:0,width:b.width,height:b.height};d*=Math.min(1E3,b.width);b=e*Math.min(1E3,b.height);return a={left:a.left+d,top:a.top+b,width:a.width-2*d,height:a.height-2*b},{S:{x:a.left,y:a.top},J:{x:a.left+a.width,y:a.top+a.height}}}function Ye(a){var b=a.detail;a=pc(b.ze.canvas);var c=b.image,d=b.viewport;b=pa.j.xa.get("imagePlaneModule",
c.X,c);var e,f;if(b?(e=b.rowPixelSpacing||b.Hv,f=b.columnPixelSpacing||b.Vs):(e=c.rowPixelSpacing,f=c.columnPixelSpacing),e&&f){b={width:a.canvas.width,height:a.canvas.height};var k=c.width;c=c.height;e=10/e*d.scale;f=10/f*d.scale;d=ye(0,b,0,.25,.05);var h=ye(0,b,0,.05,.15);if(b.width&&b.height&&k&&c&&d&&h){b=Ze.getConfiguration();var n=Object.assign({},{lu:d,Ww:h,pl:e,vk:f,fo:12.5,Yn:25,ge:{start:{x:h.J.x,y:h.S.y},end:{x:h.J.x,y:h.J.y}},Vd:{start:{x:d.S.x,y:d.J.y},end:{x:d.J.x,y:d.J.y}}},b),l={color:n.color,
lineWidth:n.lineWidth},g=function(q){let F=0;const J=[];for(;q.ge.start.y+F*q.pl<=q.Ww.J.y;){const P={x:q.ge.start.x,y:q.ge.start.y+F*q.pl},S={x:0,y:q.ge.start.y+F*q.pl};S.x=0==F%5?q.ge.start.x-q.Yn:q.ge.start.x-q.fo;J.push({start:P,end:S});F++}return J}(n),r=function(q){let F=0;const J=[];for(;q.Vd.start.x+F*q.vk<=q.lu.J.x;){const P={x:q.Vd.start.x+F*q.vk,y:q.Vd.start.y},S={x:q.Vd.start.x+F*q.vk,y:0};S.y=0==F%5?q.Vd.start.y-q.Yn:q.Vd.start.y-q.fo;J.push({start:P,end:S});F++}return J}(n);Cc(a,q=>
{q.shadowColor=n.shadowColor;q.shadowBlur=n.shadowBlur;$c(q,void 0,n.ge.start,n.ge.end,l,"canvas");$c(q,void 0,n.Vd.start,n.Vd.end,l,"canvas");Dc(q,void 0,g,l,"canvas");Dc(q,void 0,r,l,"canvas")})}}}function $e(a){const b=pa.j,c=a.currentTarget,d=b.Ia(c);if(d.image&&("mousewheel"!==a.type||0!==a.wheelDeltaY)&&("DOMMouseScroll"!==a.type||1!==a.axis)){var e,f;a.preventDefault();void 0!==a.pageX&&void 0!==a.pageY?(e=a.pageX,f=a.pageY):(e=a.x,f=a.y);var k=b.Ka(c,e,f),h=0>((a=window.event&&window.event.wheelDelta?
window.event:a).wheelDelta?a.wheelDelta:a.deltaY?-a.deltaY:a.detail?-a.detail:a.wheelDelta)?-1:1;a={element:c,viewport:b.va(c),image:d.image,direction:h,pageX:e,pageY:f,qA:k.x,rA:k.y};cb(c,N.Ue,a)}}function af(a){mg.forEach(b=>{a.removeEventListener(b,$e)})}function Cd(a,b){const c=Date.now();if(a!==ng){if(2E3>=c-og)return b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation(),!1;ng=a}og=c}function ze(a,b,c){const d=c?pg:qg;b.forEach(function(e){a.addEventListener(e,d)})}function bf(a,
b,c){const d=c?pg:qg;b.forEach(function(e){a.removeEventListener(e,d)})}function cf(a){bf(a,rg,0);bf(a,sg,1)}function Ub(a,b){return Ec[a]?(a=Ec[a].find(c=>c.element===b))?a.options:{}:{}}function Qc(a,b,c){if(!Ec[a])return void(Ec[a]=[{element:b,options:c}]);const d=Ec[a].findIndex(e=>e.element===b);-1===d?Ec[a].push({element:b,options:c}):Ec[a][d].options=Object.assign(Ec[a][d].options||{},c)}function bc(a){const b=pa.j,c=a.currentTarget||a.srcEvent.currentTarget,d=b.Ia(c);if(d.image){switch(a.preventDefault(),
(a.pointers&&1<a.pointers.length||a.touches&&1<a.touches.length)&&(Fc=!1,clearTimeout(Gc)),a.type){case "tap":Fc=!1;clearTimeout(Gc);ib={page:pa.H.R.ec(a.pointers[0]),image:b.Ka(c,a.pointers[0].pageX,a.pointers[0].pageY),client:{x:a.pointers[0].clientX,y:a.pointers[0].clientY}};ib.canvas=b.Z(c,ib.image);var e=N.ka;Gb={event:a,viewport:b.va(c),image:d.image,element:c,currentPoints:ib,type:e,Uc:!0};cb(c,e,Gb);break;case "doubletap":Fc=!1;clearTimeout(Gc);ib={page:pa.H.R.ec(a.pointers[0]),image:b.Ka(c,
a.pointers[0].pageX,a.pointers[0].pageY),client:{x:a.pointers[0].clientX,y:a.pointers[0].clientY}};ib.canvas=b.Z(c,ib.image);e=N.xc;Gb={event:a,viewport:b.va(c),image:d.image,element:c,currentPoints:ib,type:e,Uc:!0};cb(c,e,Gb);break;case "pinchstart":Fc=!1;clearTimeout(Gc);Dd=1;break;case "pinchmove":if(Fc=!1,clearTimeout(Gc),!0===Ef){Dd=a.scale;Ef=!1;break}var f=(a.scale-Dd)/Dd;Mb={page:a.center,image:b.Ka(c,a.center.x,a.center.y)};Mb.canvas=b.Z(c,Mb.image);e=N.$b;Gb={event:a,Ra:Mb,viewport:b.va(c),
image:d.image,element:c,direction:1>a.scale?1:-1,Sv:f,type:e,Uc:!0};cb(c,e,Gb);Dd=a.scale;break;case "touchstart":Dd=1;clearTimeout(Gc);clearTimeout(tg);tg=setTimeout(function(){Mb={page:pa.H.R.ec(a.touches[0]),image:b.Ka(c,a.touches[0].pageX,a.touches[0].pageY),client:{x:a.touches[0].clientX,y:a.touches[0].clientY}};Mb.canvas=b.Z(c,Mb.image);e=N.ea;1<a.touches.length&&(e=N.Ml);Gb={event:a,viewport:b.va(c),image:d.image,element:c,Ra:Mb,currentPoints:Mb,type:e,Uc:!0};!0===cb(c,e,Gb)&&(e=N.rb,1<a.touches.length&&
(e=N.pr),Gb.type=e,cb(c,e,Gb));Hb=Bc(Mb)},50);Fc=!0;Ff=0;Gc=setTimeout(function(){Fc&&(ib={page:pa.H.R.ec(a.touches[0]),image:b.Ka(c,a.touches[0].pageX,a.touches[0].pageY),client:{x:a.touches[0].clientX,y:a.touches[0].clientY}},ib.canvas=b.Z(c,Mb.image),e=N.ib,Gb={event:a,viewport:b.va(c),image:d.image,element:c,currentPoints:ib,type:e,Uc:!0},cb(c,e,Gb))},700);break;case "touchend":Dd=1;Fc=!1;clearTimeout(Gc);setTimeout(function(){Mb={page:pa.H.R.ec(a.changedTouches[0]),image:b.Ka(c,a.changedTouches[0].pageX,
a.changedTouches[0].pageY),client:{x:a.changedTouches[0].clientX,y:a.changedTouches[0].clientY}};Mb.canvas=b.Z(c,Mb.image);e=N.Kb;Gb={event:a,viewport:b.va(c),image:d.image,element:c,Ra:Mb,currentPoints:Mb,type:e,Uc:!0};cb(c,e,Gb)},50);break;case "panmove":f=a.deltaX-df.x;var k=a.deltaY-df.y;df={x:a.deltaX,y:a.deltaY};ib={page:{x:Hb.page.x+f,y:Hb.page.y+k},image:b.Ka(c,Hb.page.x+f,Hb.page.y+k),client:{x:Hb.client.x+f,y:Hb.client.y+k}};ib.canvas=b.Z(c,ib.image);ld={page:pa.H.R.Sa(ib.page,Hb.page),
image:pa.H.R.Sa(ib.image,Hb.image),client:pa.H.R.Sa(ib.client,Hb.client),canvas:pa.H.R.Sa(ib.canvas,Hb.canvas)};Ff+=Math.sqrt(ld.page.x*ld.page.x+ld.page.y*ld.page.y);5<Ff&&(Fc=!1,clearTimeout(Gc));e=N.Zb;1<a.pointers.length&&(e=N.Ll);Gb={viewport:b.va(c),image:d.image,element:c,Ra:Mb,pf:Hb,currentPoints:ib,Na:ld,cv:a.pointers.length,type:e,Uc:!0};cb(c,e,Gb);Hb=Bc(ib);break;case "panstart":df={x:a.deltaX,y:a.deltaY};ib={page:pa.H.R.ec(a.pointers[0]),image:b.Ka(c,a.pointers[0].pageX,a.pointers[0].pageY),
client:{x:a.pointers[0].clientX,y:a.pointers[0].clientY}};ib.canvas=b.Z(c,ib.image);Hb=Bc(ib);break;case "panend":if(Fc=!1,clearTimeout(Gc),!Hb)break;ib={page:pa.H.R.ec(a.pointers[0]),image:b.Ka(c,a.pointers[0].pageX,a.pointers[0].pageY),client:{x:a.pointers[0].clientX,y:a.pointers[0].clientY}};ib.canvas=b.Z(c,ib.image);ld={page:pa.H.R.Sa(ib.page,Hb.page),image:pa.H.R.Sa(ib.image,Hb.image),client:pa.H.R.Sa(ib.client,Hb.client),canvas:pa.H.R.Sa(ib.canvas,Hb.canvas)};e=N.We;Gb={event:a.srcEvent,viewport:b.va(c),
image:d.image,element:c,Ra:Mb,pf:Hb,currentPoints:ib,Na:ld,type:e,Uc:!0};cb(c,e,Gb);f=a.pointers.length-a.changedPointers.length;2===f&&(Ef=!0);break;case "rotatemove":Fc=!1,clearTimeout(Gc),f=a.rotation-ug,ug=a.rotation,e=N.wr,Gb={event:a.srcEvent,viewport:b.va(c),image:d.image,element:c,rotation:f,type:e},cb(c,e,Gb)}return!1}}function Ed(a){vg.disable(a);["touchstart","touchend"].forEach(c=>{a.removeEventListener(c,bc)});const b=Ub("touchInput",a).hu;b&&b.off("tap doubletap panstart panmove panend pinchstart pinchmove rotatemove",
bc)}function md(a,b){if(!b)throw Error("simpleMouseButtonTool: toolType is required");let c={};return{ia(d,e,f={}){f.sc=e;Qc(b,d,f);d.removeEventListener(N.Ta,a);d.addEventListener(N.Ta,a)},disable(d){d.removeEventListener(N.Ta,a)},enable(d){d.removeEventListener(N.Ta,a)},W(d){d.removeEventListener(N.Ta,a)},getConfiguration:()=>c,setConfiguration(d){c=d}}}function Qb(a,b){return 0!=(b&1<<a-1)}function be(a){return{ia(b){b.removeEventListener(N.Ue,a);b.addEventListener(N.Ue,a)},disable(b){b.removeEventListener(N.Ue,
a)},enable(b){b.removeEventListener(N.Ue,a)},W(b){b.removeEventListener(N.Ue,a)}}}function ad(a,b,c){const d=[N.Zb];return c&&!0===c.Jt&&d.push(N.ea),{ia(e){c&&c.an&&Qc(b,e,c.an);d.forEach(f=>{e.removeEventListener(f,a);e.addEventListener(f,a)});c&&c.Mj&&c.Mj(e);c&&c.ma&&e.addEventListener(N.ea,c.ma);c&&c.Pe&&e.addEventListener(N.Kb,c.Pe)},disable(e){d.forEach(f=>{e.removeEventListener(f,a)});c&&c.ek&&c.ek(e);c&&c.ma&&e.removeEventListener(N.ea,c.ma);c&&c.Pe&&e.removeEventListener(N.Kb,c.Pe)},enable(e){d.forEach(f=>
{e.removeEventListener(f,a)});c&&c.gk&&c.gk(e);c&&c.ma&&e.removeEventListener(N.ea,c.ma);c&&c.Pe&&e.removeEventListener(N.Kb,c.Pe)},W(e){d.forEach(f=>{e.removeEventListener(f,a)});c&&c.ak&&c.ak(e);c&&c.ma&&e.removeEventListener(N.ea,c.ma);c&&c.Pe&&e.removeEventListener(N.Kb,c.Pe)}}}function cc(a,b){a.x=Math.min(Math.max(0,a.x),b.width);a.y=Math.min(Math.max(0,a.y),b.height)}function bd(a,b){const c=cd.getConfiguration();b=Math.pow(1.7,Math.log(a.scale)/Math.log(1.7)+b);return c.uf&&b>c.uf?a.scale=
c.uf:c.wf&&b<c.wf?a.scale=c.wf:a.scale=b,a}function Fd(a,b){if(b.md&&(a.x*=-1),b.wd&&(a.y*=-1),0!==b.rotation){var c=b.rotation*Math.PI/180;b=Math.cos(c);c=Math.sin(c);const d=a.x*c+a.y*b;a.x=a.x*b-a.y*c;a.y=d}return a}function Ae(a,b){const c=pa.j,d=a.element;b=bd(a.viewport,b);c.Wa(d,b);const e=c.Ka(d,a.Ra.page.x,a.Ra.page.y);a={x:a.Ra.image.x-e.x,y:a.Ra.image.y-e.y};a=Fd(a,b);b.$.x-=a.x;b.$.y-=a.y;c.Wa(d,b)}function Nb(a){a=a.detail.element;a.removeEventListener(N.wa,ce);a.removeEventListener(N.$a,
Nb);a.removeEventListener(N.Za,Nb)}function ce(a){const b=a.detail;if(!b.Na.page.y)return!1;let c=b.Na.page.y/100;const d=cd.getConfiguration();d&&d.invert&&(c*=-1);cd.qb(b,c);a.preventDefault();a.stopPropagation()}function vc(a){a=a.detail.element;a.removeEventListener(N.wa,de);a.removeEventListener(N.$a,vc);a.removeEventListener(N.Za,vc)}function de(a){const b=a.detail;let c=b.viewport.scale,d=b.viewport.scale;const e=b.image.columnPixelSpacing||1,f=b.image.rowPixelSpacing||1;f<e?c*=e/f:e<f&&(d*=
f/e);b.viewport.$.x+=b.Na.page.x/c;b.viewport.$.y+=b.Na.page.y/d;pa.j.Wa(b.element,b.viewport);a.preventDefault();a.stopPropagation()}function ee(a){a=a.detail.element;a.removeEventListener(N.wa,Rc);a.removeEventListener(N.$a,ee);a.removeEventListener(N.Za,ee)}function fe(a){const b=(a.image.maxPixelValue*a.image.slope+a.image.intercept-(a.image.minPixelValue*a.image.slope+a.image.intercept))/1024,c=a.Na.page.y*b;a.viewport.B.windowWidth+=a.Na.page.x*b;a.viewport.B.windowCenter+=c;a.element.Du=!1}
function Rc(a){a=a.detail;Be.qb(a);pa.j.Wa(a.element,a.viewport)}function Mc(a,b){if(a.boundingBox)return pa.H.R.Pn(b,a.boundingBox)}function Od(a,b,c,d){let e;if(b)return Object.keys(b).forEach(function(f){f=b[f];if(f.hasOwnProperty("pointNearHandle")){if(f.jB(a,f,c))return void(e=f)}else if(!0===f.hasBoundingBox){if(Mc(f,c))return void(e=f)}else{const k=pa.j.Z(a,f);if(pa.H.R.distance(k,c)<=d)return void(e=f)}}),e}function Gf(a,b,c,d){d||=6;const e=function(f){let k;return Object.keys(f).forEach(function(h){h=
f[h];!0!==h.active||(k=h)}),k}(b);a=Od(a,b,c,d);return e!==a&&(void 0!==a&&(a.active=!0),void 0!==e&&(e.active=!1),!0)}function ef(a,b,c,d,e,f){function k(r){r=r.detail;!1===d.hasMoved&&(d.hasMoved=!0);d.active=!0;d.x=r.currentPoints.image.x+g.x;d.y=r.currentPoints.image.y+g.y;f&&cc(d,r.image);n.A(l);cb(l,N.Te,{fa:b,element:l,Xd:c})}function h(){d.active=!1;l.removeEventListener(N.wa,k);l.removeEventListener(N.$a,h);l.removeEventListener(N.Za,h);n.A(l);"function"==typeof e&&e()}const n=pa.j,l=a.element,
g={x:d.x-a.currentPoints.image.x,y:d.y-a.currentPoints.image.y};l.addEventListener(N.wa,k);l.addEventListener(N.$a,h);l.addEventListener(N.Za,h)}function ge(a,b,c,d,e,f){function k(F){F=F.detail;d.active=!0;d.x=F.currentPoints.image.x;d.y=F.currentPoints.image.y;f&&cc(d,F.image);r.A(q);cb(q,N.Te,{fa:b,element:q,Xd:c})}function h(F){q.removeEventListener(N.Ba,h);q.removeEventListener(N.wa,h);q.addEventListener(N.Ba,k);q.addEventListener(N.wa,k);q.addEventListener(N.Za,g);F.type===N.wa&&q.addEventListener(N.$a,
g)}function n(F){F.detail.Xd===c&&g()}function l(F){F.detail.fa===b&&(q.removeEventListener(N.Ba,k),q.removeEventListener(N.wa,k),q.removeEventListener(N.Za,g),q.removeEventListener(N.$a,g),q.removeEventListener(N.eh,n),q.removeEventListener(N.Fd,l),d.active=!1,r.A(q))}function g(){q.removeEventListener(N.Ba,k);q.removeEventListener(N.wa,k);q.removeEventListener(N.Za,g);q.removeEventListener(N.$a,g);q.removeEventListener(N.eh,n);q.removeEventListener(N.Fd,l);d.active=!1;r.A(q);"function"==typeof e&&
e()}const r=pa.j,q=a.element;q.addEventListener(N.wa,h);q.addEventListener(N.Ba,h);q.addEventListener(N.eh,n);q.addEventListener(N.Fd,l)}function Tb(a,b){a=a.image;const c={left:0,top:0,width:a.width,height:a.height};let d=!1;return Object.keys(b).forEach(function(e){e=b[e];!0!==e.allowedOutsideImage&&!1===pa.H.R.Pn(e,c)&&(d=!0)}),d}function Ce(a){return(a=a.quantantseries)?a.rh.pj:null}function Sc(a){const b=pa.j.Ia(a);return void 0===b.il&&(b.il=Ce(a)),b.il}function lc(a,b,c){Sc(a).add(a,b,c);cb(a,
N.nr,{fa:b,element:a,Xd:c})}function jb(a,b){return Sc(a).get(a,b)}function kb(a,b,c){const d=Sc(a).get(a,b);let e=-1;for(let f=0;f<d.data.length;f++)d.data[f]===c&&(e=f);-1!==e&&(d.data.splice(e,1),cb(a,N.eh,{fa:b,element:a,Xd:c}))}function dc(a,b){pa.j.Ia(a).il=b}function Hc(a,b,c,d,e,f){function k(g){const r=g.detail;b.active=!0;Object.keys(b.handles).forEach(function(q){q=b.handles[q];!0!==q.movesIndependently&&(q.x+=r.Na.image.x,q.y+=r.Na.image.y,e.Jg&&cc(q,r.image))});n.A(l);cb(l,N.Te,{fa:d,
element:l,Xd:b});g.preventDefault();g.stopPropagation()}function h(g){g=g.detail;b.invalidated=!0;l.removeEventListener(N.wa,k);l.removeEventListener(N.$a,h);l.removeEventListener(N.Za,h);!0===e.ut&&Tb(g,b.handles)&&kb(l,d,b);n.A(l);"function"==typeof f&&f()}const n=pa.j,l=a.detail.element;return l.addEventListener(N.wa,k),l.addEventListener(N.$a,h),l.addEventListener(N.Za,h),!0}function Gd(a){function b(r){const q=r.detail,F=Ub(f,q.element);Qb(q.which,F.sc)&&(a.ac?a.ac(q):function(J){const P=pa.j,
S=J.element,X=a.gd(J);X&&(lc(J.element,f,X),S.removeEventListener(N.Ba,k),S.removeEventListener(N.hb,h),S.removeEventListener(N.Ta,n),l&&S.removeEventListener(N.zc,l),P.A(S),(1===Object.keys(X.handles).length?ef:ge)(J,f,X,X.handles.end,function(){X.active=!1;X.invalidated=!0;Tb(J,X.handles)&&kb(S,f,X);S.addEventListener(N.Ba,k);S.addEventListener(N.hb,h);S.addEventListener(N.Ta,n);l&&S.addEventListener(N.zc,l);P.A(S);cb(S,N.dh,null)},!(!a.options||void 0===a.options.Jg)&&a.options.Jg))}(q),r.preventDefault(),
r.stopPropagation())}function c(r){r=r.detail;Dh.dw(r);const q=jb(r.element,f);if(q){var F=!1;for(let J=0;J<q.data.length;J++){const P=r.currentPoints.canvas,S=q.data[J];!0===Gf(r.element,S.handles,P)&&(F=!0);(a.za(r.element,S,P)&&!S.active||!a.za(r.element,S,P)&&S.active)&&(S.active=!S.active,F=!0)}!0===F&&pa.j.A(r.element)}}function d(r){function q(){J.invalidated=!0;Tb(F,J.handles)&&kb(P,f,J);pa.j.A(P);P.addEventListener(N.Ba,k)}const F=r.detail;let J;const P=F.element;var S=Ub(f,P);if(Qb(F.which,
S.sc)){S=F.Ra.canvas;var X=jb(r.currentTarget,f);if(X){var oa;var ta=!(!a.options||void 0===a.options.Jg)&&a.options.Jg;for(oa=0;oa<X.data.length;oa++){J=X.data[oa];const qa=Od(P,J.handles,S,6);if(qa)return P.removeEventListener(N.Ba,k),J.active=!0,ef(F,f,J,qa,q,ta),r.stopImmediatePropagation(),r.stopPropagation(),void r.preventDefault()}if(a.za)for(ta=a.options||{ut:!0,Jg:!1},oa=0;oa<X.data.length;oa++)if(J=X.data[oa],J.active=!1,a.za(P,J,S))return J.active=!0,P.removeEventListener(N.Ba,k),Hc(r,
J,0,f,ta,q),r.stopImmediatePropagation(),r.stopPropagation(),void r.preventDefault()}}}let e={};const f=a.fa,k=a.qd||c,h=a.yf||d,n=a.xf||b,l=a.pi,g={enable:function(r){r.removeEventListener(pa.j.da.qa,a.Ja);r.removeEventListener(N.Ba,k);r.removeEventListener(N.hb,h);r.removeEventListener(N.Ta,n);l&&r.removeEventListener(N.zc,l);r.addEventListener(pa.j.da.qa,a.Ja);pa.j.A(r)},disable:function(r){r.removeEventListener(pa.j.da.qa,a.Ja);r.removeEventListener(N.Ba,k);r.removeEventListener(N.hb,h);r.removeEventListener(N.Ta,
n);l&&r.removeEventListener(N.zc,l);pa.j.A(r)},ia:function(r,q){Qc(f,r,{sc:q});r.removeEventListener(pa.j.da.qa,a.Ja);r.removeEventListener(N.Ba,k);r.removeEventListener(N.hb,h);r.removeEventListener(N.Ta,n);r.addEventListener(pa.j.da.qa,a.Ja);r.addEventListener(N.Ba,k);r.addEventListener(N.hb,h);r.addEventListener(N.Ta,n);l&&(r.removeEventListener(N.zc,l),r.addEventListener(N.zc,l));pa.j.A(r)},W:function(r,q){Qc(f,r,{sc:q});const F=N.Fd;cb(r,F,{sc:q,fa:f,type:F});r.removeEventListener(pa.j.da.qa,
a.Ja);r.removeEventListener(N.Ba,k);r.removeEventListener(N.hb,h);r.removeEventListener(N.Ta,n);r.addEventListener(pa.j.da.qa,a.Ja);r.addEventListener(N.Ba,k);r.addEventListener(N.hb,h);l&&(r.removeEventListener(N.zc,l),r.addEventListener(N.zc,l));a.W&&a.W(r,q);pa.j.A(r)},getConfiguration:function(){return e},setConfiguration:function(r){e=r},yf:d,qd:c,xf:b};return a.za&&(g.za=a.za),l&&(g.pi=l),a.ac&&(g.ac=a.ac),g}function lb(a,b,c,d,e){if(c.value){a=pa.j;var f=Math.abs(b.y-e.y),k=f/10;if(1>f)return b.y=
e.y,void(c.value=!1);b.y>e.y?b.y-=k:b.y<e.y&&(b.y+=k);a.A(d.element);a.requestAnimationFrame(function(){lb(0,b,c,d,e)})}}function mc(a,b,c,d,e){function f(r){r=r.detail;ff.value=!1;!1===d.hasMoved&&(d.hasMoved=!0);d.active=!0;r=r.currentPoints;g=n.Ka(l,r.page.x,r.page.y+-57);d.x=g.x;d.y=g.y;n.A(l);cb(l,N.Te,{fa:b,element:l,Xd:c})}function k(r){const q=r.detail;ff.value=!1;d.active=!1;l.removeEventListener(N.Zb,f);wg.forEach(F=>{l.removeEventListener(F,k)});n.A(l);r.type===N.ib&&(q.Gn=c,d.x=h.currentPoints.image.x,
d.y=h.currentPoints.image.y);"function"==typeof e&&e(r)}ff.value=!1;const h=a.detail,n=pa.j,l=h.element;a=n.Ia(l);let g=n.Ka(l,h.currentPoints.page.x,h.currentPoints.page.y+-57);l.addEventListener(N.Zb,f);wg.forEach(r=>{l.addEventListener(r,k)});lb(0,d,ff,a,g)}function Yc(a,b,c,d,e,f){function k(J){J=J.detail;d.x=J.currentPoints.image.x+F.x;d.y=J.currentPoints.image.y+F.y;f&&cc(d,J.image);g.A(r);cb(r,N.Te,{fa:b,element:r,Xd:c})}function h(J){const P=J.detail;if(r.removeEventListener(N.Zb,k),r.removeEventListener(N.$b,
h),r.removeEventListener(N.Kb,h),r.removeEventListener(N.ka,h),r.removeEventListener(N.ea,n),r.removeEventListener(N.Fd,l),J.type===N.$b||J.type===N.ib)return d.active=!1,g.A(r),void e();d.active=!1;c.active=!1;d.x=P.currentPoints.image.x+F.x;d.y=P.currentPoints.image.y+F.y;f&&cc(d,P.image);g.A(r);"function"==typeof e&&e()}function n(J){return J.stopImmediatePropagation(),!1}function l(){r.removeEventListener(N.Zb,k);r.removeEventListener(N.$b,h);r.removeEventListener(N.Kb,h);r.removeEventListener(N.ka,
h);r.removeEventListener(N.ea,n);r.removeEventListener(N.Fd,l);d.active=!1;c.active=!1;d.x=a.currentPoints.image.x+F.x;d.y=a.currentPoints.image.y+F.y;f&&cc(d,a.image);g.A(r)}const g=pa.j,r=a.element,q=g.Ka(r,a.currentPoints.page.x,a.currentPoints.page.y+50),F={x:d.x-q.x,y:d.y-q.y};d.active=!0;c.active=!0;r.addEventListener(N.Zb,k);r.addEventListener(N.$b,h);r.addEventListener(N.Kb,h);r.addEventListener(N.ka,h);r.addEventListener(N.ea,n);r.addEventListener(N.Fd,l)}function sc(a,b,c,d,e,f){function k(g){const r=
g.detail;b.active=!0;Object.keys(b.handles).forEach(function(q){q=b.handles[q];!0!==q.movesIndependently&&(q.x+=r.Na.image.x,q.y+=r.Na.image.y)});l.A(n);cb(n,N.Te,{fa:d,element:n,Xd:b});g.preventDefault();g.stopPropagation()}function h(g){var r=g.detail;b.active=!1;b.invalidated=!1;n.removeEventListener(N.Zb,k);n.removeEventListener(N.$b,h);n.removeEventListener(N.ib,h);n.removeEventListener(N.Kb,h);n.removeEventListener(N.We,h);n.removeEventListener(N.ka,h);r=Tb(r,b.handles);!0===e&&!0===r&&kb(n,
d,b);l.A(n);"function"==typeof f&&f(g)}const n=a.detail.element,l=pa.j;return n.addEventListener(N.Zb,k),n.addEventListener(N.$b,h),n.addEventListener(N.ib,h),n.addEventListener(N.Kb,h),n.addEventListener(N.We,h),n.addEventListener(N.ka,h),!0}function Hf(a){Object.keys(a).forEach(function(b){a[b].active=!1})}function xb(a){if(a)for(let b=0;b<a.data.length;b++){const c=a.data[b];c.active=!1;c.handles&&Hf(c.handles)}}function Hd(a,b,c,d,e){Object.keys(c).forEach(function(f){f=c[f];!0===f.drawnIndependently||
e&&!0===e.fk&&!f.active||!function(k,h,n,l,g,r="pixel"){"pixel"===r&&(n=pa.j.Z(h,n));$d(k,g,q=>{q.arc(n.x,n.y,l,0,2*Math.PI)})}(a,b.element,f,function(k){let h;return h=k&&k.iu?k.iu:6,h}(e),{color:d,lineWidth:f.active?ae.Nt():ae.ug(),fillStyle:e&&e.fill})})}function Ic(a,b,c){const d=dd.mk(),e=a.font;d&&d!==e&&(a.font=d);b=a.measureText(b).width;return d&&d!==e&&(a.font=e),b+2*c}function Tc(a,b,c,d,e,f){"[object Array]"!==Object.prototype.toString.call(b)&&(b=[b]);const k=dd.sg(),h=dd.Ot();let n=
0;b.forEach(function(g){g=Ic(a,g,5);n=Math.max(n,g)});const l={width:n,height:5+b.length*(k+5)};return Cc(a,g=>{g.strokeStyle=e;f&&f.Hh&&!0===f.Hh.x&&(c-=l.width/2);f&&f.Hh&&!0===f.Hh.y&&(d-=l.height/2);l.left=c;l.top=d;kd(g,l,f&&!0===f.debug?"#FF0000":h);(function(r,q,F,J){const P=dd.sg();r.font=dd.mk();r.textBaseline="top";r.fillStyle=J;F.forEach(function(S,X){r.fillText(S,q.left+5,q.top+5+X*(P+5))})})(g,l,b,e)}),l}function De(a){return{visible:!0,active:!0,color:void 0,handles:{end:{x:a.currentPoints.image.x,
y:a.currentPoints.image.y,highlight:!0,active:!0}}}}function gf(a,b,c){if(!1===b.visible)return!1;a=pa.j.Z(a,b.handles.end);return 5>pa.H.R.distance(a,c)}function Uc(a){const b=a.detail;if(a=jb(a.currentTarget,"probe")){var c=pa.j,d=pc(b.ze.canvas),e=dd.sg(),f=xg.getConfiguration();for(let k=0;k<a.data.length;k++){const h=a.data[k];!1!==h.visible&&Cc(d,n=>{const l=Id.Zh(h);if(Hd(n,b,h.handles,l),!f||!f.rz){var g=Math.round(h.handles.end.x),r=Math.round(h.handles.end.y);if(0<=g&&0<=r&&g<b.image.columns&&
r<b.image.rows){if(b.image.color){var q=`${g}, ${r}`;var F=b.element;if(!F)throw Error("getRGBPixels: parameter element must not be undefined");g=Math.round(g);r=Math.round(r);F=pa.j.Ia(F);var J=[],P=0,S=F.image.Oa(),X,oa;if(F.image.color)for(X=0;1>X;X++)for(oa=0;1>oa;oa++){var ta=4*((X+r)*F.image.columns+(oa+g));var qa=S[ta];const Ma=S[ta+1],Oa=S[ta+2];ta=S[ta+3];J[P++]=qa;J[P++]=Ma;J[P++]=Oa;J[P++]=ta}F=J;r=`R: ${F[0]} G: ${F[1]} B: ${F[2]}`}else{F=c.$t(b.element,g,r,1,1);F=F[0];J=F*b.image.slope+
b.image.intercept;a:{X=b.image;oa=pa.j;P=oa.xa.get("patientStudyModule",X.X,X);S=oa.xa.get("generalSeriesModule",X.X,X);if(P&&S&&"PT"===S.modality&&(q=F*X.slope+X.intercept,P=P.eB)&&(X=oa.xa.get("petIsotopeModule",X.X,X))&&(qa=X.sB,X=qa.tB,oa=qa.rB,qa=qa.qB,S=S.OB,X&&oa&&qa&&S)){q=q*P/(oa*Math.exp(-(parseFloat(`.${S.Kt||0}`)+S.Tv+60*S.Tu+3600*S.ku-(parseFloat(`.${X.Kt}`)+X.Tv+60*X.Tu+3600*X.ku))*Math.log(2)/qa))*1E3;break a}q=void 0}P=q;q=`${g}, ${r}`;r=`SP: ${F} MO: ${parseFloat(J.toFixed(3))}`;
P&&(r+=` SUV: ${parseFloat(P.toFixed(3))}`)}g=c.Z(b.element,{x:h.handles.end.x+3,y:h.handles.end.y-3});Tc(n,r,g.x,g.y+e+5,l);Tc(n,q,g.x,g.y,l)}}})}}}function he(a,b,c){const d=b+c-1;return!1===/[a-zA-Z]/.test(a.charAt(d))?c:d+1<a.length?he(a,b,c+1):c}function Ee(a,b,c,d,e,f,k,h,n,l,g){const r=pa.j,q=r.Z(b,c);n&&(q.x+=n);n={Hh:{x:!1,y:l}};l=d;if(void 0!==g&&0<d.length){var F=function(J,P){const S=dd.mk(),X=J.font;S&&S!==X&&(J.font=S);P=J.measureText(P).width;return S&&S!==X&&(J.font=X),P+10}(a,d);
if(F>g){g=F/g;F=Math.ceil(d.length/g);l=[];let J=0;for(let P=0;P<Math.ceil(g);P++){let S=Math.min(F,d.length-J);0<S&&(S=he(d,J,S),l.push(d.substring(J,J+S)),J+=S)}}}c.boundingBox=Tc(a,l,q.x,q.y,k,n);c.hasMoved&&function(J,P,S,X,oa,ta){J=0<J.length?pa.H.R.bn(J,P):P;$c(X,void 0,J,pa.H.R.bn([{x:S.left+S.width/2,y:S.top},{x:S.left,y:S.top+S.height/2},{x:S.left+S.width/2,y:S.top+S.height},{x:S.left+S.width,y:S.top+S.height/2}],J),{color:oa,lineWidth:ta,Ku:[2,3]},"canvas")}(f(e).map(J=>r.Z(b,J)),q,c.boundingBox,
a,k,h)}function Jd(a,b,c,d){const e=pa.j;a={start:e.Z(a,b),end:e.Z(a,c)};return pa.H.Lu.og(a,d)}function nd(a){return{visible:!0,active:!0,color:void 0,handles:{start:{x:a.currentPoints.image.x,y:a.currentPoints.image.y,highlight:!0,active:!1},end:{x:a.currentPoints.image.x,y:a.currentPoints.image.y,highlight:!0,active:!0},textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}}}function od(a,b,c,d){return!1!==b.visible&&(d||=5,Jd(a,b.handles.start,
b.handles.end,c)<d)}function Vc(a){function b(r){return[r.start,{x:(r.start.x+r.end.x)/2,y:(r.start.y+r.end.y)/2},r.end]}const c=a.detail;if(a=jb(a.currentTarget,"length")){var d=pa.j,e=pc(c.ze.canvas),f=c.image,k=c.element,h=ae.ug(),n=If.getConfiguration();d=d.xa.get("imagePlaneModule",f.X,f);var l,g;d?(l=d.rowPixelSpacing||d.Hv,g=d.columnPixelSpacing||d.Vs):(l=f.rowPixelSpacing,g=f.columnPixelSpacing);for(f=0;f<a.data.length;f++){const r=a.data[f];!1!==r.visible&&Cc(e,q=>{xe(q,n);const F=Id.Zh(r);
$c(q,k,r.handles.start,r.handles.end,{color:F});Hd(q,c,r.handles,F,{fk:n&&n.Wh});var J=(r.handles.end.x-r.handles.start.x)*(g||1);const P=(r.handles.end.y-r.handles.start.y)*(l||1);if(r.length=Math.sqrt(J*J+P*P),!r.handles.textBox.hasMoved){J=Math.max(r.handles.start.x,r.handles.end.x);var S;J===r.handles.start.x?S=r.handles.start.y:S=r.handles.end.y;r.handles.textBox.x=J;r.handles.textBox.y=S}J=" mm";S=(l&&g||(J=" pixels"),`${r.length.toFixed(2)}${J}`);Ee(q,k,r.handles.textBox,S,r.handles,b,F,h,
10,!0)})}}}function wc(a){return{visible:!0,active:!0,color:void 0,handles:{start:{x:a.currentPoints.image.x,y:a.currentPoints.image.y,highlight:!0,active:!1},middle:{x:a.currentPoints.image.x,y:a.currentPoints.image.y,highlight:!0,active:!0},end:{x:a.currentPoints.image.x,y:a.currentPoints.image.y,highlight:!0,active:!1},textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}}}function ie(a,b,c,d){return!1!==b.visible&&(d||=5,Jd(a,b.handles.start,
b.handles.middle,c)<d||Jd(a,b.handles.middle,b.handles.end,c)<d)}function Jc(a){return Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2))}function pd(a){function b(n){return[n.start,n.middle,n.end]}const c=a.detail;if(a=jb(a.currentTarget,"simpleAngle")){var d=pa.j,e=c.Ic,f=pc(c.ze.canvas),k=ae.ug(),h=ec.getConfiguration();for(let n=0;n<a.data.length;n++){const l=a.data[n];!1!==l.visible&&Cc(f,g=>{xe(g,h);const r=Id.Zh(l);var q=d.Z(c.element,l.handles.start);const F=d.Z(c.element,l.handles.middle);Xe(g,c.element,
l.handles.start,[l.handles.middle,l.handles.end],{color:r});Hd(g,c,l.handles,r,{fk:h&&h.Wh});var J=c.image.columnPixelSpacing||1,P=c.image.rowPixelSpacing||1,S={x:(Math.ceil(l.handles.end.x)-Math.ceil(l.handles.middle.x))*J,y:(Math.ceil(l.handles.end.y)-Math.ceil(l.handles.middle.y))*P},X={x:(Math.ceil(l.handles.end.x)-Math.ceil(l.handles.start.x))*J,y:(Math.ceil(l.handles.end.y)-Math.ceil(l.handles.start.y))*P};J=Jc({x:(Math.ceil(l.handles.middle.x)-Math.ceil(l.handles.start.x))*J,y:(Math.ceil(l.handles.middle.y)-
Math.ceil(l.handles.start.y))*P});S=Jc(S);X=Jc(X);X=Math.acos((Math.pow(J,2)+Math.pow(S,2)-Math.pow(X,2))/(2*J*S));X*=180/Math.PI;S=Math.pow(10,2);if(l.rAngle=Math.round(X*S)/S,l.rAngle)X=l.rAngle.toString()+String.fromCharCode(176),l.handles.textBox.hasMoved||(S=F.x,J=F.y,P=Ic(g,X,5),F.x<q.x?S-=15+P:S+=15,q=d.Qn.getTransform(e),q.invert(),q=q.transformPoint(S,J),l.handles.textBox.x=q.x,l.handles.textBox.y=q.y),Ee(g,c.element,l.handles.textBox,X,l.handles,b,r,k,0,!0)})}}}function Fe(a,b){let c={};
return{get:function(d,e){return 0<=a.indexOf(e)?(!1===c.hasOwnProperty(e)&&(c[e]={data:[]}),c[e]):b.get(d,e)},add:function(d,e,f){if(!(0<=a.indexOf(e)))return b.add(d,e,f);!1===c.hasOwnProperty(e)&&(c[e]={data:[]});c[e].data.push(f)},No:function(){return c},Wk:function(d){c=d},Iw:c}}function hf(a,b){let c=Sc(a);c||=Ce(a);let d="stack stackPrefetch playClip volume slab referenceLines crosshairs stackRenderer".split(" ");b&&(d=d.concat(b));b=Fe(d,c);Eh.push(b);dc(a,b)}function Ge(){const a=navigator.userAgent;
let b,c=a.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(c[1])?(b=/\brv[ :]+(\d+)/g.exec(a)||[],`IE ${b[1]||""}`):"Chrome"===c[1]&&(b=a.match(/\b(OPR|Edge)\/(\d+)/),null!==b)?b.slice(1).join(" ").replace("OPR","Opera"):(c=c[2]?[c[1],c[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(b=a.match(/version\/(\d+)/i))&&c.splice(1,1,b[1]),c.join(" "))}function jf(){kf&&setTimeout(function(){yg()},20)}function Fh(a){const b=pa.j,c=a.type;Kc[c]++;kf=
!0;const d=a.X,e=a.zt,f=a.Ht;var k=b.xk.qn(d);if(k)return void k.promise.then(function(h){Kc[c]--;e(h);jf()},function(h){Kc[c]--;f(h);jf()});k="prefetch"===a.type?-5:"interactive"===a.type?0:"thumbnail"===a.type?5:void 0;(!0===a.zi?b.Ke(d,{priority:k,type:a.type}):b.Ik(d,{priority:k,type:a.type})).then(function(h){Kc[c]--;e(h);jf()},function(h){Kc[c]--;f(h);jf()})}function yg(){var a;if(!(a=Gh)){var b=Ge().split(" ");a=b[1];a=(b=zg[b[0]])?b[a]?b[a]:b.default:zg.default}Ra=Math.max(a,1);Ag=Math.max(a-
2,1);Bg=Math.max(a-1,1);a-=Kc.kf+Kc.Jf+Kc.Cf;for(b=0;b<a;b++){const c=fc.kf.length&&Kc.kf<Ra?fc.kf.shift():fc.Jf.length&&Kc.Jf<Ag?fc.Jf.shift():fc.Cf.length&&Kc.Cf<Bg?fc.Cf.shift():(fc.kf.length||fc.Jf.length||fc.Cf.length||(kf=!1),!1);c&&Fh(c)}}function Cg(a,b,c){const d=jb(b,"stack");if(d&&d.data&&d.data.length){var e=pa.j,f;if(1<d.data.length){var k=jb(b,"stackRenderer");k&&k.data&&k.data.length&&(f=k.data[0])}var h=d.data[0];0>c&&(c+=h.Pa.length);k=je.xn();var n=je.mn(),l=je.nn();if(c!==h.mb){k&&
k(b);k={KA:c,direction:c-h.mb};h.mb=c;var g=h.Pa[c];(h.zi?function(r,q){return new Promise(F=>{clearTimeout(Jf);Jf=setTimeout(function(){Jf=null;var J=pa.j.Ke(r,q);F(J)},50)})}(a,g):e.Ik(g)).then(function(r){if(h.mb===c){try{e.Ia(b)}catch(q){return}f?(f.mb=c,f.render(b,d.data)):e.displayImage(b,r);n&&n(b,r)}},function(r){const q=h.Pa[c];l&&l(b,q,r)});Hh.vw();cb(b,N.sr,k)}}}function Kf(a,b,c){if(a.pending[0]===b){if(a.mb===b.index)return a.pending.splice(a.pending.indexOf(b),1),void(0<a.pending.length&&
Kf(a,a.pending[0],c));const d=function(e){a.Pa.indexOf(e.detail.image.X)===b.index&&(a.pending.splice(a.pending.indexOf(b),1),c.removeEventListener(pa.j.da.me,d),0<a.pending.length&&Kf(a,a.pending[0],c))};c.addEventListener(pa.j.da.me,d);Cg(a.Ln,c,b.index)}}function Lf(a,b,c=!1,d=!0){var e=jb(a,"stack");e&&e.data&&e.data.length&&(e=e.data[0],e.pending||(e.pending=[]),b=e.mb+b,(c?b%=e.Pa.length:b=Math.min(Math.max(0,b),e.Pa.length-1),d)?Cg(e.Ln,a,b):(c={index:b},e.pending.push(c),Kf(e,c,a)))}function Dg(a,
b,c,d,e){const f=Math.atan2(c.y-b.y,c.x-b.x);let k={color:d,lineWidth:e};$c(a,void 0,b,c,k,"canvas");k={color:d,lineWidth:e,fillStyle:d};Xe(a,void 0,c,[{x:c.x-10*Math.cos(f-Math.PI/7),y:c.y-10*Math.sin(f-Math.PI/7)},{x:c.x-10*Math.cos(f+Math.PI/7),y:c.y-10*Math.sin(f+Math.PI/7)},c],k,"canvas")}function lf(a){return{visible:!0,active:!0,color:void 0,handles:{start:{x:a.currentPoints.image.x,y:a.currentPoints.image.y,highlight:!0,active:!1,allowedOutsideImage:!0},end:{x:a.currentPoints.image.x,y:a.currentPoints.image.y,
highlight:!0,active:!1,allowedOutsideImage:!0},textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}}}function mf(a,b,c,d){return!1!==b.visible&&(d||=5,Jd(a,b.handles.start,b.handles.end,c)<d)}function Eg(a){function b(n){return[n.start,{x:(n.start.x+n.end.x)/2,y:(n.start.y+n.end.y)/2},n.end]}const c=a.detail;if(a=jb(a.currentTarget,"arrowAnnotate")){var d=c.Ic,e=pa.j,f=pc(c.ze.canvas),k=ae.ug(),h=Sb.getConfiguration();for(let n=0;n<
a.data.length;n++){const l=a.data[n];!1!==l.visible&&Cc(f,g=>{xe(g,h);const r=Id.Zh(l);var q=e.Z(c.element,l.handles.start),F=e.Z(c.element,l.handles.end);h.Rj?Dg(g,F,q,r,k):Dg(g,q,F,r,k);var J={fk:h&&h.Wh};h.Ym&&Hd(g,c,l.handles,r,J);if((J=l.text)&&""!==J){const P=Ic(g,J,5),S=dd.sg()+10;let X=Math.max(P,S)/2+5;(F.x<q.x&&(X=-X),l.handles.textBox.hasMoved)||(q=h.Rj?{x:F.x-P/2+X,y:F.y-S/2}:{x:q.x-P/2-X,y:q.y-S/2},F=e.Qn.getTransform(d),F.invert(),q=F.transformPoint(q.x,q.y),l.handles.textBox.x=q.x,
l.handles.textBox.y=q.y);Ee(g,c.element,l.handles.textBox,J,l.handles,b,r,k,0,!1,h.maxWidth)}})}}}function nf(a){a=a.detail.element;a.removeEventListener(N.wa,of);a.removeEventListener(N.$a,nf);a.removeEventListener(N.Za,nf)}function of(a){const b=a.detail,c=b.element;var d=jb(c,"stack");if(d&&d.data&&d.data.length){var e=b.currentPoints.canvas;if(!ya(c,e,75)&&!function(k,h){const n=jb(k,"length");if(n&&n.data)for(let l=0;l<n.data.length;l++)if(!0===If.za(k,n.data[l],h,50))return!0;return!1}(c,e)&&
!function(k,h){const n=jb(k,"simpleAngle");if(n&&n.data)for(let l=0;l<n.data.length;l++)if(!0===ec.za(k,n.data[l],h,100))return!0;return!1}(c,e)){d=d.data[0];e=Kd.getConfiguration();var f=!0;e&&void 0!==e.Pj&&(f=e.Pj);Kd.qb(c,d,e,"stackScroll",b,f);Qc("stackScroll",c,Mf);a.preventDefault();a.stopPropagation()}}}function Nf(a){const b=a.mf;void 0!==b&&(a.mf=void 0,a.ol?clearTimeout(b):clearInterval(b))}function He(a){a=a.detail;const b=a.element;b.removeEventListener(N.wa,Of);b.removeEventListener(N.$a,
He);b.removeEventListener(N.Za,He);Fg(a)}function Fg(a){a.element.querySelector(".magnifyTool").style.display="none";document.body.style.cursor="default";Gg()}function ke(a){const b=a.detail,c=b.element,d=Ub("magnify",c);(a.Uc||Qb(b.which,d.sc))&&(c.addEventListener(N.wa,Of),c.addEventListener(N.Zb,Of),c.addEventListener(N.$a,He),c.addEventListener(N.Kb,He),c.addEventListener(N.Za,He),c.addEventListener(pa.j.da.me,Hg),function(e){Gg();var f=e.Ic;void 0===f&&(f=pa.j.Ia(e.element));e=Ie.getConfiguration().Jk;
const k=f.canvas,h=f.image;Wc=document.createElement("div");Wc.width=k.width*e;Wc.height=k.height*e;pa.j.enable(Wc,f.options);const n=pa.j.Ia(Wc);f=pa.j.va(f.element);qd=n.canvas;qd.width=k.width*e;qd.height=k.height*e;n.viewport=Object.assign({},f);f.scale*=e;pa.j.displayImage(Wc,h);pa.j.Wa(Wc,f)}(b),window.requestAnimationFrame(()=>Pf(b)),a.preventDefault(),a.stopPropagation())}function Hg(a){a=a.detail;a.currentPoints=Ih;Pf(a)}function pf(a){a=a.detail;const b=a.element;b.removeEventListener(N.We,
pf);b.removeEventListener(N.Kb,pf);b.removeEventListener(pa.j.da.me,Hg);Fg(a)}function Of(a){const b=a.detail,c=b.element;Pf(b);!0===b.Uc&&(c.addEventListener(N.We,pf),c.addEventListener(N.Kb,pf));a.preventDefault();a.stopPropagation()}function Pf(a){var b=a.element;const c=b.querySelector(".magnifyTool");if(c||Qf(a.element),void 0!==qd){var d=Ie.getConfiguration(),e=d.ki;d=d.Jk;var f=b.querySelector("canvas:not(.magnifyTool)");b=pc(c);var k=pa.j.Z(a.element,a.currentPoints.image);cc(k,f);b.clearRect(0,
0,e,e);kd(b,{left:0,top:0,width:e,height:e},"transparent");f=k.x*d-.5*e;d=k.y*d-.5*e;"Safari"===Rf&&(f=Math.max(f,0),d=Math.max(d,0));f=Math.min(f,qd.width);d=Math.min(d,qd.height);b.drawImage(qd,f,d,e,e,0,0,e,e);c.style.top=k.y-.5*e+"px";c.style.left=k.x-.5*e+"px";a.Uc&&(c.style.top=k.y-.5*e-120+"px");c.style.display="block";document.body.style.cursor="none"}}function Qf(a){if(null===a.querySelector(".magnifyTool")){const b=document.createElement("canvas");b.classList.add("magnifyTool");const c=
Ie.getConfiguration();b.width=c.ki;b.height=c.ki;b.style.position="absolute";b.style.display="none";a.appendChild(b)}}function Gg(){void 0!==Wc&&(pa.j.disable(Wc),Wc=void 0,qd=void 0)}function Ig(a){a.removeEventListener(N.hb,ke);const b=a.querySelector(".magnifyTool");b&&a.removeChild(b)}function Jg(a){a.removeEventListener(N.ea,ke);a.addEventListener(N.ea,ke)}function Kg(a){a.removeEventListener(N.ea,ke)}function Cb(a){const b=pa.H;return a instanceof b.Xe?a:new b.Xe(a[0],a[1],a[2])}function Lg(a){return a.filter(function(b,
c,d){return d.indexOf(b)===c})}function Mg(a,b){const c=Cb(b.Tb),d=Cb(b.Ob),e=Cb(b.Rb);a=a.clone().sub(e);return{x:c.Gc(a)/b.columnPixelSpacing,y:d.Gc(a)/b.rowPixelSpacing}}function Je(a,b){var c=Cb(b.Tb);const d=Cb(b.Ob),e=Cb(b.Rb);c=c.clone().dc(a.x);c.dc(b.columnPixelSpacing||1);a=d.clone().dc(a.y);a.dc(b.rowPixelSpacing||1);b=c.add(a);return b.add(e),b}function Ng(a,b){if(b=function(c,d){var e=Cb(c.Tb),f=Cb(c.Ob),k=Cb(c.Rb),h=Cb(d.Tb),n=Cb(d.Ob);c=Cb(d.Rb);f=e.clone().hd(f);e=new pa.H.Ql;e.al(f,
k);k=h.clone().hd(n);h=new pa.H.Ql;h.al(k,c);h=h.clone().uu(e);k=h.origin;h=h.direction;n=Je({x:d.columns,y:d.rows},d);n=c.Vm(n);c=new pa.H.Sf;c.start=k;c.end=k.clone().add(h.dc(n));d=function(l){const g=Je({x:0,y:0},l),r=Je({x:l.columns,y:0},l),q=Je({x:0,y:l.rows},l);l=Je({x:l.columns,y:l.rows},l);return{top:new pa.H.Sf(g,r),left:new pa.H.Sf(g,q),right:new pa.H.Sf(r,l),bottom:new pa.H.Sf(q,l)}}(d);d=function(l,g){const r=[];return Object.keys(g).forEach(function(q){(q=l.Dk(g[q]))&&r.push(q)}),r}(c,
d);if(2===d.length)return{start:d[0],end:d[1]}}(a,b))return{start:Mg(b.start,a),end:Mg(b.end,a)}}function Og(a,b,c,d){var e=pa.j;c=e.Ia(c).image;var f=e.Ia(d).image;if(c&&f&&(d=e.xa.get("imagePlaneModule",c.X,c),e=e.xa.get("imagePlaneModule",f.X,f),d&&e&&d.Tb&&d.Ob&&d.Rb&&e.Tb&&e.Ob&&e.Rb&&(d.Tb=Cb(d.Tb),d.Ob=Cb(d.Ob),d.Rb=Cb(d.Rb),e.Tb=Cb(e.Tb),e.Ob=Cb(e.Ob),e.Rb=Cb(e.Rb),c=d.Tb.clone().hd(d.Ob),f=e.Tb.clone().hd(e.Ob),c=c.Cs(f),!(c=Math.abs(c),.01>c)))){var k=Ng(d,e);if(k){var h=Id.Yt();a.setTransform(1,
0,0,1,0,0);Cc(a,n=>{$c(n,b.element,k.start,k.end,{color:h})})}}}function Sf(a){const b=a.detail,c=a.currentTarget.getRootNode(),d=jb(a.currentTarget,"referenceLines");if(void 0!==d){var e=[];d.data[0].Cw.Zt().forEach(n=>{n.getRootNode()===c&&e.push(n)});var f=null;e.forEach(n=>{(n.classList.contains("activated")||n.classList.contains("active-image"))&&(f=n.id)});var k=d.data[0].xb,h=b.ze.canvas.getContext("2d");pa.j.nw(b.Ic,h);e.forEach(n=>{n!==a.currentTarget&&a.currentTarget.id!==f&&n.id===f&&k(h,
b,a.currentTarget,n)})}}function Jh(){return u(this,void 0,void 0,function(){return O(this,function(){return[2,!0]})})}function Kh(a){return u(this,void 0,void 0,function(){var b,c,d,e,f,k,h,n,l,g,r,q,F,J;return O(this,function(P){switch(P.label){case 0:(b=new Pg).Initialize(a);c=new Tf.h(!1,!0,!0,2,null);d=new DataView(a.buffer,b.O);c.Initialize(d);e=c.Jd;f=Db.h.Qf(e,a);k=Qg.zl(f);h=new DataView(a.buffer,d.byteOffset+c.O);n=Rg.Jl(k.rj,k.ah,h);var S=l=n.Jd;P=Db.h.Bl(S,a);var X=Db.h.yl(S,a),oa=Db.h.Mp(S,
a),ta=Db.h.Np(S,a),qa=Db.h.bq(S,a),Ma=Db.h.Jq(S,a),Oa=Db.h.tq(S,a),Ka=Db.h.uq(S,a),zb=Db.h.vq(S,a),nb=Db.h.Tq(S,a),Lb=Db.h.iq(S,a),qc=Db.h.Yq(S,a);S=Db.h.Uq(S,a);return g=new Sg(P,X,oa,ta,qa,Ma,Oa,0===Ka,0===zb,nb,Lb,qc,S),[4,Jh()];case 1:return r=P.i(),[4,Tg.Bp(r,k)];case 2:return null!==(q=P.i())?(q.Initialize(h),q.O=n.O,q.yd(g),(F=Lh.sq(g.PhotometricInterpretation)).Initialize(l,a,k.ah),J=Db.h.Up(l,a),[2,new Mh(q,a,f,F,g,J,r,e,l)]):[2,null]}})})}function Uf(a){return u(this,void 0,void 0,function(){return O(this,
function(b){switch(b.label){case 0:return a.buffer?[2,(new Uint8Array(a.buffer)).buffer]:[3,1];case 1:return[4,a.arrayBuffer()];case 2:return[2,b.i()]}})})}function Nh(a){return u(this,void 0,void 0,function(){var b,c;return O(this,function(d){switch(d.label){case 0:return[4,Uf(a)];case 1:return b=d.i(),[4,Kh(c=new DataView(b))];case 2:return[2,[d.i(),c]]}})})}function Oh(a,b,c,d){return Ga(this,void 0,void 0,function(){function e(){return g}var f,k,h,n,l,g,r,q,F,J,P;return Sa(this,function(S){switch(S.label){case 0:return f=
a.jj(d),k=Ug.Fl(a.v,f),h=new Blob([k],{type:f.Type.Type}),n=window.URL||window.webkitURL,l=n.createObjectURL(h),[4,new Promise(function(X){var oa=new Image,ta=document.createElement("canvas");ta.height=a.v.Rows;ta.width=a.v.Ya;oa.onload=function(){var qa=ta.getContext("2d");qa.drawImage(oa,0,0);qa=qa.getImageData(0,0,a.v.Ya,a.v.Rows).data;X(qa)};oa.src=l})];case 1:return g=S.i(),r=[0,255],q=a.hj(d),F=a.v.zb?a.v.zb.Uf:1,J=a.v.zb?a.v.zb.Vf:1,P=a.v.zb?a.v.zb.jh:1,[2,new ba(r[0],r[1],a.v.qe,a.v.le,127,
255,Xa.Di,e,a.v.Rows,a.v.Ya,a.v.Rows,a.v.Ya,!b.Re,J,F,b.Se,g.length,q,127,255,!0,P,null,d.byteLength)]}})})}function Vg(a,b,c){return xa(this,void 0,void 0,function(){var d,e;return R(this,function(f){switch(f.label){case 0:return(d=a.Qe(b)).eg?(e=function(k,h,n,l){var g=k.jj(l);n||=k.Ib;n=k.jq();var r=h.Re,q=Ug.mq(r,k,g);g=r?g.Ed.byteLength:k.v.Ya*k.v.Rows*4;var F=k.v.zb?k.v.zb.Uf:1,J=k.v.zb?k.v.zb.Vf:1,P=k.v.zb?k.v.zb.jh:1,S=k.hj(l);return new ba(n[0],n[1],k.v.qe,k.v.le,k.Ib.Nf,k.Ib.Gd,r?Xa.Ev:
Xa.Di,function(){return q},k.v.Rows,k.v.Ya,k.v.Rows,k.v.Ya,!r,J,F,h.Se,g,S,k.Ib.Nf,k.Ib.Gd,k.v.Rf,P,null,l.byteLength)}(d,a.gh,d.Ib,c),[2,e]):[3,1];case 1:return[4,Oh(d,a.gh,d.Ib,c)];case 2:return[2,f.i()]}})})}function Ph(a,b,c){return xa(this,void 0,void 0,function(){var d,e,f;return R(this,function(){return d=a.Qe(b),e=a.Qf(),f=d.nq(c),[2,new za(f.Ed,e,a.eg,d.v,a.gh)]})})}function Ke(a,b){function c(){this.constructor=a}if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+
String(b)+" is not a constructor or null");m(a,b);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}function Vf(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.");}function qf(a,b){var c="function"==typeof Symbol&&a[Symbol.iterator];if(!c)return a;
var d;a=c.call(a);var e=[];try{for(;(void 0===b||0<b--)&&!(d=a.next()).done;)e.push(d.value)}catch(k){var f={error:k}}finally{try{d&&!d.done&&(c=a.return)&&c.call(a)}finally{if(f)throw f.error;}}return e}function rf(a,b,c){if(c||2===arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||=Array.prototype.slice.call(b,0,e),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))}function Xc(a){return"function"==typeof a}function Wg(a){a=a(function(b){b.stack=Error().stack});return a.prototype=
Object.create(Error.prototype),a.prototype.constructor=a,a}function Wf(a,b){a&&(b=a.indexOf(b),0<=b&&a.splice(b,1))}function Xg(a){return a instanceof sf||a&&"closed"in a&&Xc(a.remove)&&Xc(a.add)&&Xc(a.unsubscribe)}function Yg(){}function tf(a){(function(b){Xf.setTimeout(function(){throw b;})})(a)}function Qh(a){var b;return null!==(b=null!=a?a:void 0)&&void 0!==b?b:Promise}function Zg(a,b){return c=this,d=void 0,f=function(){var k;return function(h,n){function l(P){return function(S){return function(X){if(g)throw new TypeError("Generator is already executing.");
for(;F&&(F=0,X[0]&&(J=0)),J;)try{if(g=1,r&&(q=2&X[0]?r.return:X[0]?r.throw||((q=r.return)&&q.call(r),0):r.next)&&!(q=q.call(r,X[1])).done)return q;switch(r=0,q&&(X=[2&X[0],q.value]),X[0]){case 0:case 1:q=X;break;case 4:return J.label++,{value:X[1],done:!1};case 5:J.label++;r=X[1];X=[0];continue;case 7:X=J.o.pop();J.m.pop();continue;default:if(!((q=0<(q=J.m).length&&q[q.length-1])||6!==X[0]&&2!==X[0])){J=0;continue}if(3===X[0]&&(!q||X[1]>q[0]&&X[1]<q[3]))J.label=X[1];else if(6===X[0]&&J.label<q[1])J.label=
q[1],q=X;else if(q&&J.label<q[2])J.label=q[2],J.o.push(X);else{q[2]&&J.o.pop();J.m.pop();continue}}X=n.call(h,J)}catch(oa){X=[6,oa],r=0}finally{g=q=0}if(5&X[0])throw X[1];return{value:X[0]?X[1]:void 0,done:!0}}([P,S])}}var g,r,q,F,J={label:0,i:function(){if(1&q[0])throw q[1];return q[1]},m:[],o:[]};return F={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(F[Symbol.iterator]=function(){return this}),F}(this,function(h){switch(h.label){case 0:k=0,h.label=1;case 1:return k<a.length?[4,
b(a[k],k)]:[3,4];case 2:h.i(),h.label=3;case 3:return k++,[3,1];case 4:return[2]}})},new (e=void 0,e=Promise)(function(k,h){function n(r){try{g(f.next(r))}catch(q){h(q)}}function l(r){try{g(f.throw(r))}catch(q){h(q)}}function g(r){var q;r.done?k(r.value):(q=r.value,q instanceof e?q:new e(function(F){F(q)})).then(n,l)}g((f=f.apply(c,d||[])).next())});var c,d,e,f}function uf(a){return a.getRootNode().querySelector("app-viewer")}function Rh(a,b){var c=this,d=uf(b).annotationDialog,e=uf(b);d.OPEN_DIALOG(null,
!0).then(function(f){f.afterClosed().subscribe(function(k){return va(c,void 0,void 0,function(){var h;return Da(this,function(n){switch(n.label){case 0:return h=k.description||void 0,a(h),[4,e.Im.onAnnotationChanged()];case 1:return n.i(),[2]}})})})})}function Sh(a,b,c,d){var e=this;b=uf(d).annotationDialog;var f=uf(d);b.OPEN_DIALOG(a.text,!1).then(function(k){k.afterClosed().subscribe(function(h){return va(e,void 0,void 0,function(){var n;return Da(this,function(l){switch(l.label){case 0:return h?
(n=h.description||void 0,c(a,n),[4,f.Im.onAnnotationChanged()]):[3,2];case 1:return l.i(),[3,4];case 2:return c(a,void 0,!0),[4,f.Im.onAnnotationChanged()];case 3:l.i(),l.label=4;case 4:return[2]}})})})})}Ea.r(Ya);Ea.d(Ya,{CoreApi:()=>Th});const N={hb:"quantanttoolsmousedown",$a:"quantanttoolsmouseup",Ta:"quantanttoolsmousedownactivate",wa:"quantanttoolsmousedrag",Ba:"quantanttoolsmousemove",Za:"quantanttoolsmouseclick",zc:"quantanttoolsmousedoubleclick",Ue:"quantanttoolsmousewheel",ea:"quantanttoolstouchstart",
rb:"quantanttoolstouchstartactive",Kb:"quantanttoolstouchend",Zb:"quantanttoolstouchdrag",We:"quantanttoolstouchdragend",$b:"quantanttoolstouchpinch",wr:"quantanttoolstouchrotate",ib:"quantanttoolstouchpress",ka:"quantanttoolstap",xc:"quantanttoolsdoubletap",Ml:"quantanttoolsmultitouchstart",pr:"quantanttoolsmultitouchstartactive",Ll:"quantanttoolsmultitouchdrag",xx:"quantanttoolskeydown",zx:"quantanttoolskeyup",yx:"quantanttoolskeypress",nr:"quantanttoolsmeasurementadded",Te:"quantanttoolsmeasurementmodified",
eh:"quantantmeasurementremoved",dh:"quantantmeasurementcompleted",Fd:"quantanttoolstooldeactivated",zp:"quantanttoolsclipstopped",sr:"quantantstackscroll",aj:"quantanttoolsannotationcompleted",Bx:"quantantlinesampleupdated"},kg=class{constructor(){this.aa=256;this.vb=[0,255];this.$i=[0,.66667];this.cj=[1,1];this.dj=[1,1];this.Ng=[1,1];this.Cl=[128,0,0,255];this.wl=[0,0,0,255];this.vl=[255,255,255,255];this.xl=[0,255];this.Table=[]}jw(a){this.aa=a}lw(a,b){this.vb[0]=a;this.vb[1]=b}setRange(a,b){this.xl[0]=
a;this.xl[1]=b}kn(a){return this.Zn(a)}Is(){if(!(1<this.Table.length)){this.Table=[];var a=this.aa-1,b,c,d,e;a?(b=(this.$i[1]-this.$i[0])/a,c=(this.cj[1]-this.cj[0])/a,d=(this.dj[1]-this.dj[0])/a,e=(this.Ng[1]-this.Ng[0])/a):b=c=d=e=0;for(let l=0;l<=a;l++){const g=this.Ng[0]+l*e;a:{var f=this.$i[0]+l*b,k=this.cj[0]+l*c;var h=this.dj[0]+l*d;if(1<f)throw Error("HSVToRGB expects hue < 1");var n=[];if(0===k){h=(n[0]=h,n[1]=h,n[2]=h,n);break a}const r=Math.floor(6*f),q=6*f-r;f=h*(1-k);const F=h*(1-k*q);
k=h*(1-k*(1-q));switch(r){case 0:case 6:n[0]=h;n[1]=k;n[2]=f;break;case 1:n[0]=F;n[1]=h;n[2]=f;break;case 2:n[0]=f;n[1]=h;n[2]=k;break;case 3:n[0]=f;n[1]=F;n[2]=h;break;case 4:n[0]=k;n[1]=f;n[2]=h;break;case 5:n[0]=h,n[1]=f,n[2]=F}h=n}n=[];n[0]=Math.floor(255*h[0]+.5);n[1]=Math.floor(255*h[1]+.5);n[2]=Math.floor(255*h[2]+.5);n[3]=Math.floor(255*g+.5);this.Table.push(n)}this.El()}}El(){const a=this.aa;this.Table[a+0]=this.wl;this.Table[a+1]=this.vl;this.Table[a+2]=this.Cl}Zn(a){const b=this.ir(a);
if(0>b)return this.Cl;if(0===b){if(a<this.vb[0])return this.wl}else if(b===this.aa-1&&a>this.vb[1])return this.vl;return this.Table[b]}ir(a){var b=[],c,d,e;if(c=this.aa-1,d=-this.vb[0],this.vb[1]<=this.vb[0]?e=Number.MAX_VALUE:e=c/(this.vb[1]-this.vb[0]),b[0]=this.vb[0],b[1]=this.vb[1],isNaN(a))return-1;let f;a=(f=a<b[0]?c+1.5:a>b[1]?c+2.5:(a+d)*e,Math.floor(f));return a===this.aa+0?a=0:a===this.aa+1&&(a=this.aa-1),a}mw(a,b){if(5===arguments.length&&(b=Array.prototype.slice.call(arguments,1)),0>a)throw Error(`Can't set the table value for negative index (${a})`);
a>=this.aa&&Error(`Index ${a} is greater than the number of colors ${this.aa}`);this.Table[a]=b;0!==a&&a!==this.aa-1||this.El()}},jg=[0,0,0,0],me={nA:{name:"Hot Iron",OA:256,Ha:[[0,0,0,255],[2,0,0,255],[4,0,0,255],[6,0,0,255],[8,0,0,255],[10,0,0,255],[12,0,0,255],[14,0,0,255],[16,0,0,255],[18,0,0,255],[20,0,0,255],[22,0,0,255],[24,0,0,255],[26,0,0,255],[28,0,0,255],[30,0,0,255],[32,0,0,255],[34,0,0,255],[36,0,0,255],[38,0,0,255],[40,0,0,255],[42,0,0,255],[44,0,0,255],[46,0,0,255],[48,0,0,255],[50,
0,0,255],[52,0,0,255],[54,0,0,255],[56,0,0,255],[58,0,0,255],[60,0,0,255],[62,0,0,255],[64,0,0,255],[66,0,0,255],[68,0,0,255],[70,0,0,255],[72,0,0,255],[74,0,0,255],[76,0,0,255],[78,0,0,255],[80,0,0,255],[82,0,0,255],[84,0,0,255],[86,0,0,255],[88,0,0,255],[90,0,0,255],[92,0,0,255],[94,0,0,255],[96,0,0,255],[98,0,0,255],[100,0,0,255],[102,0,0,255],[104,0,0,255],[106,0,0,255],[108,0,0,255],[110,0,0,255],[112,0,0,255],[114,0,0,255],[116,0,0,255],[118,0,0,255],[120,0,0,255],[122,0,0,255],[124,0,0,255],
[126,0,0,255],[128,0,0,255],[130,0,0,255],[132,0,0,255],[134,0,0,255],[136,0,0,255],[138,0,0,255],[140,0,0,255],[142,0,0,255],[144,0,0,255],[146,0,0,255],[148,0,0,255],[150,0,0,255],[152,0,0,255],[154,0,0,255],[156,0,0,255],[158,0,0,255],[160,0,0,255],[162,0,0,255],[164,0,0,255],[166,0,0,255],[168,0,0,255],[170,0,0,255],[172,0,0,255],[174,0,0,255],[176,0,0,255],[178,0,0,255],[180,0,0,255],[182,0,0,255],[184,0,0,255],[186,0,0,255],[188,0,0,255],[190,0,0,255],[192,0,0,255],[194,0,0,255],[196,0,0,255],
[198,0,0,255],[200,0,0,255],[202,0,0,255],[204,0,0,255],[206,0,0,255],[208,0,0,255],[210,0,0,255],[212,0,0,255],[214,0,0,255],[216,0,0,255],[218,0,0,255],[220,0,0,255],[222,0,0,255],[224,0,0,255],[226,0,0,255],[228,0,0,255],[230,0,0,255],[232,0,0,255],[234,0,0,255],[236,0,0,255],[238,0,0,255],[240,0,0,255],[242,0,0,255],[244,0,0,255],[246,0,0,255],[248,0,0,255],[250,0,0,255],[252,0,0,255],[254,0,0,255],[255,0,0,255],[255,2,0,255],[255,4,0,255],[255,6,0,255],[255,8,0,255],[255,10,0,255],[255,12,0,
255],[255,14,0,255],[255,16,0,255],[255,18,0,255],[255,20,0,255],[255,22,0,255],[255,24,0,255],[255,26,0,255],[255,28,0,255],[255,30,0,255],[255,32,0,255],[255,34,0,255],[255,36,0,255],[255,38,0,255],[255,40,0,255],[255,42,0,255],[255,44,0,255],[255,46,0,255],[255,48,0,255],[255,50,0,255],[255,52,0,255],[255,54,0,255],[255,56,0,255],[255,58,0,255],[255,60,0,255],[255,62,0,255],[255,64,0,255],[255,66,0,255],[255,68,0,255],[255,70,0,255],[255,72,0,255],[255,74,0,255],[255,76,0,255],[255,78,0,255],[255,
80,0,255],[255,82,0,255],[255,84,0,255],[255,86,0,255],[255,88,0,255],[255,90,0,255],[255,92,0,255],[255,94,0,255],[255,96,0,255],[255,98,0,255],[255,100,0,255],[255,102,0,255],[255,104,0,255],[255,106,0,255],[255,108,0,255],[255,110,0,255],[255,112,0,255],[255,114,0,255],[255,116,0,255],[255,118,0,255],[255,120,0,255],[255,122,0,255],[255,124,0,255],[255,126,0,255],[255,128,4,255],[255,130,8,255],[255,132,12,255],[255,134,16,255],[255,136,20,255],[255,138,24,255],[255,140,28,255],[255,142,32,255],
[255,144,36,255],[255,146,40,255],[255,148,44,255],[255,150,48,255],[255,152,52,255],[255,154,56,255],[255,156,60,255],[255,158,64,255],[255,160,68,255],[255,162,72,255],[255,164,76,255],[255,166,80,255],[255,168,84,255],[255,170,88,255],[255,172,92,255],[255,174,96,255],[255,176,100,255],[255,178,104,255],[255,180,108,255],[255,182,112,255],[255,184,116,255],[255,186,120,255],[255,188,124,255],[255,190,128,255],[255,192,132,255],[255,194,136,255],[255,196,140,255],[255,198,144,255],[255,200,148,
255],[255,202,152,255],[255,204,156,255],[255,206,160,255],[255,208,164,255],[255,210,168,255],[255,212,172,255],[255,214,176,255],[255,216,180,255],[255,218,184,255],[255,220,188,255],[255,222,192,255],[255,224,196,255],[255,226,200,255],[255,228,204,255],[255,230,208,255],[255,232,212,255],[255,234,216,255],[255,236,220,255],[255,238,224,255],[255,240,228,255],[255,242,232,255],[255,244,236,255],[255,246,240,255],[255,248,244,255],[255,250,248,255],[255,252,252,255],[255,255,255,255]]},gB:{name:"PET",
pb:256,Ha:[[0,0,0,255],[0,2,1,255],[0,4,3,255],[0,6,5,255],[0,8,7,255],[0,10,9,255],[0,12,11,255],[0,14,13,255],[0,16,15,255],[0,18,17,255],[0,20,19,255],[0,22,21,255],[0,24,23,255],[0,26,25,255],[0,28,27,255],[0,30,29,255],[0,32,31,255],[0,34,33,255],[0,36,35,255],[0,38,37,255],[0,40,39,255],[0,42,41,255],[0,44,43,255],[0,46,45,255],[0,48,47,255],[0,50,49,255],[0,52,51,255],[0,54,53,255],[0,56,55,255],[0,58,57,255],[0,60,59,255],[0,62,61,255],[0,65,63,255],[0,67,65,255],[0,69,67,255],[0,71,69,255],
[0,73,71,255],[0,75,73,255],[0,77,75,255],[0,79,77,255],[0,81,79,255],[0,83,81,255],[0,85,83,255],[0,87,85,255],[0,89,87,255],[0,91,89,255],[0,93,91,255],[0,95,93,255],[0,97,95,255],[0,99,97,255],[0,101,99,255],[0,103,101,255],[0,105,103,255],[0,107,105,255],[0,109,107,255],[0,111,109,255],[0,113,111,255],[0,115,113,255],[0,117,115,255],[0,119,117,255],[0,121,119,255],[0,123,121,255],[0,125,123,255],[0,128,125,255],[1,126,127,255],[3,124,129,255],[5,122,131,255],[7,120,133,255],[9,118,135,255],[11,
116,137,255],[13,114,139,255],[15,112,141,255],[17,110,143,255],[19,108,145,255],[21,106,147,255],[23,104,149,255],[25,102,151,255],[27,100,153,255],[29,98,155,255],[31,96,157,255],[33,94,159,255],[35,92,161,255],[37,90,163,255],[39,88,165,255],[41,86,167,255],[43,84,169,255],[45,82,171,255],[47,80,173,255],[49,78,175,255],[51,76,177,255],[53,74,179,255],[55,72,181,255],[57,70,183,255],[59,68,185,255],[61,66,187,255],[63,64,189,255],[65,63,191,255],[67,61,193,255],[69,59,195,255],[71,57,197,255],
[73,55,199,255],[75,53,201,255],[77,51,203,255],[79,49,205,255],[81,47,207,255],[83,45,209,255],[85,43,211,255],[86,41,213,255],[88,39,215,255],[90,37,217,255],[92,35,219,255],[94,33,221,255],[96,31,223,255],[98,29,225,255],[100,27,227,255],[102,25,229,255],[104,23,231,255],[106,21,233,255],[108,19,235,255],[110,17,237,255],[112,15,239,255],[114,13,241,255],[116,11,243,255],[118,9,245,255],[120,7,247,255],[122,5,249,255],[124,3,251,255],[126,1,253,255],[128,0,255,255],[130,2,252,255],[132,4,248,255],
[134,6,244,255],[136,8,240,255],[138,10,236,255],[140,12,232,255],[142,14,228,255],[144,16,224,255],[146,18,220,255],[148,20,216,255],[150,22,212,255],[152,24,208,255],[154,26,204,255],[156,28,200,255],[158,30,196,255],[160,32,192,255],[162,34,188,255],[164,36,184,255],[166,38,180,255],[168,40,176,255],[170,42,172,255],[171,44,168,255],[173,46,164,255],[175,48,160,255],[177,50,156,255],[179,52,152,255],[181,54,148,255],[183,56,144,255],[185,58,140,255],[187,60,136,255],[189,62,132,255],[191,64,128,
255],[193,66,124,255],[195,68,120,255],[197,70,116,255],[199,72,112,255],[201,74,108,255],[203,76,104,255],[205,78,100,255],[207,80,96,255],[209,82,92,255],[211,84,88,255],[213,86,84,255],[215,88,80,255],[217,90,76,255],[219,92,72,255],[221,94,68,255],[223,96,64,255],[225,98,60,255],[227,100,56,255],[229,102,52,255],[231,104,48,255],[233,106,44,255],[235,108,40,255],[237,110,36,255],[239,112,32,255],[241,114,28,255],[243,116,24,255],[245,118,20,255],[247,120,16,255],[249,122,12,255],[251,124,8,255],
[253,126,4,255],[255,128,0,255],[255,130,4,255],[255,132,8,255],[255,134,12,255],[255,136,16,255],[255,138,20,255],[255,140,24,255],[255,142,28,255],[255,144,32,255],[255,146,36,255],[255,148,40,255],[255,150,44,255],[255,152,48,255],[255,154,52,255],[255,156,56,255],[255,158,60,255],[255,160,64,255],[255,162,68,255],[255,164,72,255],[255,166,76,255],[255,168,80,255],[255,170,85,255],[255,172,89,255],[255,174,93,255],[255,176,97,255],[255,178,101,255],[255,180,105,255],[255,182,109,255],[255,184,
113,255],[255,186,117,255],[255,188,121,255],[255,190,125,255],[255,192,129,255],[255,194,133,255],[255,196,137,255],[255,198,141,255],[255,200,145,255],[255,202,149,255],[255,204,153,255],[255,206,157,255],[255,208,161,255],[255,210,165,255],[255,212,170,255],[255,214,174,255],[255,216,178,255],[255,218,182,255],[255,220,186,255],[255,222,190,255],[255,224,194,255],[255,226,198,255],[255,228,202,255],[255,230,206,255],[255,232,210,255],[255,234,214,255],[255,236,218,255],[255,238,222,255],[255,240,
226,255],[255,242,230,255],[255,244,234,255],[255,246,238,255],[255,248,242,255],[255,250,246,255],[255,252,250,255],[255,255,255,255]]},oA:{name:"Hot Metal Blue",pb:256,Ha:[[0,0,0,255],[0,0,2,255],[0,0,4,255],[0,0,6,255],[0,0,8,255],[0,0,10,255],[0,0,12,255],[0,0,14,255],[0,0,16,255],[0,0,17,255],[0,0,19,255],[0,0,21,255],[0,0,23,255],[0,0,25,255],[0,0,27,255],[0,0,29,255],[0,0,31,255],[0,0,33,255],[0,0,35,255],[0,0,37,255],[0,0,39,255],[0,0,41,255],[0,0,43,255],[0,0,45,255],[0,0,47,255],[0,0,49,
255],[0,0,51,255],[0,0,53,255],[0,0,55,255],[0,0,57,255],[0,0,59,255],[0,0,61,255],[0,0,63,255],[0,0,65,255],[0,0,67,255],[0,0,69,255],[0,0,71,255],[0,0,73,255],[0,0,75,255],[0,0,77,255],[0,0,79,255],[0,0,81,255],[0,0,83,255],[0,0,84,255],[0,0,86,255],[0,0,88,255],[0,0,90,255],[0,0,92,255],[0,0,94,255],[0,0,96,255],[0,0,98,255],[0,0,100,255],[0,0,102,255],[0,0,104,255],[0,0,106,255],[0,0,108,255],[0,0,110,255],[0,0,112,255],[0,0,114,255],[0,0,116,255],[0,0,117,255],[0,0,119,255],[0,0,121,255],[0,
0,123,255],[0,0,125,255],[0,0,127,255],[0,0,129,255],[0,0,131,255],[0,0,133,255],[0,0,135,255],[0,0,137,255],[0,0,139,255],[0,0,141,255],[0,0,143,255],[0,0,145,255],[0,0,147,255],[0,0,149,255],[0,0,151,255],[0,0,153,255],[0,0,155,255],[0,0,157,255],[0,0,159,255],[0,0,161,255],[0,0,163,255],[0,0,165,255],[0,0,167,255],[3,0,169,255],[6,0,171,255],[9,0,173,255],[12,0,175,255],[15,0,177,255],[18,0,179,255],[21,0,181,255],[24,0,183,255],[26,0,184,255],[29,0,186,255],[32,0,188,255],[35,0,190,255],[38,0,
192,255],[41,0,194,255],[44,0,196,255],[47,0,198,255],[50,0,200,255],[52,0,197,255],[55,0,194,255],[57,0,191,255],[59,0,188,255],[62,0,185,255],[64,0,182,255],[66,0,179,255],[69,0,176,255],[71,0,174,255],[74,0,171,255],[76,0,168,255],[78,0,165,255],[81,0,162,255],[83,0,159,255],[85,0,156,255],[88,0,153,255],[90,0,150,255],[93,2,144,255],[96,4,138,255],[99,6,132,255],[102,8,126,255],[105,9,121,255],[108,11,115,255],[111,13,109,255],[114,15,103,255],[116,17,97,255],[119,19,91,255],[122,21,85,255],[125,
23,79,255],[128,24,74,255],[131,26,68,255],[134,28,62,255],[137,30,56,255],[140,32,50,255],[143,34,47,255],[146,36,44,255],[149,38,41,255],[152,40,38,255],[155,41,35,255],[158,43,32,255],[161,45,29,255],[164,47,26,255],[166,49,24,255],[169,51,21,255],[172,53,18,255],[175,55,15,255],[178,56,12,255],[181,58,9,255],[184,60,6,255],[187,62,3,255],[190,64,0,255],[194,66,0,255],[198,68,0,255],[201,70,0,255],[205,72,0,255],[209,73,0,255],[213,75,0,255],[217,77,0,255],[221,79,0,255],[224,81,0,255],[228,83,
0,255],[232,85,0,255],[236,87,0,255],[240,88,0,255],[244,90,0,255],[247,92,0,255],[251,94,0,255],[255,96,0,255],[255,98,3,255],[255,100,6,255],[255,102,9,255],[255,104,12,255],[255,105,15,255],[255,107,18,255],[255,109,21,255],[255,111,24,255],[255,113,26,255],[255,115,29,255],[255,117,32,255],[255,119,35,255],[255,120,38,255],[255,122,41,255],[255,124,44,255],[255,126,47,255],[255,128,50,255],[255,130,53,255],[255,132,56,255],[255,134,59,255],[255,136,62,255],[255,137,65,255],[255,139,68,255],[255,
141,71,255],[255,143,74,255],[255,145,76,255],[255,147,79,255],[255,149,82,255],[255,151,85,255],[255,152,88,255],[255,154,91,255],[255,156,94,255],[255,158,97,255],[255,160,100,255],[255,162,103,255],[255,164,106,255],[255,166,109,255],[255,168,112,255],[255,169,115,255],[255,171,118,255],[255,173,121,255],[255,175,124,255],[255,177,126,255],[255,179,129,255],[255,181,132,255],[255,183,135,255],[255,184,138,255],[255,186,141,255],[255,188,144,255],[255,190,147,255],[255,192,150,255],[255,194,153,
255],[255,196,156,255],[255,198,159,255],[255,200,162,255],[255,201,165,255],[255,203,168,255],[255,205,171,255],[255,207,174,255],[255,209,176,255],[255,211,179,255],[255,213,182,255],[255,215,185,255],[255,216,188,255],[255,218,191,255],[255,220,194,255],[255,222,197,255],[255,224,200,255],[255,226,203,255],[255,228,206,255],[255,229,210,255],[255,231,213,255],[255,233,216,255],[255,235,219,255],[255,237,223,255],[255,239,226,255],[255,240,229,255],[255,242,232,255],[255,244,236,255],[255,246,239,
255],[255,248,242,255],[255,250,245,255],[255,251,249,255],[255,253,252,255],[255,255,255,255]]},hB:{name:"PET 20 Step",pb:256,Ha:[[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[48,48,80,255],[48,48,80,255],[48,
48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,
80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],
[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,
255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],
[64,224,64,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,176,64,255],[208,176,64,255],[208,176,
64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],
[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,
255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255]]},iA:{name:"Gray",pb:256,gamma:1,Fb:{red:[[0,0,0],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,0,0],[1,1,1]]}},DA:{name:"Jet",pb:256,gamma:1,Fb:{red:[[0,0,0],[.35,0,0],[.66,1,1],[.89,1,1],[1,.5,.5]],green:[[0,0,0],[.125,0,0],[.375,1,1],[.64,1,1],[.91,0,0],[1,0,0]],blue:[[0,.5,.5],[.11,1,1],[.34,1,1],[.65,0,0],[1,0,0]]}},pA:{name:"HSV",
pb:256,gamma:1,Fb:{red:[[0,1,1],[.15873,1,1],[.174603,.96875,.96875],[.333333,.03125,.03125],[.349206,0,0],[.666667,0,0],[.68254,.03125,.03125],[.84127,.96875,.96875],[.857143,1,1],[1,1,1]],green:[[0,0,0],[.15873,.9375,.9375],[.174603,1,1],[.507937,1,1],[.666667,.0625,.0625],[.68254,0,0],[1,0,0]],blue:[[0,0,0],[.333333,0,0],[.349206,.0625,.0625],[.507937,1,1],[.84127,1,1],[.857143,.9375,.9375],[1,.09375,.09375]]}},mA:{name:"Hot",pb:256,gamma:1,Fb:{red:[[0,.0416,.0416],[.365079,1,1],[1,1,1]],green:[[0,
0,0],[.365079,0,0],[.746032,1,1],[1,1,1]],blue:[[0,0,0],[.746032,0,0],[1,1,1]]}},bz:{name:"Cool",pb:256,gamma:1,Fb:{red:[[0,0,0],[1,1,1]],green:[[0,1,1],[1,0,0]],blue:[[0,1,1],[1,1,1]]}},JC:{name:"Spring",pb:256,gamma:1,Fb:{red:[[0,1,1],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,1,1],[1,0,0]]}},MC:{name:"Summer",pb:256,gamma:1,Fb:{red:[[0,0,0],[1,1,1]],green:[[0,.5,.5],[1,1,1]],blue:[[0,.4,.4],[1,.4,.4]]}},yy:{name:"Autumn",pb:256,gamma:1,Fb:{red:[[0,1,1],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,
0,0],[1,0,0]]}},YC:{name:"Winter",pb:256,gamma:1,Fb:{red:[[0,0,0],[1,0,0]],green:[[0,0,0],[1,1,1]],blue:[[0,1,1],[1,.5,.5]]}},Ky:{name:"Bone",pb:256,gamma:1,Fb:{red:[[0,0,0],[.746032,.652778,.652778],[1,1,1]],green:[[0,0,0],[.365079,.319444,.319444],[.746032,.777778,.777778],[1,1,1]],blue:[[0,0,0],[.365079,.444444,.444444],[1,1,1]]}},dz:{name:"Copper",pb:256,gamma:1,Fb:{red:[[0,0,0],[.809524,1,1],[1,1,1]],green:[[0,0,0],[1,.7812,.7812]],blue:[[0,0,0],[1,.4975,.4975]]}},IC:{name:"Spectral",pb:256,
gamma:1,Fb:{red:[[0,0,0],[.05,.4667,.4667],[.1,.5333,.5333],[.15,0,0],[.2,0,0],[.25,0,0],[.3,0,0],[.35,0,0],[.4,0,0],[.45,0,0],[.5,0,0],[.55,0,0],[.6,0,0],[.65,.7333,.7333],[.7,.9333,.9333],[.75,1,1],[.8,1,1],[.85,1,1],[.9,.8667,.8667],[.95,.8,.8],[1,.8,.8]],green:[[0,0,0],[.05,0,0],[.1,0,0],[.15,0,0],[.2,0,0],[.25,.4667,.4667],[.3,.6,.6],[.35,.6667,.6667],[.4,.6667,.6667],[.45,.6,.6],[.5,.7333,.7333],[.55,.8667,.8667],[.6,1,1],[.65,1,1],[.7,.9333,.9333],[.75,.8,.8],[.8,.6,.6],[.85,0,0],[.9,0,0],
[.95,0,0],[1,.8,.8]],blue:[[0,0,0],[.05,.5333,.5333],[.1,.6,.6],[.15,.6667,.6667],[.2,.8667,.8667],[.25,.8667,.8667],[.3,.8667,.8667],[.35,.6667,.6667],[.4,.5333,.5333],[.45,0,0],[.5,0,0],[.55,0,0],[.6,0,0],[.65,0,0],[.7,0,0],[.75,0,0],[.8,0,0],[.85,0,0],[.9,0,0],[.95,0,0],[1,.8,.8]]}},cz:{name:"CoolWarm",pb:256,gamma:1,Fb:{red:[[0,.2298057,.2298057],[.03125,.26623388,.26623388],[.0625,.30386891,.30386891],[.09375,.342804478,.342804478],[.125,.38301334,.38301334],[.15625,.424369608,.424369608],[.1875,
.46666708,.46666708],[.21875,.509635204,.509635204],[.25,.552953156,.552953156],[.28125,.596262162,.596262162],[.3125,.639176211,.639176211],[.34375,.681291281,.681291281],[.375,.722193294,.722193294],[.40625,.761464949,.761464949],[.4375,.798691636,.798691636],[.46875,.833466556,.833466556],[.5,.865395197,.865395197],[.53125,.897787179,.897787179],[.5625,.924127593,.924127593],[.59375,.944468518,.944468518],[.625,.958852946,.958852946],[.65625,.96732803,.96732803],[.6875,.969954137,.969954137],[.71875,
.966811177,.966811177],[.75,.958003065,.958003065],[.78125,.943660866,.943660866],[.8125,.923944917,.923944917],[.84375,.89904617,.89904617],[.875,.869186849,.869186849],[.90625,.834620542,.834620542],[.9375,.795631745,.795631745],[.96875,.752534934,.752534934],[1,.705673158,.705673158]],green:[[0,.298717966,.298717966],[.03125,.353094838,.353094838],[.0625,.406535296,.406535296],[.09375,.458757618,.458757618],[.125,.50941904,.50941904],[.15625,.558148092,.558148092],[.1875,.604562568,.604562568],
[.21875,.648280772,.648280772],[.25,.688929332,.688929332],[.28125,.726149107,.726149107],[.3125,.759599947,.759599947],[.34375,.788964712,.788964712],[.375,.813952739,.813952739],[.40625,.834302879,.834302879],[.4375,.849786142,.849786142],[.46875,.860207984,.860207984],[.5,.86541021,.86541021],[.53125,.848937047,.848937047],[.5625,.827384882,.827384882],[.59375,.800927443,.800927443],[.625,.769767752,.769767752],[.65625,.734132809,.734132809],[.6875,.694266682,.694266682],[.71875,.650421156,.650421156],
[.75,.602842431,.602842431],[.78125,.551750968,.551750968],[.8125,.49730856,.49730856],[.84375,.439559467,.439559467],[.875,.378313092,.378313092],[.90625,.312874446,.312874446],[.9375,.24128379,.24128379],[.96875,.157246067,.157246067],[1,.01555616,.01555616]],blue:[[0,.753683153,.753683153],[.03125,.801466763,.801466763],[.0625,.84495867,.84495867],[.09375,.883725899,.883725899],[.125,.917387822,.917387822],[.15625,.945619588,.945619588],[.1875,.968154911,.968154911],[.21875,.98478814,.98478814],
[.25,.995375608,.995375608],[.28125,.999836203,.999836203],[.3125,.998151185,.998151185],[.34375,.990363227,.990363227],[.375,.976574709,.976574709],[.40625,.956945269,.956945269],[.4375,.931688648,.931688648],[.46875,.901068838,.901068838],[.5,.865395561,.865395561],[.53125,.820880546,.820880546],[.5625,.774508472,.774508472],[.59375,.726736146,.726736146],[.625,.678007945,.678007945],[.65625,.628751763,.628751763],[.6875,.579375448,.579375448],[.71875,.530263762,.530263762],[.75,.481775914,.481775914],
[.78125,.434243684,.434243684],[.8125,.387970225,.387970225],[.84375,.343229596,.343229596],[.875,.300267182,.300267182],[.90625,.259301199,.259301199],[.9375,.220525627,.220525627],[.96875,.184115123,.184115123],[1,.150232812,.150232812]]}},Jy:{name:"Blues",pb:256,gamma:1,Fb:{red:[[0,.9686274528503418,.9686274528503418],[.125,.8705882430076599,.8705882430076599],[.25,.7764706015586853,.7764706015586853],[.375,.6196078658103943,.6196078658103943],[.5,.41960784792900085,.41960784792900085],[.625,.25882354378700256,
.25882354378700256],[.75,.12941177189350128,.12941177189350128],[.875,.0313725508749485,.0313725508749485],[1,.0313725508749485,.0313725508749485]],green:[[0,.9843137264251709,.9843137264251709],[.125,.9215686321258545,.9215686321258545],[.25,.8588235378265381,.8588235378265381],[.375,.7921568751335144,.7921568751335144],[.5,.6823529601097107,.6823529601097107],[.625,.572549045085907,.572549045085907],[.75,.4431372582912445,.4431372582912445],[.875,.3176470696926117,.3176470696926117],[1,.1882352977991104,
.1882352977991104]],blue:[[0,1,1],[.125,.9686274528503418,.9686274528503418],[.25,.9372549057006836,.9372549057006836],[.375,.8823529481887817,.8823529481887817],[.5,.8392156958580017,.8392156958580017],[.625,.7764706015586853,.7764706015586853],[.75,.7098039388656616,.7098039388656616],[.875,.6117647290229797,.6117647290229797],[1,.41960784792900085,.41960784792900085]]}}},Pd={ln:vb,Uz:function(){const a=[];return Object.keys(me).forEach(function(b){me.hasOwnProperty(b)&&a.push({id:b,name:me[b].name})}),
a.sort(function(b,c){b=b.name.toLowerCase();c=c.name.toLowerCase();return b===c?0:b<c?-1:1}),a},sj:kg};class Af{constructor(){this.reset()}reset(){this.l=[1,0,0,1,0,0]}clone(){const a=new Af;return a.l[0]=this.l[0],a.l[1]=this.l[1],a.l[2]=this.l[2],a.l[3]=this.l[3],a.l[4]=this.l[4],a.l[5]=this.l[5],a}multiply(a){const b=this.l[1]*a.l[0]+this.l[3]*a.l[1],c=this.l[0]*a.l[2]+this.l[2]*a.l[3],d=this.l[1]*a.l[2]+this.l[3]*a.l[3],e=this.l[0]*a.l[4]+this.l[2]*a.l[5]+this.l[4],f=this.l[1]*a.l[4]+this.l[3]*
a.l[5]+this.l[5];this.l[0]=this.l[0]*a.l[0]+this.l[2]*a.l[1];this.l[1]=b;this.l[2]=c;this.l[3]=d;this.l[4]=e;this.l[5]=f}invert(){const a=1/(this.l[0]*this.l[3]-this.l[1]*this.l[2]),b=-this.l[1]*a,c=-this.l[2]*a,d=this.l[0]*a,e=a*(this.l[2]*this.l[5]-this.l[3]*this.l[4]),f=a*(this.l[1]*this.l[4]-this.l[0]*this.l[5]);this.l[0]=this.l[3]*a;this.l[1]=b;this.l[2]=c;this.l[3]=d;this.l[4]=e;this.l[5]=f}rotate(a){const b=Math.cos(a);a=Math.sin(a);const c=this.l[1]*b+this.l[3]*a,d=this.l[0]*-a+this.l[2]*
b,e=this.l[1]*-a+this.l[3]*b;this.l[0]=this.l[0]*b+this.l[2]*a;this.l[1]=c;this.l[2]=d;this.l[3]=e}translate(a,b){this.l[4]+=this.l[0]*a+this.l[2]*b;this.l[5]+=this.l[1]*a+this.l[3]*b}scale(a,b){this.l[0]*=a;this.l[1]*=a;this.l[2]*=b;this.l[3]*=b}transformPoint(a,b){return{x:a*this.l[0]+b*this.l[2]+this.l[4],y:a*this.l[1]+b*this.l[3]+this.l[5]}}}const Uh={drawImage:eb,Mt:ob,Rt:Fb,requestAnimationFrame:kc,yw:Pb,LC:Bb,zw:La,Aw:$a,xw:yc,getTransform:function(a){return Yb(a)},Ny:Yb,Ox:Af},oe={Bk:{qg:"precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.0 + color.g*65536.0;if (color.b == 0.0)intensity = -intensity;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}"},
Ck:{qg:"precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.;if (color.a == 0.0)intensity = -intensity;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}"},
Hi:{qg:"precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform float minPixelValue;uniform int invert;varying vec2 v_texCoord;void main() {vec3 color = texture2D(u_image, v_texCoord).xyz;color = color * 256.0 * slope + intercept;float center0 = wc - 0.5 - minPixelValue;float width0 = max(ww, 1.0);color = (color - center0) / width0 + 0.5;gl_FragColor = vec4(color, 1);if (invert == 1)gl_FragColor.rgb = 1. - gl_FragColor.rgb;}"},
nl:{qg:"precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.0 + color.a*65536.0;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}"},
op:{qg:"precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.0;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}"}},
Vh={Bk:{Pg:function(a){const b=a.Oa();a=new Uint8Array(a.width*a.height*3);let c=0;for(let d=0;d<b.length;d++){const e=Math.abs(b[d]);a[c++]=255&e;a[c++]=e>>8;a[c++]=0>b[d]?0:1}return a}},Ck:{Pg:function(a){const b=a.Oa();a=new Uint8Array(a.width*a.height*2);let c=0;for(let d=0;d<b.length;d++)a[c++]=b[d],a[c++]=0>b[d]?0:1;return a}},Hi:{Pg:function(a){const b=a.minPixelValue;let c=0,d=0;const e=a.width*a.height*4;var f=a.width*a.height*3;a=a.Oa();f=new Uint8Array(f);if(0>b)for(;d<e;)f[c++]=a[d++]+
-b,f[c++]=a[d++]+-b,f[c++]=a[d++]+-b,d+=1;else for(;d<e;)f[c++]=a[d++],f[c++]=a[d++],f[c++]=a[d++],d+=1;return f}},nl:{Pg:function(a){const b=a.Oa();a=new Uint8Array(a.width*a.height*2);let c=0;for(let d=0;d<b.length;d++){const e=b[d];a[c++]=255&e;a[c++]=e>>8}return a}},op:{Pg:function(a){return a.Oa()}}},yb={me:"quantantnewimage",gr:"quantantinvalidated",Nl:"quantantprerender",cr:"quantantimagecachemaximumsizechanged",dr:"quantantimagecachepromiseremoved",br:"quantantimagecachefull",oj:"quantantimagecachechanged",
Ar:"quantantwebgltextureremoved",zr:"quantantwebgltexturecachefull",er:"quantantimageloaded",fr:"quantantimageloadfailed",Ip:"quantantelementresized",qa:"quantantimagerendered",jr:"quantantlayeradded",kr:"quantantlayerremoved",vp:"quantantactivelayerchanged",Wg:"quantantelementdisabled",Hp:"quantantelementenabled"},nc=new class{constructor(){this.Wd={};this.aa={}}vb(a,b){0>=a.indexOf(".")||(this.aa[a]=b,this.addEventListener(a.split(".")[0],b))}Ng(a){0>=a.indexOf(".")||!this.aa[a]||(this.removeEventListener(a.split(".")[0],
this.aa[a]),delete this.aa[a])}addEventListener(a,b){0<a.indexOf(".")?this.vb(a,b):(a in this.Wd||(this.Wd[a]=[]),this.Wd[a].push(b))}removeEventListener(a,b){if(0<a.indexOf("."))return void this.Ng(a);if(a in this.Wd){a=this.Wd[a];for(let c=0,d=a.length;c<d;c++)if(a[c]===b)return void a.splice(c,1)}}dispatchEvent(a){if(!(a.type in this.Wd))return!0;const b=this.Wd[a.type];for(let c=0,d=b.length;c<d;c++)b[c].call(this,a);return!a.defaultPrevented}},ud={},Nc=[];let Me=268435456,td=0;const Oe={Bo:function(){for(;0<
Nc.length;){const a=Nc.pop();delete ud[a.X]}td=0},Wt:function(a){if(void 0===a)throw Error("getImageTexture: imageId must not be undefined");a=ud[a];if(void 0!==a)return a.timeStamp=new Date,a.Mn},vv:function(a,b){const c=a.X;if(void 0===a)throw Error("putImageTexture: image must not be undefined");if(void 0===c)throw Error("putImageTexture: imageId must not be undefined");if(void 0===b)throw Error("putImageTexture: imageTexture must not be undefined");if(!0===Object.prototype.hasOwnProperty.call(ud,
c))throw Error("putImageTexture: imageId already in cache");a={X:c,Mn:b,timeStamp:new Date,sizeInBytes:b.sizeInBytes};if(ud[c]=a,Nc.push(a),void 0===b.sizeInBytes)throw Error("putImageTexture: imageTexture.sizeInBytes must not be undefined");if(void 0===b.sizeInBytes.toFixed)throw Error("putImageTexture: imageTexture.sizeInBytes is not a number");td+=a.sizeInBytes;Wa()},zB:function(a){if(void 0===a)throw Error("removeImageTexture: imageId must not be undefined");const b=ud[a];if(void 0===b)throw Error("removeImageTexture: imageId must not be undefined");
return Nc.splice(Nc.indexOf(b),1),td-=b.sizeInBytes,delete ud[a],b.Mn},hw:function(a){if(void 0===a)throw Error("setMaximumSizeBytes: parameter numBytes must not be undefined");if(void 0===a.toFixed)throw Error("setMaximumSizeBytes: parameter numBytes must be a number");Me=a;Wa()}},ne=document.createElement("canvas");let Ia,Cf,Bf,Ne=!1;const $g={ez:xc,xb:{render:function(a){const b=a.image;ne.width=b.width;ne.height=b.height;a=a.viewport;const c=function(e){e=jc(e);return oe.hasOwnProperty(e)?oe[e]:
oe.Hi}(b),d=function(e){var f=Oe.Wt(e.X);if(!f){var k={op:Ia.LUMINANCE,Ck:Ia.LUMINANCE_ALPHA,nl:Ia.LUMINANCE_ALPHA,Bk:Ia.RGB,Hi:Ia.RGB};f=jc(e);k=k[f];const h=Ia.createTexture();Ia.bindTexture(Ia.TEXTURE_2D,h);Ia.texParameteri(Ia.TEXTURE_2D,Ia.TEXTURE_MIN_FILTER,Ia.NEAREST);Ia.texParameteri(Ia.TEXTURE_2D,Ia.TEXTURE_MAG_FILTER,Ia.NEAREST);Ia.texParameteri(Ia.TEXTURE_2D,Ia.TEXTURE_WRAP_S,Ia.CLAMP_TO_EDGE);Ia.texParameteri(Ia.TEXTURE_2D,Ia.TEXTURE_WRAP_T,Ia.CLAMP_TO_EDGE);Ia.pixelStorei(Ia.UNPACK_ALIGNMENT,
1);const n=Vh[f].Pg(e,e.width,e.height);f=(Ia.texImage2D(Ia.TEXTURE_2D,0,k,e.width,e.height,0,k,Ia.UNSIGNED_BYTE,n),{Fw:h,sizeInBytes:e.width*e.height*{Ck:1,nl:2,Bk:3,Hi:3}[f]});Oe.vv(e,f)}return f.Fw}(b);return function(e,f,k,h,n){Ia.clearColor(1,0,0,1);Ia.viewport(0,0,h,n);Ia.clear(Ia.COLOR_BUFFER_BIT|Ia.DEPTH_BUFFER_BIT);Ia.useProgram(e.Kg);Ia.bindBuffer(Ia.ARRAY_BUFFER,Cf);Ia.vertexAttribPointer(e.attributes.gp,2,Ia.FLOAT,!1,0,0);Ia.bindBuffer(Ia.ARRAY_BUFFER,Bf);Ia.vertexAttribPointer(e.attributes.wo,
2,Ia.FLOAT,!1,0,0);for(const g in f){const r=Ia.getUniformLocation(e.Kg,g);if(!r)continue;var l=f[g];const q=l.type;l=l.value;"i"===q?Ia.uniform1i(r,l):"f"===q?Ia.uniform1f(r,l):"2f"===q&&Ia.uniform2f(r,l[0],l[1])}e=Ia;e.bufferData(e.ARRAY_BUFFER,new Float32Array([h,n,0,n,h,0,0,0]),e.STATIC_DRAW);!0;Ia.activeTexture(Ia.TEXTURE0);Ia.bindTexture(Ia.TEXTURE_2D,k);Ia.drawArrays(Ia.TRIANGLE_STRIP,0,4)}(c,{QC:{type:"2f",value:[b.width,b.height]},VC:{type:"f",value:a.B.windowCenter},ZC:{type:"f",value:a.B.windowWidth},
slope:{type:"f",value:b.slope},intercept:{type:"f",value:b.intercept},minPixelValue:{type:"f",value:b.minPixelValue},invert:{type:"i",value:a.invert?1:0}},d,b.width,b.height),ne},su:Jb,fA:function(){return ne},Bu:function(){const a={failIfMajorPerformanceCaveat:!0};try{const b=document.createElement("canvas");return!!window.WebGLRenderingContext&&(b.getContext("webgl",a)||b.getContext("experimental-webgl",a))}catch(b){return!1}}},NC:Oe};Object.defineProperty($g,"isWebGLInitialized",{enumerable:!0,
configurable:!1,get:()=>Ne});const pe=$g,gd=[];let Re=1073741824,Sd=0;const Zc={},oc=[];let Te;const rd=[],Xa={drawImage:eb,Mt:ob,Rt:Fb,requestAnimationFrame:kc,yw:Pb,xw:yc,zw:La,Aw:$a,Qn:Uh,DB:Z,EB:Ua,Di:Eb,Ev:tb,HB:Xb,GB:re,Oy:function(a,b){a=Yb(Va(a));return a.invert(),a.transformPoint(b.x,b.y)},disable:function(a){if(void 0===a)throw Error("disable: element must not be undefined");const b=gd;for(let c=0;c<b.length;c++)if(b[c].element===a){const d={element:a};Ta(a,yb.Wg,d);Ta(nc,yb.Wg,d);b[c].element.removeChild(b[c].canvas);
b[c].canvas=void 0;b.splice(c,1);break}},displayImage:function(a,b,c){if(void 0===a)throw Error("displayImage: parameter element must not be undefined");if(void 0===b)throw Error("displayImage: parameter image must not be undefined");const d=Va(a),e=d.image;if(d.image=b,d.nb&&d.nb.length&&qe(a,b),void 0===d.viewport&&(d.viewport=Fb(d.canvas,b)),c)for(const k in c)null!==c[k]&&(d.viewport[k]=c[k]);let f;void 0!==d.Tn&&(f=(1E3/(Qa()-d.Tn)).toFixed());d.Tn=Qa();Ta(d.element,yb.me,{viewport:d.viewport,
element:d.element,image:d.image,RA:e,Ic:d,frameRate:f});Zb(a)},wz:function(a){a=Va(a);if(void 0===a.image)throw Error("draw: image has not been loaded yet");eb(a)},xz:function(){const a=gd;for(let b=0;b<a.length;b++){const c=a[b];!0===c.nd&&eb(c,!0)}},enable:function(a,b){if(void 0===a)throw Error("enable: parameter element cannot be undefined");b&&b.xb&&"webgl"===b.xb.toLowerCase()&&yd(b);const c={element:a,canvas:se(a),image:void 0,nd:!1,Eg:!0,options:b,nb:[],data:{},F:{},SC:Pe()};ab(c);Ta(nc,yb.Hp,
c);tc(a,!0);(function f(e){void 0!==c.canvas&&(Ta(c.element,yb.Nl,{Ic:c,timestamp:e}),c.Eg&&(void 0!==c.image||0<c.nb.length)&&ac(c,c.nd),kc(f))})()},Xz:function(a,b){a=Va(a);return!1===a.data.hasOwnProperty(b)&&(a.data[b]={}),a.data[b]},xB:function(a,b){delete Va(a).data[b]},Ia:Va,vy:ab,St:vd,Zz:function(){return gd},wy:function(a,b,c){const d=`${ub()+ub()}-${ub()}-${ub()}-${ub()}-${ub()}${ub()}${ub()}`,e=Va(a),f=e.nb;let k;b&&(k=Fb(e.canvas,b),c&&c.viewport&&(k=Object.assign(k,c.viewport)));!1!==
e.Ti&&(e.Ti=!0);c={image:b,od:d,viewport:k,options:c||{},F:{}};return f.length&&b&&zc(f[0],c),f.push(c),$b(yb.jr,e,d),1===f.length&&b&&wd(a,d),d},AB:function(a,b){const c=Va(a),d=c.nb,e=c.nb.findIndex(f=>f.od===b);-1!==e&&(d.splice(e,1),b===c.Eh&&d.length&&wd(a,d[0].od),$b(yb.kr,c,b))},bA:sb,cA:Ac,hA:Qd,PB:wd,Qz:Rd,mB:function(a){a=Va(a);a.nb=[];delete a.Eh;delete a.Vn},jC:qe,Mz:Oc,Wz:function(a,b){return Fb(Va(a).canvas,b)},tg:function(a){return Va(a).image},eA:function(a,b,c,d,e){b=Qe(a,b,c,d,e);
a=Va(a);a=bb(a.image.slope,a.image.intercept,a.viewport.rc);return b.map(a)},$t:Qe,va:function(a){a=Va(a).viewport;if(void 0!==a)return Object.assign({},a)},Ke:function(a,b,c){if(void 0===b)throw Error("loadImage: parameter imageId must not be undefined");const d=uc(b);return void 0!==d?d.promise:Pc(a,b,c).promise},Ik:function(a,b){if(void 0===a)throw Error("loadAndCacheImage: parameter imageId must not be undefined");let c=uc(a);return void 0!==c||(c=Pc(a,b),Td(a,c)),c.promise},zv:function(a,b,c){a[b]=
c},Pw:function(a,b){delete a[b]},vB:function(a){const b=Te;return Te=a,b},zA:function(a){const b=Va(a);b.nd=!0;b.Eg=!0;Ta(a,yb.gr,{element:a})},vu:function(a){vd(a).forEach(function(b){eb(b,!0)})},Ka:function(a,b,c){var d=Va(a);if(void 0===d.image)throw Error("image has not been loaded yet");const e=a.getBoundingClientRect();a=e.width/a.offsetWidth;b=(b-e.left-window.pageXOffset)/a;c=(c-e.top-window.pageYOffset)/a;d=Yb(d);return d.invert(),d.transformPoint(b,c)},Z:function(a,b){return Yb(Va(a)).transformPoint(b.x,
b.y)},reset:function(a){const b=Va(a);b.viewport=Fb(b.canvas,b.image);Zb(a)},resize:tc,nw:Kb,Wa:function(a,b){const c=Va(a);if(void 0===c.viewport&&(c.viewport=Fb(c.canvas)),b)for(const d in b)null!==b[d]&&(c.viewport[d]=b[d]);c.viewport.B.windowWidth&&(c.viewport.B.windowWidth=Math.max(b.B.windowWidth,1E-6));c.viewport.scale&&(c.viewport.scale=Math.max(b.scale,1E-4));c.viewport.rotation%=360;0>c.viewport.rotation&&(c.viewport.rotation+=360);c.image&&Zb(a)},A:Zb,iB:Ud,IB:{Yy:Eb,jA:tb,XC:Xb,lB:Ua,
EA:Z,OC:re},xk:{xk:Zc,Ly:oc,hw:function(a){if(void 0===a)throw Error("setMaximumSizeBytes: parameter numBytes must not be undefined");if(void 0===a.toFixed)throw Error("setMaximumSizeBytes: parameter numBytes must be a number");Re=a;Ta(nc,yb.cr);Ab()},nB:Td,qn:uc,yB:te,Rz:Se,Bo:function(){for(;0<oc.length;)te(oc[0].X)},Py:function(a,b){const c=Zc[a];c&&c.yk.promise.then(function(d){const e=b-d.sizeInBytes;d.sizeInBytes=b;c.sizeInBytes=b;Sd+=e;Ta(nc,yb.oj,{action:"changeImageSize",image:d})})}},xa:{vs:function(a,
b=0){let c;for(c=0;c<rd.length&&!(rd[c].priority<=b);c++);rd.splice(c,0,{priority:b,Ao:a})},Av:function(a){for(let b=0;b<rd.length;b++)if(rd[b].Ao===a){rd.splice(b,1);break}},get:function(a,b,c){for(let d=0;d<rd.length;d++){const e=rd[d].Ao(a,b,c);if(void 0!==e)return e}}},WC:pe,Ha:Pd,$y:Ue,az:function(a,b){return Ue(Va(a).image,b)},KB:Vd,da:yb,Jz:nc,PC:Ta};sa.prototype={constructor:sa,set(a,b,c){return this.x=a,this.y=b,this.z=c,this},cb(a){return this.x=a.x,this.y=a.y,this.z=a.z,this},add(a,b){return void 0!==
b?(console.warn("DEPRECATED: Vector3's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.Bm(a,b)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this)},Bm(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this},sub(a,b){return void 0!==b?(console.warn("DEPRECATED: Vector3's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.Si(a,b)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this)},Si(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this},multiply(a,
b){return void 0!==b?(console.warn("DEPRECATED: Vector3's .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.Wu(a,b)):(this.x*=a.x,this.y*=a.y,this.z*=a.z,this)},dc(a){return this.x*=a,this.y*=a,this.z*=a,this},Wu(a,b){return this.x=a.x*b.x,this.y=a.y*b.y,this.z=a.z*b.z,this},yt(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},min(a){return this.x>a.x&&(this.x=a.x),this.y>a.y&&(this.y=a.y),this.z>a.z&&(this.z=a.z),this},max(a){return this.x<
a.x&&(this.x=a.x),this.y<a.y&&(this.y=a.y),this.z<a.z&&(this.z=a.z),this},Ts(a,b){return this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x),this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y),this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=b.z),this},floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=
Math.round(this.z),this},Gc(a){return this.x*a.x+this.y*a.y+this.z*a.z},Hk(){return this.x*this.x+this.y*this.y+this.z*this.z},length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize(){return this.yt(this.length())},hd(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.jt(a,b);b=this.x;let c=this.y,d=this.z;return this.x=c*a.z-d*a.y,this.y=d*a.x-b*a.z,this.z=b*a.y-c*a.x,this},jt(a,
b){let c=a.x,d=a.y;a=a.z;let e=b.x,f=b.y;b=b.z;return this.x=d*b-a*f,this.y=a*e-c*b,this.z=c*f-d*e,this},Cs(a){a=this.Gc(a)/(this.length()*a.length());return Math.acos(zd(a,-1,1))},Vm(a){return Math.sqrt(this.Wm(a))},Wm(a){const b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},clone(){return new sa(this.x,this.y,this.z)}};class ah{constructor(a,b){this.start=void 0!==a?a:new sa;this.end=void 0!==b?b:new sa}set(a,b){return this.start.cb(a),this.end.cb(b),this}cb(a){return this.start.cb(a.start),
this.end.cb(a.end),this}center(a){return(a||new sa).Bm(this.start,this.end).dc(.5)}Sm(a){return(a||new sa).Si(this.end,this.start)}xt(){return this.start.Wm(this.end)}distance(){return this.start.Vm(this.end)}at(a,b){b=b||new sa;return this.Sm(b).dc(a).add(this.start)}clone(){return(new ah).cb(this)}Dk(a){var b=this.end.clone().sub(this.start),c=a.end.clone().sub(a.start),d=a.start.clone().sub(this.start);const e=b.clone().hd(c);c=d.clone().hd(c);if(0!==d.Gc(b)&&(d=c.Gc(e)/e.Hk(),!(100<d||isNaN(d))))return b=
this.start.clone().add(b.clone().dc(d)),b.clone().sub(a.start).Hk()+b.clone().sub(a.end).Hk()<=a.xt()?b:void 0}}const Wh=ah,bh={og:function(a,b){var c=Math,d=c.sqrt;var e=ue(a.start,a.end);0===e?a=ue(b,a.start):(e=((b.x-a.start.x)*(a.end.x-a.start.x)+(b.y-a.start.y)*(a.end.y-a.start.y))/e,a=ue(b,0>e?a.start:1<e?a.end:{x:a.start.x+e*(a.end.x-a.start.x),y:a.start.y+e*(a.end.y-a.start.y)}));return d.call(c,a)},Dk:function(a,b){const c={};var d;let e,f,k,h,n;var l;let g,r,q,F=a.start.x,J=a.start.y,P=
a.end.x;a=a.end.y;let S=b.start.x,X=b.start.y,oa=b.end.x;b=b.end.y;if(d=a-J,f=F-P,h=P*J-F*a,r=d*S+f*X+h,q=d*oa+f*b+h,0===r||0===q||Ad(r)!==Ad(q))if(e=b-X,k=S-oa,n=oa*X-S*b,l=e*F+k*J+n,g=e*P+k*a+n,0===l||0===g||Ad(l)!==Ad(g))return l=d*k-e*f,d=parseFloat((e*h-d*n)/l),c.x=parseFloat((f*n-k*h)/l),c.y=d,c}};Ha.prototype.io=function(a,b){var c=a.elements,d=b.elements;b=this.elements;a=c[0];let e=c[4],f=c[8],k=c[12],h=c[1],n=c[5],l=c[9],g=c[13],r=c[2],q=c[6],F=c[10],J=c[14],P=c[3],S=c[7],X=c[11];c=c[15];
let oa=d[0],ta=d[4],qa=d[8],Ma=d[12],Oa=d[1],Ka=d[5],zb=d[9],nb=d[13],Lb=d[2],qc=d[6],hb=d[10],ed=d[14],Ld=d[3],Md=d[7],Nd=d[11];d=d[15];return b[0]=a*oa+e*Oa+f*Lb+k*Ld,b[4]=a*ta+e*Ka+f*qc+k*Md,b[8]=a*qa+e*zb+f*hb+k*Nd,b[12]=a*Ma+e*nb+f*ed+k*d,b[1]=h*oa+n*Oa+l*Lb+g*Ld,b[5]=h*ta+n*Ka+l*qc+g*Md,b[9]=h*qa+n*zb+l*hb+g*Nd,b[13]=h*Ma+n*nb+l*ed+g*d,b[2]=r*oa+q*Oa+F*Lb+J*Ld,b[6]=r*ta+q*Ka+F*qc+J*Md,b[10]=r*qa+q*zb+F*hb+J*Nd,b[14]=r*Ma+q*nb+F*ed+J*d,b[3]=P*oa+S*Oa+X*Lb+c*Ld,b[7]=P*ta+S*Ka+X*qc+c*Md,b[11]=
P*qa+S*zb+X*hb+c*Nd,b[15]=P*Ma+S*nb+X*ed+c*d,this};Ha.prototype.multiply=function(a,b){return void 0!==b?(console.warn("DEPRECATED: Matrix4's .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.io(a,b)):this.io(this,a)};Ha.prototype.dc=function(a){const b=this.elements;return b[0]*=a,b[4]*=a,b[8]*=a,b[12]*=a,b[1]*=a,b[5]*=a,b[9]*=a,b[13]*=a,b[2]*=a,b[6]*=a,b[10]*=a,b[14]*=a,b[3]*=a,b[7]*=a,b[11]*=a,b[15]*=a,this};Ha.prototype.set=function(a,b,c,d,e,f,k,h,n,l,g,
r,q,F,J,P){const S=this.elements;return S[0]=a,S[4]=b,S[8]=c,S[12]=d,S[1]=e,S[5]=f,S[9]=k,S[13]=h,S[2]=n,S[6]=l,S[10]=g,S[14]=r,S[3]=q,S[7]=F,S[11]=J,S[15]=P,this};Na.prototype={constructor:Na,set(a,b){return this.Va.cb(a),this.lc=b,this},al(a,b){return this.Va.cb(a),this.lc=-b.Gc(this.Va),this},gC:function(){const a=new sa,b=new sa;return function(c,d,e){d=a.Si(e,d).hd(b.Si(c,d)).normalize();return this.al(d,c),this}}(),cb(a){return this.Va.cb(a.Va),this.lc=a.lc,this},normalize(){const a=1/this.Va.length();
return this.Va.dc(a),this.lc*=a,this},og(a){return this.Va.Gc(a)+this.lc},Dk:function(){const a=new sa;return function(b,c){c=c||new sa;const d=b.Sm(a);var e=this.Va.Gc(d);if(0===e)return 0===this.og(b.start)?c.cb(b.start):void 0;e=-(b.start.Gc(this.Va)+this.lc)/e;return 0>e||1<e?void 0:c.cb(d).dc(e).add(b.start)}}(),uu(a){var b=this.Va.clone().hd(a.Va);b={origin:new sa,direction:b};if(1E-10>this.Va.clone().hd(a.Va).length)return b.direction=new sa,b;var c=this.lc;const d=a.lc,e=this.Va.clone().Gc(a.Va),
f=-(c-d*e)/(1-e*e);c=-(d-c*e)/(1-e*e);return b.origin=this.Va.clone().dc(f).add(a.Va.clone().dc(c)),b},translate(a){return this.lc=this.lc-a.Gc(this.Va),this},clone(){return(new Na).cb(this)}};const vf={Sf:Wh,Lu:bh,Ts:zd,oz:function(a){return Math.PI/180*a},pB:function(a){return 180/Math.PI*a},sign:Ad,Dx:Ha,Ql:Na,R:{Sa:Ve,cb:function(a){return{x:a.x,y:a.y}},ec:function(a){return{x:a.pageX,y:a.pageY}},distance:We,sz:Wd,Pn:function(a,b){return!(a.x<b.left||a.x>b.left+b.width||a.y<b.top||a.y>b.top+b.height)},
bn:function(a,b){const c=[];let d;return a.forEach(function(e,f){e=We(e,b);c.push(e);d=0===f?e:Math.min(e,d)}),a[c.indexOf(d)]}},oB:function(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1},rect:{og:function(a,b){let c=655535;return[{start:{x:a.left,y:a.top},end:{x:a.left+a.width,y:a.top}},{start:{x:a.left+a.width,y:a.top},end:{x:a.left+a.width,y:a.top+a.height}},{start:{x:a.left+a.width,y:a.top+a.height},end:{x:a.left,y:a.top+a.height}},{start:{x:a.left,y:a.top+a.height},end:{x:a.left,
y:a.top}}].forEach(function(d){d=bh.og(d,b);d<c&&(c=d)}),c},aA:function(a,b){const c={S:{},J:{}};var d,e;const f=Xd(a),k=Xd(b);if(d=0<=a.width?0<=b.width?!(f.J.x<=k.S.x||k.J.x<=f.S.x):!(f.J.x<=k.J.x||k.S.x<=f.S.x):0<=b.width?!(f.S.x<=k.S.x||k.J.x<=f.J.x):!(f.S.x<=k.J.x||k.S.x<=f.J.x),e=0<=a.height?0<=b.height?!(f.J.y<=k.S.y||k.J.y<=f.S.y):!(f.J.y<=k.J.y||k.S.y<=f.S.y):0<=b.height?!(f.S.y<=k.S.y||k.J.y<=f.J.y):!(f.S.y<=k.J.y||k.top<=f.J.y),d&&e)return d=Xd(a),e=Xd(b),0<=a.width?0<=b.width?(c.S.x=Math.max(d.S.x,
e.S.x),c.J.x=Math.min(d.J.x,e.J.x)):(c.S.x=Math.max(d.S.x,e.J.x),c.J.x=Math.min(d.J.x,e.S.x)):0<=b.width?(c.S.x=Math.min(d.S.x,e.J.x),c.J.x=Math.max(d.J.x,e.S.x)):(c.S.x=Math.min(d.S.x,e.S.x),c.J.x=Math.max(d.J.x,e.J.x)),0<=a.height?0<=b.height?(c.S.y=Math.max(d.S.y,e.S.y),c.J.y=Math.min(d.J.y,e.J.y)):(c.S.y=Math.max(d.S.y,e.J.y),c.J.y=Math.min(d.J.y,e.S.y)):0<=b.height?(c.S.y=Math.min(d.S.y,e.J.y),c.J.y=Math.max(d.J.y,e.S.y)):(c.S.y=Math.min(d.S.y,e.S.y),c.J.y=Math.max(d.J.y,e.J.y)),c}},Xe:sa};var Xh=
Ea(2);const pa={j:Xa,H:vf,Hammer:Ea.n(Xh)()};let lg,Df=!0;const Yh={enable:function(a){Zd(a);a.addEventListener("mousedown",ve);a.addEventListener("mousemove",Bd);a.addEventListener("dblclick",Yd)},disable:Zd};let ch=1,dh=2;const ae={AC:function(a){ch=a},ug:function(){return ch},QB:function(a){dh=a},Nt:function(){return dh}};let Yf=15,eh=`${Yf}px Arial`,fh="transparent";const dd={fw:function(a){eh=a},mk:function(){return eh},fC:function(a){Yf=a},sg:function(){return Yf},RB:function(a){fh=a},Ot:function(){return fh}},
Ze=we(Ye);Ze.setConfiguration({color:"white",lineWidth:2,shadowColor:"black",shadowBlur:4});Ze.disable=function(a){a.removeEventListener(pa.j.da.qa,Ye);pa.j.A(a)};const Zh=Ze,mg=["mousewheel","DOMMouseScroll"],$h={enable:function(a){af(a);mg.forEach(b=>{a.addEventListener(b,$e)})},disable:af};let ng,og;const pg=Cd.bind(null,0),qg=Cd.bind(null,1),rg=["mousedown","mouseup"],sg=["touchstart","touchend"],vg={enable:function(a){cf(a);ze(a,rg,0);ze(a,sg,1)},disable:cf},Ec={};let Mb,ib,Hb,ld,Gb,tg,Gc,Ff,
df,Dd=1,ug=0,Ef=!1,Fc=!1;const ai={enable:function(a){Ed(a);var b=pa.Hammer;const c=new b.Manager(a,{inputClass:b.Mx?b.PointerEventInput:b.TouchInput});var d=new b.Pan({pointers:0,direction:b.DIRECTION_ALL,threshold:0});const e=new b.Pinch({threshold:0}),f=new b.Rotate({threshold:0});e.recognizeWith(d);e.recognizeWith(f);f.recognizeWith(d);b=new b.Tap({event:"doubletap",taps:2,interval:1500,threshold:50,posThreshold:50});b.recognizeWith(d);c.add([b,d,f,e]);c.on("tap doubletap panstart panmove panend pinchstart pinchmove rotatemove",
bc);vg.enable(a);["touchstart","touchend"].forEach(k=>{a.addEventListener(k,bc)});d=Ub("touchInput",a);d.hu=c;Qc("touchInput",a,d)},disable:Ed};let wf;const cd=md(function(a){const b=a.detail,c=b.element,d=Ub("zoom",c);Qb(b.which,d.sc)&&(wf=b.Ra,c.addEventListener(N.wa,ce),c.addEventListener(N.$a,Nb),c.addEventListener(N.Za,Nb),a.preventDefault(),a.stopPropagation())},"zoom");cd.Ri={default:Ae,translate:function(a,b){const c=a.element;var d=a.image,e=cd.getConfiguration();a=bd(a.viewport,b);var f=
0,k=0;0>b?3>a.scale&&(.01>Math.abs(a.$.x)?a.$.x=0:f=a.$.x/8,.01>Math.abs(a.$.y)?a.$.y=0:k=a.$.y/8):(e&&e.sv&&cc(wf.image,d),e={x:d.width/2-wf.image.x,y:d.height/2-wf.image.y},e=Fd(e,a),b=a.$.x-e.x,d=a.$.y-e.y,.01>Math.abs(b)?a.$.x=e.x:f=b/8,.01>Math.abs(d)?a.$.y=e.y:k=d/8);a.$.x-=f;a.$.y-=k;pa.j.Wa(c,a)},$C:function(a,b){const c=a.element;a=bd(a.viewport,b);pa.j.Wa(c,a)}};cd.qb=Ae;const bi=be(function(a){a=a.detail;var b=-a.direction/4;const c=cd.getConfiguration();c&&c.invert&&(b*=-1);b=bd(a.viewport,
b);pa.j.Wa(a.element,b)}),ci=(le=function(a){var b=a.detail;a=pa.j;var c=cd.getConfiguration();const d=b.viewport,e=b.element;d.scale+=b.Sv*d.scale;c.uf&&d.scale>c.uf?d.scale=c.uf:c.wf&&d.scale<c.wf&&(d.scale=c.wf);a.Wa(e,d);c=a.Ka(e,b.Ra.page.x,b.Ra.page.y);b={x:b.Ra.image.x-c.x,y:b.Ra.image.y-c.y};b=Fd(b,d);d.$.x-=b.x;d.$.y-=b.y;a.Wa(e,d)},{ia(a){a.removeEventListener(N.$b,le);a.addEventListener(N.$b,le)},disable(a){a.removeEventListener(N.$b,le)},enable(a){a.removeEventListener(N.$b,le)},W(a){a.removeEventListener(N.$b,
le)}}),di=ad(ce,"zoom");var le;const ei=md(function(a){const b=a.detail,c=b.element,d=Ub("pan",c);Qb(b.which,d.sc)&&(c.addEventListener(N.wa,de),c.addEventListener(N.$a,vc),c.addEventListener(N.Za,vc),a.preventDefault(),a.stopPropagation())},"pan"),fi=ad(de,"pan"),Be=md(function(a){const b=a.detail,c=b.element,d=Ub("wwwc",c);Qb(b.which,d.sc)&&(c.addEventListener(N.wa,Rc),c.addEventListener(N.$a,ee),c.addEventListener(N.Za,ee),a.preventDefault(),a.stopPropagation())},"wwwc");Be.Ri={default:fe};Be.qb=
fe;const gi=ad(function(a){const b=a.detail;a.stopImmediatePropagation();var c=(b.image.maxPixelValue*b.image.slope+b.image.intercept-(b.image.minPixelValue*b.image.slope+b.image.intercept))/1024;a=b.Na.page.x*c;c*=b.Na.page.y;const d=Be.getConfiguration();d.orientation?0===d.orientation?(b.viewport.B.windowWidth+=a,b.viewport.B.windowCenter+=c):(b.viewport.B.windowWidth+=c,b.viewport.B.windowCenter+=a):(b.viewport.B.windowWidth+=a,b.viewport.B.windowCenter+=c);b.element.Du=!1;pa.j.Wa(b.element,b.viewport)});
let gh;const Dh={dw:function(a){gh=a.currentPoints.canvas},Vz:function(){return gh}},ff={value:!1},wg=[N.Kb,N.We,N.$b,N.ib,N.ka];let Zf="white",xf="greenyellow",hh="transparent",ih=xf;const Id={setFillColor:function(a){hh=a},$z:function(){return hh},ow:function(a){Zf=a},bu:function(){return Zf},cw:function(a){xf=a},Pz:function(){return xf},Zh:function(a){return a.color?a.color:a.active?xf:Zf},kw:function(a){ih=a},Yt:function(){return ih}},xg=Gd({gd:De,Ja:Uc,za:gf,fa:"probe"}),hi=Aa({gd:De,Ja:Uc,za:gf,
fa:"probe"}),If=Gd({gd:nd,Ja:Vc,za:od,fa:"length"}),ii=Aa({gd:nd,Ja:Vc,za:od,fa:"length"}),ec=Gd({gd:wc,ac:function(a){const b=pa.j,c=wc(a),d=a.element;lc(d,"simpleAngle",c);d.removeEventListener(N.Ba,ec.qd);d.removeEventListener(N.wa,ec.qd);d.removeEventListener(N.hb,ec.yf);d.removeEventListener(N.Ta,ec.xf);b.A(d);ge(a,"simpleAngle",c,c.handles.middle,function(){if(c.active=!1,Tb(a,c.handles))return kb(d,"simpleAngle",c),d.addEventListener(N.Ba,ec.qd),d.addEventListener(N.wa,ec.qd),d.addEventListener(N.hb,
ec.yf),d.addEventListener(N.Ta,ec.xf),void b.A(d);c.handles.end.active=!0;b.A(d);ge(a,"simpleAngle",c,c.handles.end,function(){c.active=!1;Tb(a,c.handles)&&kb(d,"simpleAngle",c);d.addEventListener(N.Ba,ec.qd);d.addEventListener(N.wa,ec.qd);d.addEventListener(N.hb,ec.yf);d.addEventListener(N.Ta,ec.xf);b.A(d);cb(d,N.dh,null)})})},Ja:pd,za:ie,fa:"simpleAngle"}),rc=Aa({gd:wc,ac:function(a){const b=pa.j,c=wc(a),d=a.element;lc(d,"simpleAngle",c);d.removeEventListener(N.Zb,rc.ip);d.removeEventListener(N.rb,
rc.gb);d.removeEventListener(N.ea,rc.ma);d.removeEventListener(N.ka,rc.Fa);b.A(d);Yc(a,"simpleAngle",c,c.handles.middle,function(){if(Tb(a,c.handles))return kb(d,"simpleAngle",c),d.addEventListener(N.Zb,rc.ip),d.addEventListener(N.ea,rc.ma),d.addEventListener(N.rb,rc.gb),d.addEventListener(N.ka,rc.Fa),void b.A(d);Yc(a,"simpleAngle",c,c.handles.end,function(){Tb(a,c.handles)&&(kb(d,"simpleAngle",c),b.A(d));d.addEventListener(N.Zb,rc.ip);d.addEventListener(N.ea,rc.ma);d.addEventListener(N.rb,rc.gb);
d.addEventListener(N.ka,rc.Fa);cb(d,N.dh,null)})})},Ja:pd,za:ie,fa:"simpleAngle"}),Eh=[],ji={Zu:Fe,Am:hf};let Gh;const zg={default:6,tx:{9:6,10:8,default:8},px:{default:6},Hx:{10:8,11:6,12:6,default:6},kx:{default:6},Nx:{default:6}},fc={kf:[],Jf:[],Cf:[]},Kc={kf:0,Jf:0,Cf:0};var Ag=Ra=6;var Bg=5;let kf=!1;const Hh={xy:function(a,b,c,d,e,f,k){if(!fc.hasOwnProperty(c))throw Error("Request type must be one of interaction, thumbnail, or prefetch");a&&b&&(a={type:c,X:b,zi:d,zt:e,Ht:f},(b=pa.j.xk.qn(b))?
b.promise.then(function(h){e(h)},function(h){f(h)}):(k?fc[c].unshift(a):fc[c].push(a),kf=!0))},Ry:function(a){if(!fc.hasOwnProperty(a))throw Error("Request type must be one of interaction, thumbnail, or prefetch");fc[a]=[]},vw:yg,gA:function(){return fc}};let jh,kh,lh;const je={rC:function(a){jh=a},xn:function(){return jh},YB:function(a){kh=a},mn:function(){return kh},ZB:function(a){lh=a},nn:function(){return lh}};var Jf;const Sb=Gd({ac:function(a){function b(f){null===f?kb(c,"arrowAnnotate",d):d.text=
f;d.active=!1;e.A(c);c.addEventListener(N.Ba,Sb.qd);c.addEventListener(N.hb,Sb.yf);c.addEventListener(N.Ta,Sb.xf);c.addEventListener(N.zc,Sb.pi);cb(c,N.aj,null)}const c=a.element,d=lf(a),e=pa.j;lc(c,"arrowAnnotate",d);c.removeEventListener(N.Ba,Sb.qd);c.removeEventListener(N.hb,Sb.yf);c.removeEventListener(N.Ta,Sb.xf);c.removeEventListener(N.zc,Sb.pi);e.A(c);ge(a,"arrowAnnotate",d,d.handles.end,function(){Tb(a,d.handles)&&kb(c,"arrowAnnotate",d);const f=Sb.getConfiguration();void 0===d.text&&f.qk(b,
c);e.A(c)})},gd:lf,Ja:Eg,za:mf,fa:"arrowAnnotate",pi:function(a){function b(l,g,r){!0===r?kb(d,"arrowAnnotate",l):l.text=g;l.active=!1;e.A(d)}const c=a.detail,d=c.element,e=pa.j;var f=Ub("arrowAnnotate",d);let k;if(Qb(c.which,f.sc)){f=Sb.getConfiguration();var h=c.currentPoints.canvas,n=jb(d,"arrowAnnotate");if(n)for(let l=0;l<n.data.length;l++)if(k=n.data[l],mf(d,k,h)||Mc(k.handles.textBox,h))return k.active=!0,e.A(d),f.Ih(k,c,b,d),a.stopImmediatePropagation(),!1}}});Sb.setConfiguration({qk:function(a){a(prompt("Enter your annotation:"))},
Ih:function(a,b,c){c(prompt("Change your annotation:"))},Ym:!1,Wh:!0,Rj:!0,maxWidth:0});const Vb=Aa({ac:function(a){function b(f){null===f?kb(c,"arrowAnnotate",d):d.text=f;d.active=!1;e.A(c);c.addEventListener(N.ib,Vb.Qa);c.addEventListener(N.rb,Vb.gb);c.addEventListener(N.ka,Vb.Fa);cb(c,N.aj,null)}const c=a.element,d=lf(a),e=pa.j;lc(c,"arrowAnnotate",d);c.removeEventListener(N.ib,Vb.Qa);c.removeEventListener(N.rb,Vb.gb);c.removeEventListener(N.ka,Vb.Fa);e.A(c);Yc(a,"arrowAnnotate",d,d.handles.end,
function(){e.A(c);Tb(a,d.handles)&&kb(c,"arrowAnnotate",d);const f=Sb.getConfiguration();void 0===d.text&&f.qk(b,c)})},gd:lf,Ja:Eg,za:mf,fa:"arrowAnnotate",Qa:function(a){function b(l,g,r){!0===r?kb(d,"arrowAnnotate",l):l.text=g;l.active=!1;e.A(d);d.addEventListener(N.ea,Vb.ma);d.addEventListener(N.rb,Vb.gb);d.addEventListener(N.ka,Vb.Fa);cb(d,N.aj,null)}const c=a.detail,d=c.element,e=pa.j;let f;const k=Sb.getConfiguration(),h=c.currentPoints.canvas,n=jb(d,"arrowAnnotate");if(n){if(c.Gn)return d.removeEventListener(N.ea,
Vb.ma),d.removeEventListener(N.rb,Vb.gb),d.removeEventListener(N.ka,Vb.Fa),k.Ih(c.Gn,c,b,d),a.stopImmediatePropagation(),!1;for(let l=0;l<n.data.length;l++)if(f=n.data[l],mf(d,f,h)||Mc(f.handles.textBox,h))return f.active=!0,e.A(d),d.removeEventListener(N.ea,Vb.ma),d.removeEventListener(N.rb,Vb.gb),d.removeEventListener(N.ka,Vb.Fa),k.Ih(f,c,b,d),a.stopImmediatePropagation(),!1;a.preventDefault();a.stopPropagation()}}}),Kd=md(function(a){const b=a.detail,c=b.element,d=Ub("stackScroll",c);if(Qb(b.which,
d.sc))return d.deltaY=0,Qc("stackScroll",c,d),c.addEventListener(N.wa,of),c.addEventListener(N.$a,nf),c.addEventListener(N.Za,nf),a.stopImmediatePropagation(),!1},"stackScroll"),ki=be(function(a){a=a.detail;const b=-a.direction,c=Kd.getConfiguration();let d=!1,e=!0;c&&(d=void 0!==c.loop&&c.loop,e=void 0===c.Pj||c.Pj);Lf(a.element,b,d,e)}),Mf={an:{deltaX:0,deltaY:0}},li=ad(of,"stackScrollTouchDrag",Mf),$f=function(a,b){let c={};const d=[N.Ll];return b&&!0===b.Jt&&d.push(N.Ml),{ia(e){d.forEach(f=>{e.removeEventListener(f,
a);e.addEventListener(f,a)});b&&b.Mj&&b.Mj(e)},disable(e){d.forEach(f=>{e.removeEventListener(f,a)});b&&b.ek&&b.ek(e)},enable(e){d.forEach(f=>{e.removeEventListener(f,a)});b&&b.gk&&b.gk(e)},W(e){d.forEach(f=>{e.removeEventListener(f,a)});b&&b.ak&&b.ak(e)},getConfiguration:()=>c,setConfiguration(e){c=e}}}(function(a){const b=a.detail,c=$f.getConfiguration();c&&c.Ew(b)&&of(a)},Mf);$f.setConfiguration({Ew:a=>3<=a.cv});Kd.Ri={ju:function(a,b,c,d,e,f){b=Math.max(2,a.offsetWidth/Math.max(b.Pa.length,8));
c&&c.Qi&&(b=c.Qi);d=Ub(d,a);let k=d.deltaX||0;k+=e.Na.page.x;Math.abs(k)>=b?(Lf(a,Math.round(k/b),void 0!==c.loop&&c.loop,f),d.deltaX=k%b):d.deltaX=k},vertical:function(a,b,c,d,e,f){b=Math.max(2,a.offsetHeight/Math.max(b.Pa.length,8));c&&c.Qi&&(b=c.Qi);d=Ub(d,a);let k=d.deltaY||0;k+=e.Na.page.y;Math.abs(k)>=b?(Lf(a,Math.round(k/b),void 0!==c.loop&&c.loop,f),d.deltaY=k%b):d.deltaY=k}};Kd.qb=Kd.Ri.lA;const ag=we(function(a){a=a.detail;const b=a.element,c=a.Ic.canvas.width,d=a.Ic.canvas.height;if(!c||
!d)return!1;Cc(pc(a.Ic.canvas),e=>{const f=ag.getConfiguration();var k="horizontal"===f.orientation?{left:0,top:d-6,width:c,height:6}:{left:0,top:0,width:6,height:d};kd(e,k,f.backgroundColor);var h=jb(b,"stack");if(h&&h.data&&h.data.length){k=h.data[0].Pa;h=h.data[0].mb;const n=c/k.length;k=d/k.length;k="horizontal"===f.orientation?{left:n*h,top:d-6,width:n,height:6}:{left:0,top:k*h,width:6,height:k};kd(e,k,f.fillColor)}})});ag.setConfiguration({backgroundColor:"rgb(19, 63, 141)",fillColor:"white",
orientation:"horizontal"});const mi=ag;let Rf,Ih,qd,Wc,mh={ki:300,Jk:5};const Ie={enable:function(a){(Ie.getConfiguration(),Rf)||(Rf=Ge().split(" ")[0]);Qf(a)},ia:function(a,b){Qc("magnify",a,{sc:b});a.removeEventListener(N.hb,ke);a.addEventListener(N.hb,ke);Qf(a)},W:Ig,disable:Ig,getConfiguration:function(){return mh},setConfiguration:function(a){mh=a}},ni={ia:Jg,W:Kg,enable:Jg,disable:Kg},nh=we(function(a){var b=a.detail,c=b.element;if(a=function(l){var g=pa.j;l=g.Ia(l);if((l=g.xa.get("imagePlaneModule",
l.image.X,l.image))&&l.Tb&&l.Ob){g=ma(l.Tb);l=ma(l.Ob);var r=ka(g);return{top:ka(l),bottom:l,left:r,right:g}}}(c)){c=function(l){const g=pa.j,r=g.Ia(l);let q;q={x:r.image.width/2,y:0};const F=g.Z(l,q);q={x:r.image.width/2,y:r.image.height};const J=g.Z(l,q);q={x:5,y:r.image.height/2};const P=g.Z(l,q);return q={x:r.image.width,y:r.image.height/2},{top:F,bottom:J,left:P,right:g.Z(l,q)}}(c);b=pc(b.ze.canvas);var d=1.2*dd.sg()+5,e=Id.bu(),f=Ic(b,a.top,0),k=Ic(b,a.left,0),h=Ic(b,a.right,0),n=Ic(b,a.bottom,
0);Tc(b,a.top,c.top.x-f/2,c.top.y,e);Tc(b,a.left,c.left.x-k/2,c.left.y,e);(f=nh.getConfiguration())&&f.At&&(Tc(b,a.right,c.right.x-h-5,c.right.y,e),Tc(b,a.bottom,c.bottom.x-n/2,c.bottom.y-d,e))}}),Ba={ho:Yh,Zk:Zh,zoom:cd,Uu:$h,Yi:Be,pan:ei,so:fi,jx:bi,probe:xg,length:If,Jw:ai,Zi:gi,ix:ci,up:di,ji:ii,Ai:hi,KC:ji,Zu:Fe,Am:hf,zs:lc,hf:jb,BB:kb,Ae:function(a,b){a=Sc(a).get(a,b);void 0!==a&&(a.data=[])},XB:dc,Yz:Sc,dl:Kd,Og:ki,el:li,Pi:$f,lv:function(a,b,c,d){let e,f;if(void 0===b)throw Error("playClip: element must not be undefined");
const k=jb(b,"stack");if(k&&k.data&&k.data.length){var h=pa.j,n;if(1<k.data.length){var l=jb(b,"stackRenderer");l&&l.data&&l.data.length&&(n=l.data[0])}var g=k.data[0];(l=jb(b,"playClip"))&&l.data&&l.data.length?(e=l.data[0],Nf(e)):(e={mf:void 0,framesPerSecond:30,FA:void 0,frameRate:0,kk:void 0,Kn:!1,ol:!1,speed:1,reverse:!1,loop:!0},lc(b,"playClip",e));(0>c||0<c)&&(e.framesPerSecond=Number(c),e.reverse=0>e.framesPerSecond,e.Kn=!0);!0!==e.Kn&&e.kk&&e.kk.length===g.Pa.length&&(f=function(q,F){let J,
P,S,X=0;const oa=q.length,ta=[];ta.Fk=!1;("number"!=typeof F||0>=F)&&(F=1);for(J=1;J<oa;J++)S=Number(q[J])/F|0,ta.push(S),1===J?P=S:S!==P&&(ta.Fk=!0),X+=S;return 0<ta.length&&(S=ta.Fk?X/ta.length|0:ta[0],ta.push(S)),ta}(e.kk,e.speed));var r=()=>{let q,F,J,P,S=g.mb;const X=g.Pa.length;(e.reverse?S--:S++,!e.loop&&(0>S||S>=X))?(Nf(e),cb(b,N.zp,{element:b})):(S>=X&&(S=0),0>S&&(S=X-1),S!==g.mb&&(F=je.xn(),J=je.mn(),P=je.nn(),F&&F(b),q=!0===g.zi?h.Ke(a,g.Pa[S]):h.Ik(g.Pa[S]),q.then(function(oa){try{if(g.mb=
S,n)n.mb=S,n.render(b,k.data);else{var ta=b.quantantseries;if(ta){var qa=ta.getId();!0===oa.X.startsWith(qa)?h.displayImage(b,oa):console.log("ignore displaying expired image "+oa.X)}}J&&J(b,oa);d&&d.next()}catch(Ma){}},function(oa){const ta=g.Pa[S];P&&P(b,ta,oa)})))};f&&0<f.length&&f.Fk?(e.ol=!0,e.mf=setTimeout(function F(){e.mf=setTimeout(F,f[g.mb]);r()},0)):(e.ol=!1,e.mf=setInterval(r,1E3/Math.abs(e.framesPerSecond)))}},ww:function(a){(a=jb(a,"playClip"))&&a.data&&a.data.length&&Nf(a.data[0])},
NB:mi,vz:function(a){return{ia(b){b.removeEventListener(N.xc,a);b.addEventListener(N.xc,a)},disable(b){b.removeEventListener(N.xc,a)},enable(b){b.removeEventListener(N.xc,a)},W(b){b.removeEventListener(N.xc,a)}}},hl:Id,magnify:Ie,Bg:ni,oo:nh,arrowAnnotate:Sb,Qj:Vb,Ds:ya,Ni:ec,Oi:rc,Rw:function(a,b,c){c!==b&&pa.j.A(c)},ur:function(a,b){function c(q,F){k.enabled&&h.length&&n.length&&(l=!0,n.forEach(function(J){var P=n.indexOf(J);if(-1!==P){P=g.Pa.cp[P];var S=h.indexOf(q);if(-1!==S){S=g.Pa.Yo[S];var X;
S===P?X=0:void 0!==g.Ee[S]&&(X=g.Ee[S][P]);r(k,q,J,F,X)}}}),l=!1)}function d(q){const F=q.detail;!0!==l&&c(q.currentTarget,F)}function e(q){q=q.detail.element;k.remove(q);(function(F){for(const J in Ec)Ec[J]=Ec[J].filter(P=>P.element!==F)})(q)}const f=pa.j,k=this,h=[],n=[];let l=!1;const g={};let r=b;this.enabled=!0;this.$h=function(){h.length&&n.length&&(g.Ee={},g.Pa={Yo:[],cp:[]},h.forEach(function(q){const F=f.Ia(q);if(F&&F.image){var J=F.image.X,P=f.xa.get("imagePlaneModule",J,F.image);if(P&&
P.Rb){var S=Cb(P.Rb);g.hasOwnProperty(F)||(g.Ee[J]={},g.Pa.Yo.push(J),n.forEach(function(X){const oa=f.Ia(X);if(oa&&oa.image){var ta=oa.image.X;(g.Pa.cp.push(ta),q===X)||J===ta||g.Ee[J].hasOwnProperty(ta)||(X=f.xa.get("imagePlaneModule",ta,oa.image))&&X.Rb&&(X=Cb(X.Rb),g.Ee[J][ta]=X.clone().sub(S))}}),Object.keys(g.Ee[J]).length||delete g.Ee[J])}}}))};this.ws=function(q){-1===h.indexOf(q)&&(h.push(q),a.split(" ").forEach(F=>{q.addEventListener(F,d)}),k.$h(),k.Xi())};this.ys=function(q){-1===n.indexOf(q)&&
(n.push(q),k.$h(),r(k,q,q,0),k.Xi())};this.add=function(q){k.ws(q);k.ys(q)};this.Bv=function(q){const F=h.indexOf(q);-1!==F&&(h.splice(F,1),a.split(" ").forEach(J=>{q.removeEventListener(J,d)}),k.$h(),c(q),k.Xi())};this.Cv=function(q){const F=n.indexOf(q);-1!==F&&(n.splice(F,1),k.$h(),r(k,q,q,0),k.Xi())};this.remove=function(q){k.Cv(q);k.Bv(q)};this.Zt=function(){return h};this.displayImage=function(q,F,J){l=!0;f.displayImage(q,F,J);l=!1};this.Wa=function(q,F){l=!0;f.Wa(q,F);l=!1};this.Xi=function(){Lg(h.concat(n)).forEach(function(q){q.removeEventListener(pa.j.da.Wg,
e);q.addEventListener(pa.j.da.Wg,e)})};this.destroy=function(){Lg(h.concat(n)).forEach(function(q){k.remove(q)})}},Jo:{My:Ng,hp:{enable:function(a,b,c){lc(a,"referenceLines",{Cw:b,xb:c||Og});a.removeEventListener(pa.j.da.qa,Sf);a.addEventListener(pa.j.da.qa,Sf);pa.j.A(a)},disable:function(a){a.removeEventListener(pa.j.da.qa,Sf);pa.j.A(a)}},CB:Og},Dm:{Qv:function(a){return{imageIdToolState:a,elementToolState:{},elementViewport:{}}},restore:function(a){if(a.hasOwnProperty("imageIdToolState")&&a.hasOwnProperty("elementToolState")&&
a.hasOwnProperty("elementViewport")){var b=pa.j;return Object.keys(a.elementViewport).forEach(function(c){const d=document.getElementById(c);if(d&&a.elementToolState.hasOwnProperty(c)){var e=Sc(d);e!==Ce(d)&&(e.Wk(a.elementToolState[c]),b.Wa(d,a.elementViewport[c]),b.A(d))}}),a}}},Yu:function(){let a={};return{get:function(b,c){b=pa.j.Ia(b);if(b.image&&!1!==a.hasOwnProperty(b.image.X))return b=a[b.image.X],!1!==b.hasOwnProperty(c)?b[c]:void 0},add:function(b,c,d){b=pa.j.Ia(b);b.image&&!1!==a.hasOwnProperty(b.image.X)||
(a[b.image.X]={});b=a[b.image.X];!1===b.hasOwnProperty(c)&&(b[c]={data:[]});b[c].data.push(d)},clear:function(b){b=pa.j.Ia(b);b.image&&!1!==a.hasOwnProperty(b.image.X)&&delete a[b.image.X]},MB:function(b){return a[b]},LB:function(b,c){a[b]=c},No:function(){return a},Wk:function(b){a=b},Iw:a}}};var oi=Ea(732),bg=Ea.n(oi);const oh=function(){function a(b,c,d,e,f,k,h,n,l){this.Gd=b;this.$q=c;this.Ve=d;this.Yb=e;this.Modality=f;this.Gp=k;this.Slice=h;this.Rr=l;this.te=null}return a.prototype.Al=function(){return null===
this.te&&(this.te=this.Rr()),this.te},a}();var pi=Ea(195);const Pg=function(){function a(){this.O=0;this.uh=!1}return a.prototype.Initialize=function(b){this.O=0;return this.uh="DICM"==pi.h.ij(b,128,4),this.uh?(this.O=132,this.uh=!0):(this.O=0,this.uh=!1),!0},a}();var Tf=Ea(76),Db=Ea(12),Ob=Ea(608);const Tg=function(){function a(){}return a.lr=function(){return ha(this,void 0,void 0,function(){return V(this,function(b){switch(b.label){case 0:return[4,Ea.e(301).then(Ea.bind(Ea,847))];case 1:return b.i(),
[4,Ea.e(256).then(Ea.bind(Ea,53))];case 2:return b.i(),[4,Ea.e(205).then(Ea.bind(Ea,209))];case 3:return b.i(),[4,Ea.e(794).then(Ea.bind(Ea,509))];case 4:return b.i(),[4,Ea.e(769).then(Ea.bind(Ea,296))];case 5:return b.i(),[2]}})})},a.Bp=function(b,c){return ha(this,void 0,void 0,function(){var d,e,f;return V(this,function(k){switch(k.label){case 0:return c.Cd!==Ob.h.Zg()?[3,2]:[4,Ea.e(301).then(Ea.bind(Ea,847))];case 1:case 3:case 5:case 7:case 9:case 11:case 13:return[2,k.i().default()];case 2:return!0!==
b||c.Cd!==Ob.h.Pf()?[3,4]:[4,Ea.e(256).then(Ea.bind(Ea,53))];case 4:return!1!==b||c.Cd!==Ob.h.Pf()?[3,6]:[4,Ea.e(476).then(Ea.bind(Ea,491))];case 6:return c.Cd!==Ob.h.kj()?[3,8]:[4,Ea.e(205).then(Ea.bind(Ea,209))];case 8:return!0!==b||c.Cd!==Ob.h.Of()?[3,10]:[4,Ea.e(794).then(Ea.bind(Ea,509))];case 10:return!1!==b||c.Cd!==Ob.h.Of()?[3,12]:[4,Ea.e(758).then(Ea.bind(Ea,336))];case 12:return c.Cd!==Ob.h.mj()?[3,14]:[4,Ea.e(769).then(Ea.bind(Ea,296))];case 14:return c.Cd!==Ob.h.lj()?[3,17]:[4,Ea.e(62).then(Ea.bind(Ea,
130))];case 15:return d=k.i(),e=function(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var n=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(n instanceof WebAssembly.Module)return new WebAssembly.Instance(n)instanceof WebAssembly.Instance}}catch(l){}return!1}(),[4,(h=e?"jpegls_parser.js":"jpegls_parser_asm.js",new Promise(function(n,l){var g=document.querySelector('script[src="'+h+'"]');if(null===g){var r=document.createElement("script");g=document.querySelector("head");
r.src=h;r.onload=function(){n(r)};r.onerror=function(q){l(q)};g.appendChild(r)}else n(g)}))];case 16:return f=k.i(),[2,new Promise(function(n){if(void 0===f.Dd)JpegLsModule({noInitialRun:!0}).then(function(g){f.Dd=g;g=d.default(g,e);n(g)});else{var l=d.default(f.Dd,e);n(l)}})];case 17:return[2,null]}var h})})},a}();var qi=Ea(698);const Mh=function(){function a(b,c,d,e,f,k,h,n,l){this.th=b;this.Cj=c;this.os=d;this.gh=e;this.Tf=f;this.nm=k;this.eg=h;this.Dl=n;this.Body=l;this.Qc=Array(k)}return a.prototype.Qe=
function(b){var c=this.Qc[b];if(c)return c;c=new qi.h(this.Tf,this.th,this.eg,this.Body,this.Dl);return 0<this.Tf.Wf.length&&(c.Ib=this.Tf.Wf[0]),c.gj=b,c.Ve=Db.h.gq(this.Body,this.Cj,b,this.nm),c.Yb=Db.h.Pq(this.Body,this.Cj),c.Modality=Db.h.kq(this.Body,this.Cj),this.Qc[b]=c,c},a.prototype.Qf=function(){return this.os},a}(),Sg=function(){return function(a,b,c,d,e,f,k,h,n,l,g,r,q){this.Rows=a;this.Ya=b;this.BitsAllocated=c;this.BitsStored=d;this.HighBit=e;this.SamplesPerPixel=f;this.PhotometricInterpretation=
k;this.Rf=h;this.Gl=n;this.qe=l;this.le=g;this.Wf=r;this.zb=q}}();var ph=Ea(751),ri=function(){function a(b,c){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,e){d.__proto__=e}||function(d,e){for(var f in e)Object.prototype.hasOwnProperty.call(e,f)&&(d[f]=e[f])},a(b,c)}return function(b,c){function d(){this.constructor=b}if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");a(b,c);b.prototype=null===c?Object.create(c):
(d.prototype=c.prototype,new d)}}(),si=function(a){function b(){var c=null!==a&&a.apply(this,arguments)||this;return c.Vg=!0,c.Re=!0,c.Se=!0,c}return ri(b,a),b.prototype.Initialize=function(){return!0},b}(E),ti=function(){function a(b,c){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,e){d.__proto__=e}||function(d,e){for(var f in e)Object.prototype.hasOwnProperty.call(e,f)&&(d[f]=e[f])},a(b,c)}return function(b,c){function d(){this.constructor=b}if("function"!=typeof c&&
null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ui=function(a){function b(){var c=null!==a&&a.apply(this,arguments)||this;return c.Vg=!0,c.Re=!0,c.Se=!1,c}return ti(b,a),b.prototype.Initialize=function(){return!0},b}(E),vi=function(){function a(b,c){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,e){d.__proto__=e}||function(d,e){for(var f in e)Object.prototype.hasOwnProperty.call(e,
f)&&(d[f]=e[f])},a(b,c)}return function(b,c){function d(){this.constructor=b}if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),wi=function(a){function b(){var c=null!==a&&a.apply(this,arguments)||this;return c.Vg=!1,c.Re=!1,c.Se=!1,c}return vi(b,a),b.prototype.Initialize=function(c,d,e){var f=!0;this.tm=Array(3);for(var k=0;3>k;k++){this.tm[k]=[];var h=
Db.h.u(c,40,4353+k);if(!h){f=!1;break}var n=new DataView(d.buffer,h.Mb,h.sa);h=n.getInt16(0,e);n=(n.getInt16(2,e),n.getInt16(4,e));var l=Db.h.u(c,40,4609+k);if(!l){f=!1;break}var g=0;l=new DataView(d.buffer,l.Mb,l.sa);for(var r=0;r<h;r++)8===n?g=l.getUint8(r):16===n&&(g=l.getUint16(2*r)),this.tm[k].push(g)}return f},b}(E),xi=function(){function a(b,c){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,e){d.__proto__=e}||function(d,e){for(var f in e)Object.prototype.hasOwnProperty.call(e,
f)&&(d[f]=e[f])},a(b,c)}return function(b,c){function d(){this.constructor=b}if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),yi=function(a){function b(){var c=null!==a&&a.apply(this,arguments)||this;return c.Vg=!0,c.Re=!1,c.Se=!1,c}return xi(b,a),b.prototype.Initialize=function(){return!0},b}(E),zi=function(){function a(b,c){return a=Object.setPrototypeOf||
{__proto__:[]}instanceof Array&&function(d,e){d.__proto__=e}||function(d,e){for(var f in e)Object.prototype.hasOwnProperty.call(e,f)&&(d[f]=e[f])},a(b,c)}return function(b,c){function d(){this.constructor=b}if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Ai=function(a){function b(){var c=null!==a&&a.apply(this,arguments)||this;return c.Vg=!0,c.Re=
!1,c.Se=!1,c}return zi(b,a),b.prototype.Initialize=function(){return!0},b}(E);const Lh=function(){function a(){}return a.sq=function(b){switch(b){case "MONOCHROME1":return new si;case "MONOCHROME2":return new ui;case "PALETTE COLOR":return new wi;case "RGB":return new yi;case "YBR_FULL_422":case "YBR_FULL":return new Ai;default:return null}},a}(),Rg=function(){function a(){}return a.Jl=function(b,c,d){b=new Tf.h(b,c,!1,null,null);return b.Initialize(d),b},a}(),Qg=function(){function a(){}return a.zl=
function(b){switch(b){case "1.2.840.10008.1.2.2":return new B(!1,!1,Ob.h.Zg());case "1.2.840.10008.1.2.1":return new B(!1,!0,Ob.h.Zg());case "1.2.840.10008.1.2":return new B(!0,!0,Ob.h.Zg());case "1.2.840.10008.1.2.4.50":case "1.2.840.10008.1.2.4.51":return new B(!1,!0,Ob.h.Pf());case "1.2.840.10008.1.2.4.57":case "1.2.840.10008.1.2.4.70":return new B(!1,!0,Ob.h.kj());case "1.2.840.10008.1.2.5":return new B(!1,!0,Ob.h.mj());case "1.2.840.10008.1.2.4.91":case "1.2.840.10008.1.2.4.90":return new B(!1,
!0,Ob.h.Of());case "1.2.840.10008.1.2.4.80":case "1.2.840.10008.1.2.4.81":return new B(!1,!0,Ob.h.lj());default:return null}},a}(),Ug=function(){function a(){}return a.Fl=function(b,c){var d=b.Rf;b=b.BitsAllocated;c=c.Ed;if(8===b)return d?new Uint8Array(c.buffer,c.byteOffset,c.byteLength):new Int8Array(c.buffer,c.byteOffset,c.byteLength);if(16===b)return d?new Uint16Array(c.buffer,c.byteOffset,c.byteLength/2):new Int16Array(c.buffer,c.byteOffset,c.byteLength/2);throw Error("Unsupported pixel data");
},a.mq=function(b,c,d){return b?a.Vt(c,d):a.Tt(c,d)},a.Vt=function(b,c){return a.Fl(b.v,c)},a.Tt=function(b,c){return a.Ut(b.v,c)},a.Ut=function(b,c){var d=b.Ya;b=b.Rows;var e=new Uint8Array(d*b*4),f=0;c=c.Ed;c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);for(var k=0;k<b;k++)for(var h=0;h<d;h++){var n=k*d+h;e[f++]=c[3*n];e[f++]=c[3*n+1];e[f++]=c[3*n+2];e[f++]=255}return e},a}(),Bi=function(){function a(){}return a.mr=function(b,c,d){return Fa(this,void 0,void 0,function(){var e,f,k,h,n=this;
return ua(this,function(l){switch(l.label){case 0:return e=[],[4,a.encode(b,c)];case 1:return f=l.i(),k=d,h=new oh(f.width,f.height,"","",k,[],null,function(){return Fa(n,void 0,void 0,function(){return ua(this,function(){return[2,b]})})},function(){return Fa(n,void 0,void 0,function(){return ua(this,function(){return[2,f]})})},function(){return Fa(n,void 0,void 0,function(){return ua(this,function(){throw Error("Method not implemented.");})})}),e.push(h),[2,e]}})})},a.encode=function(b,c){return Fa(this,
void 0,void 0,function(){function d(){return k[0]}var e,f,k,h,n,l,g;return ua(this,function(r){switch(r.label){case 0:return e=window.URL||window.webkitURL,f=e.createObjectURL(b),[4,new Promise(function(q){var F=new Image,J=document.createElement("canvas");F.onload=function(){var P=J.getContext("2d");J.width=F.width;J.height=F.height;P.drawImage(F,0,0);P=P.getImageData(0,0,F.width,F.height).data;q([P,F.width,F.height])};F.src=f})];case 1:return k=r.i(),h=[0,255],n=[],c&&n.push(["0x0008103E",c,!0]),
l=k[1],g=k[2],[2,new ba(h[0],h[1],1,0,127,255,Xa.Di,d,g,l,g,l,!0,0,0,!1,k[0].length,n,127,255,!0,0,null,b.size)]}})})},a}(),Ci=function(){function a(b){this.Wr=b}return a.prototype.ab=function(b){if(!0===this.Wr){var c=new ArrayBuffer(132),d=new DataView(c);return b.ih(d,128,"DICM"),c}return new ArrayBuffer(0)},a}(),Le=function(){function a(b,c,d){this.Or=b;this.Mr=c;this.Y=d}return a.prototype.ab=function(){var b=new ArrayBuffer(4),c=new DataView(b);return c.setUint16(0,this.Or,this.Y),c.setUint16(2,
this.Mr,this.Y),b},a}();var qh=Ea(68);const rh=function(){function a(b,c,d,e,f){this.Gj=b;this.Y=c;this.Bc=d;this.sb=e;this.sa=f}return a.prototype.ab=function(b){if(this.Gj){if(null!==this.sb)throw new RangeError("Implicit VR requires VR value to be null, but VR="+this.sb+" was set");var c=new ArrayBuffer(4);return(new DataView(c)).setUint32(0,this.sa,this.Y),c}if(this.Bc&&-1===qh.h.rl.indexOf(this.sb))throw new RangeError("Unrecognized VR");if(2!==this.sb.length)throw new RangeError("VR length must be 2, but "+
this.sb+" is provided");if(-1===qh.h.Tl.indexOf(this.sb)){c=new ArrayBuffer(4);var d=new DataView(c);return b.ih(d,0,this.sb),d.setUint16(2,this.sa,this.Y),c}return c=new ArrayBuffer(8),d=new DataView(c),b.ih(d,0,this.sb),d.setUint32(4,this.sa,this.Y),c},a.prototype.Bd=function(){return this.sb},a}(),Di=function(){function a(b,c){if(this.wm=b,this.Fr=c,b&&b.length>c)throw new RangeError("Buffer length is"+c+", which cannot hold "+b);}return a.prototype.ab=function(b){var c=new ArrayBuffer(this.Fr);
if(this.wm){var d=new DataView(c);b.ih(d,0,this.wm)}return c},a}(),Ei=function(){function a(b,c){this.Dc=b;this.Y=c}return a.prototype.ab=function(){var b=new ArrayBuffer(2);return(new DataView(b)).setUint16(0,this.Dc,this.Y),b},a}(),Fi=function(){function a(b,c){this.Dc=b;this.Y=c}return a.prototype.ab=function(){var b=new ArrayBuffer(4);return(new DataView(b)).setUint32(0,this.Dc,this.Y),b},a}();var sd=Ea(468);const Gi=function(){function a(){this.g=new Map;this.g.set("0008,0001","UL");this.g.set("0008,0005",
"CS");this.g.set("0008,0006","SQ");this.g.set("0008,0008","CS");this.g.set("0008,0010","SH");this.g.set("0008,0012","DA");this.g.set("0008,0013","TM");this.g.set("0008,0014","UI");this.g.set("0008,0015","DT");this.g.set("0008,0016","UI");this.g.set("0008,0018","UI");this.g.set("0008,001A","UI");this.g.set("0008,001B","UI");this.g.set("0008,0020","DA");this.g.set("0008,0021","DA");this.g.set("0008,0022","DA");this.g.set("0008,0023","DA");this.g.set("0008,0024","DA");this.g.set("0008,0025","DA");this.g.set("0008,002A",
"DT");this.g.set("0008,0030","TM");this.g.set("0008,0031","TM");this.g.set("0008,0032","TM");this.g.set("0008,0033","TM");this.g.set("0008,0034","TM");this.g.set("0008,0035","TM");this.g.set("0008,0040","US");this.g.set("0008,0041","LO");this.g.set("0008,0042","CS");this.g.set("0008,0050","SH");this.g.set("0008,0051","SQ");this.g.set("0008,0052","CS");this.g.set("0008,0053","CS");this.g.set("0008,0054","AE");this.g.set("0008,0055","AE");this.g.set("0008,0056","CS");this.g.set("0008,0058","UI");this.g.set("0008,0060",
"CS");this.g.set("0008,0061","CS");this.g.set("0008,0062","UI");this.g.set("0008,0064","CS");this.g.set("0008,0068","CS");this.g.set("0008,0070","LO");this.g.set("0008,0080","LO");this.g.set("0008,0081","ST");this.g.set("0008,0082","SQ");this.g.set("0008,0090","PN");this.g.set("0008,0092","ST");this.g.set("0008,0094","SH");this.g.set("0008,0096","SQ");this.g.set("0008,009C","PN");this.g.set("0008,009D","SQ");this.g.set("0008,0100","SH");this.g.set("0008,0101","LO");this.g.set("0008,0102","SH");this.g.set("0008,0103",
"SH");this.g.set("0008,0104","LO");this.g.set("0008,0105","CS");this.g.set("0008,0106","DT");this.g.set("0008,0107","DT");this.g.set("0008,0108","LT");this.g.set("0008,010B","CS");this.g.set("0008,010C","UI");this.g.set("0008,010D","UI");this.g.set("0008,010F","CS");this.g.set("0008,0110","SQ");this.g.set("0008,0112","LO");this.g.set("0008,0114","ST");this.g.set("0008,0115","ST");this.g.set("0008,0116","ST");this.g.set("0008,0117","UI");this.g.set("0008,0118","UI");this.g.set("0008,0119","UC");this.g.set("0008,0120",
"UR");this.g.set("0008,0121","SQ");this.g.set("0008,0122","LO");this.g.set("0008,0123","SQ");this.g.set("0008,0124","SQ");this.g.set("0008,0201","SH");this.g.set("0008,0300","SQ");this.g.set("0008,0301","US");this.g.set("0008,0302","LO");this.g.set("0008,0303","CS");this.g.set("0008,0304","US");this.g.set("0008,0306","US");this.g.set("0008,0305","SQ");this.g.set("0008,0307","CS");this.g.set("0008,1000","AE");this.g.set("0008,1010","SH");this.g.set("0008,1030","LO");this.g.set("0008,1032","SQ");this.g.set("0008,103E",
"LO");this.g.set("0008,103F","SQ");this.g.set("0008,1040","LO");this.g.set("0008,1048","PN");this.g.set("0008,1049","SQ");this.g.set("0008,1050","PN");this.g.set("0008,1052","SQ");this.g.set("0008,1060","PN");this.g.set("0008,1062","SQ");this.g.set("0008,1070","PN");this.g.set("0008,1072","SQ");this.g.set("0008,1080","LO");this.g.set("0008,1084","SQ");this.g.set("0008,1090","LO");this.g.set("0008,1100","SQ");this.g.set("0008,1110","SQ");this.g.set("0008,1111","SQ");this.g.set("0008,1115","SQ");this.g.set("0008,1120",
"SQ");this.g.set("0008,1125","SQ");this.g.set("0008,1130","SQ");this.g.set("0008,1134","SQ");this.g.set("0008,113A","SQ");this.g.set("0008,1140","SQ");this.g.set("0008,1145","SQ");this.g.set("0008,114A","SQ");this.g.set("0008,114B","SQ");this.g.set("0008,1150","UI");this.g.set("0008,1155","UI");this.g.set("0008,115A","UI");this.g.set("0008,1160","IS");this.g.set("0008,1161","UL");this.g.set("0008,1162","UL");this.g.set("0008,1163","FD");this.g.set("0008,1164","SQ");this.g.set("0008,1167","UI");this.g.set("0008,1190",
"UR");this.g.set("0008,1195","UI");this.g.set("0008,1196","US");this.g.set("0008,1197","US");this.g.set("0008,1198","SQ");this.g.set("0008,1199","SQ");this.g.set("0008,119A","SQ");this.g.set("0008,1200","SQ");this.g.set("0008,1250","SQ");this.g.set("0008,2110","CS");this.g.set("0008,2111","ST");this.g.set("0008,2112","SQ");this.g.set("0008,2120","SH");this.g.set("0008,2122","IS");this.g.set("0008,2124","IS");this.g.set("0008,2127","SH");this.g.set("0008,2128","IS");this.g.set("0008,2129","IS");this.g.set("0008,212A",
"IS");this.g.set("0008,2130","DS");this.g.set("0008,2132","LO");this.g.set("0008,2133","SQ");this.g.set("0008,2134","FD");this.g.set("0008,2135","SQ");this.g.set("0008,2142","IS");this.g.set("0008,2143","IS");this.g.set("0008,2144","IS");this.g.set("0008,2200","CS");this.g.set("0008,2204","CS");this.g.set("0008,2208","CS");this.g.set("0008,2218","SQ");this.g.set("0008,2220","SQ");this.g.set("0008,2228","SQ");this.g.set("0008,2229","SQ");this.g.set("0008,2230","SQ");this.g.set("0008,2240","SQ");this.g.set("0008,2242",
"SQ");this.g.set("0008,2244","SQ");this.g.set("0008,2246","SQ");this.g.set("0008,2251","SQ");this.g.set("0008,2253","SQ");this.g.set("0008,2255","SQ");this.g.set("0008,2256","ST");this.g.set("0008,2257","SQ");this.g.set("0008,2258","ST");this.g.set("0008,2259","SQ");this.g.set("0008,225A","SQ");this.g.set("0008,225C","SQ");this.g.set("0008,3001","SQ");this.g.set("0008,3010","UI");this.g.set("0008,3011","SQ");this.g.set("0008,3012","UI");this.g.set("0008,4000","LT");this.g.set("0008,9007","CS");this.g.set("0008,9092",
"SQ");this.g.set("0008,9121","SQ");this.g.set("0008,9123","UI");this.g.set("0008,9124","SQ");this.g.set("0008,9154","SQ");this.g.set("0008,9205","CS");this.g.set("0008,9206","CS");this.g.set("0008,9207","CS");this.g.set("0008,9208","CS");this.g.set("0008,9209","CS");this.g.set("0008,9215","SQ");this.g.set("0008,9237","SQ");this.g.set("0008,9410","SQ");this.g.set("0008,9458","SQ");this.g.set("0008,9459","FL");this.g.set("0008,9460","CS");this.g.set("0010,0010","PN");this.g.set("0010,0020","LO");this.g.set("0010,0021",
"LO");this.g.set("0010,0022","CS");this.g.set("0010,0024","SQ");this.g.set("0010,0026","SQ");this.g.set("0010,0027","SQ");this.g.set("0010,0028","US");this.g.set("0010,0030","DA");this.g.set("0010,0032","TM");this.g.set("0010,0033","LO");this.g.set("0010,0034","LO");this.g.set("0010,0035","CS");this.g.set("0010,0040","CS");this.g.set("0010,0050","SQ");this.g.set("0010,0101","SQ");this.g.set("0010,0102","SQ");this.g.set("0010,0200","CS");this.g.set("0010,0201","SQ");this.g.set("0010,0212","UC");this.g.set("0010,0213",
"LO");this.g.set("0010,0214","LO");this.g.set("0010,0215","SQ");this.g.set("0010,0216","SQ");this.g.set("0010,0217","LO");this.g.set("0010,0218","UT");this.g.set("0010,0219","SQ");this.g.set("0010,1000","LO");this.g.set("0010,1001","PN");this.g.set("0010,1002","SQ");this.g.set("0010,1005","PN");this.g.set("0010,1010","AS");this.g.set("0010,1020","DS");this.g.set("0010,1021","SQ");this.g.set("0010,1030","DS");this.g.set("0010,1040","LO");this.g.set("0010,1050","LO");this.g.set("0010,1060","PN");this.g.set("0010,1080",
"LO");this.g.set("0010,1081","LO");this.g.set("0010,1090","LO");this.g.set("0010,1100","SQ");this.g.set("0010,2000","LO");this.g.set("0010,2110","LO");this.g.set("0010,2150","LO");this.g.set("0010,2152","LO");this.g.set("0010,2154","SH");this.g.set("0010,2155","LT");this.g.set("0010,2160","SH");this.g.set("0010,2180","SH");this.g.set("0010,21A0","CS");this.g.set("0010,21B0","LT");this.g.set("0010,21C0","US");this.g.set("0010,21D0","DA");this.g.set("0010,21F0","LO");this.g.set("0010,2201","LO");this.g.set("0010,2202",
"SQ");this.g.set("0010,2203","CS");this.g.set("0010,2210","CS");this.g.set("0010,2292","LO");this.g.set("0010,2293","SQ");this.g.set("0010,2294","SQ");this.g.set("0010,2295","LO");this.g.set("0010,2296","SQ");this.g.set("0010,2297","PN");this.g.set("0010,2298","CS");this.g.set("0010,2299","LO");this.g.set("0010,4000","LT");this.g.set("0010,9431","FL");this.g.set("0018,1164","DS");this.g.set("0020,000D","UI");this.g.set("0020,000E","UI");this.g.set("0020,0010","SH");this.g.set("0020,0011","IS");this.g.set("0020,0012",
"IS");this.g.set("0020,0013","IS");this.g.set("0020,0014","IS");this.g.set("0020,0015","IS");this.g.set("0020,0016","IS");this.g.set("0020,0017","IS");this.g.set("0020,0018","IS");this.g.set("0020,0019","IS");this.g.set("0020,0020","CS");this.g.set("0020,0022","IS");this.g.set("0020,0024","IS");this.g.set("0020,0026","IS");this.g.set("0020,0030","DS");this.g.set("0020,0032","DS");this.g.set("0020,0035","DS");this.g.set("0020,0037","DS");this.g.set("0020,0050","DS");this.g.set("0020,0052","UI");this.g.set("0020,0060",
"CS");this.g.set("0020,0062","CS");this.g.set("0020,0070","LO");this.g.set("0020,0080","CS");this.g.set("0020,00AA","IS");this.g.set("0020,0100","IS");this.g.set("0020,0105","IS");this.g.set("0020,0110","DS");this.g.set("0020,0200","UI");this.g.set("0020,0242","UI");this.g.set("0020,1000","IS");this.g.set("0020,1001","IS");this.g.set("0020,1002","IS");this.g.set("0020,1003","IS");this.g.set("0020,1004","IS");this.g.set("0020,1005","IS");this.g.set("0020,1020","LO");this.g.set("0020,1040","LO");this.g.set("0020,1041",
"DS");this.g.set("0020,1070","IS");this.g.set("0020,1200","IS");this.g.set("0020,1202","IS");this.g.set("0020,1204","IS");this.g.set("0020,1206","IS");this.g.set("0020,1208","IS");this.g.set("0020,1209","IS");this.g.set("0020,31xx","CS");this.g.set("0020,3401","CS");this.g.set("0020,3402","CS");this.g.set("0020,3403","DA");this.g.set("0020,3404","LO");this.g.set("0020,3405","TM");this.g.set("0020,3406","LO");this.g.set("0020,4000","LT");this.g.set("0020,5000","AT");this.g.set("0020,5002","LO");this.g.set("0020,9056",
"SH");this.g.set("0020,9057","UL");this.g.set("0020,9071","SQ");this.g.set("0020,9072","CS");this.g.set("0020,9111","SQ");this.g.set("0020,9113","SQ");this.g.set("0020,9116","SQ");this.g.set("0020,9128","UL");this.g.set("0020,9153","FD");this.g.set("0020,9154","FL");this.g.set("0020,9155","FL");this.g.set("0020,9156","US");this.g.set("0020,9157","UL");this.g.set("0020,9158","LT");this.g.set("0020,9161","UI");this.g.set("0020,9162","US");this.g.set("0020,9163","US");this.g.set("0020,9164","UI");this.g.set("0020,9165",
"AT");this.g.set("0020,9167","AT");this.g.set("0020,9170","SQ");this.g.set("0020,9171","SQ");this.g.set("0020,9172","SQ");this.g.set("0020,9213","LO");this.g.set("0020,9221","SQ");this.g.set("0020,9222","SQ");this.g.set("0020,9228","UL");this.g.set("0020,9238","LO");this.g.set("0020,9241","FL");this.g.set("0020,9245","FL");this.g.set("0020,9246","FL");this.g.set("0020,9247","CS");this.g.set("0020,9248","FL");this.g.set("0020,9249","CS");this.g.set("0020,9250","CS");this.g.set("0020,9251","FD");this.g.set("0020,9252",
"FD");this.g.set("0020,9253","SQ");this.g.set("0020,9254","FD");this.g.set("0020,9255","FD");this.g.set("0020,9256","FD");this.g.set("0020,9257","FD");this.g.set("0020,9301","FD");this.g.set("0020,9302","FD");this.g.set("0020,9307","CS");this.g.set("0020,9308","FD");this.g.set("0020,9309","FD");this.g.set("0020,930A","FD");this.g.set("0020,930B","CS");this.g.set("0020,930C","CS");this.g.set("0020,930D","FD");this.g.set("0020,930E","SQ");this.g.set("0020,930F","SQ");this.g.set("0020,9310","SQ");this.g.set("0020,9311",
"CS");this.g.set("0020,9312","UI");this.g.set("0020,9313","UI");this.g.set("0020,9421","LO");this.g.set("0020,9450","SQ");this.g.set("0020,9453","LO");this.g.set("0020,9518","US");this.g.set("0020,9529","SQ");this.g.set("0020,9536","US");this.g.set("0028,0002","US");this.g.set("0028,0003","US");this.g.set("0028,0004","CS");this.g.set("0028,0005","US");this.g.set("0028,0006","US");this.g.set("0028,0008","IS");this.g.set("0028,0009","AT");this.g.set("0028,000A","AT");this.g.set("0028,0010","US");this.g.set("0028,0011",
"US");this.g.set("0028,0012","US");this.g.set("0028,0014","US");this.g.set("0028,0030","DS");this.g.set("0028,0031","DS");this.g.set("0028,0032","DS");this.g.set("0028,0034","IS");this.g.set("0028,0040","CS");this.g.set("0028,0050","LO");this.g.set("0028,0051","CS");this.g.set("0028,005F","LO");this.g.set("0028,0060","CS");this.g.set("0028,0061","SH");this.g.set("0028,0062","LO");this.g.set("0028,0063","SH");this.g.set("0028,0065","CS");this.g.set("0028,0066","AT");this.g.set("0028,0068","US");this.g.set("0028,0069",
"US");this.g.set("0028,0070","US");this.g.set("0028,0080","US");this.g.set("0028,0081","US");this.g.set("0028,0082","US");this.g.set("0028,0090","CS");this.g.set("0028,0091","US");this.g.set("0028,0092","US");this.g.set("0028,0093","US");this.g.set("0028,0094","US");this.g.set("0028,0100","US");this.g.set("0028,0101","US");this.g.set("0028,0102","US");this.g.set("0028,0103","US");this.g.set("0028,0122","FL");this.g.set("0028,0123","FD");this.g.set("0028,0124","FL");this.g.set("0028,0125","FD");this.g.set("0028,0200",
"US");this.g.set("0028,0300","CS");this.g.set("0028,0301","CS");this.g.set("0028,0302","CS");this.g.set("0028,0303","CS");this.g.set("0028,0304","UI");this.g.set("0028,0400","LO");this.g.set("0028,0401","LO");this.g.set("0028,0402","US");this.g.set("0028,0403","LO");this.g.set("0028,0404","AT");this.g.set("0028,04x0","US");this.g.set("0028,04x1","US");this.g.set("0028,04x2","LO");this.g.set("0028,04x3","AT");this.g.set("0028,0700","LO");this.g.set("0028,0701","CS");this.g.set("0028,0702","AT");this.g.set("0028,0710",
"US");this.g.set("0028,0720","US");this.g.set("0028,0721","AT");this.g.set("0028,0722","US");this.g.set("0028,0730","US");this.g.set("0028,0740","US");this.g.set("0028,08x0","CS");this.g.set("0028,08x2","US");this.g.set("0028,08x3","AT");this.g.set("0028,08x4","US");this.g.set("0028,08x8","AT");this.g.set("0028,0A02","CS");this.g.set("0028,0A04","LO");this.g.set("0028,1040","CS");this.g.set("0028,1041","SS");this.g.set("0028,1050","DS");this.g.set("0028,1051","DS");this.g.set("0028,1052","DS");this.g.set("0028,1053",
"DS");this.g.set("0028,1054","LO");this.g.set("0028,1055","LO");this.g.set("0028,1056","CS");this.g.set("0028,1080","CS");this.g.set("0028,1090","CS");this.g.set("0028,1104","US");this.g.set("0028,1199","UI");this.g.set("0028,1201","OW");this.g.set("0028,1202","OW");this.g.set("0028,1203","OW");this.g.set("0028,1204","OW");this.g.set("0028,1211","OW");this.g.set("0028,1212","OW");this.g.set("0028,1213","OW");this.g.set("0028,1214","UI");this.g.set("0028,1221","OW");this.g.set("0028,1222","OW");this.g.set("0028,1223",
"OW");this.g.set("0028,1224","OW");this.g.set("0028,1300","CS");this.g.set("0028,1350","CS");this.g.set("0028,1351","ST");this.g.set("0028,1352","SQ");this.g.set("0028,135A","CS");this.g.set("0028,1401","SQ");this.g.set("0028,1402","CS");this.g.set("0028,1403","US");this.g.set("0028,1404","SQ");this.g.set("0028,1405","CS");this.g.set("0028,1406","FD");this.g.set("0028,1407","US");this.g.set("0028,1408","OW");this.g.set("0028,140B","SQ");this.g.set("0028,140C","SQ");this.g.set("0028,140D","CS");this.g.set("0028,140E",
"CS");this.g.set("0028,140F","CS");this.g.set("0028,1410","CS");this.g.set("0028,2000","OB");this.g.set("0028,2002","CS");this.g.set("0028,2110","CS");this.g.set("0028,2112","DS");this.g.set("0028,2114","CS");this.g.set("0028,3000","SQ");this.g.set("0028,3003","LO");this.g.set("0028,3004","LO");this.g.set("0028,3010","SQ");this.g.set("0028,3110","SQ");this.g.set("0028,4000","LT");this.g.set("0028,5000","SQ");this.g.set("0028,6010","US");this.g.set("0028,6020","US");this.g.set("0028,6022","LO");this.g.set("0028,6023",
"CS");this.g.set("0028,6030","US");this.g.set("0028,6040","US");this.g.set("0028,6100","SQ");this.g.set("0028,6101","CS");this.g.set("0028,6102","US");this.g.set("0028,6110","US");this.g.set("0028,6112","US");this.g.set("0028,6114","FL");this.g.set("0028,6120","SS");this.g.set("0028,6190","ST");this.g.set("0028,7000","SQ");this.g.set("0028,7001","US");this.g.set("0028,7002","US");this.g.set("0028,7003","US");this.g.set("0028,7004","SH");this.g.set("0028,7005","LO");this.g.set("0028,7006","CS");this.g.set("0028,7007",
"LO");this.g.set("0028,7008","SQ");this.g.set("0028,7009","US");this.g.set("0028,700A","SQ");this.g.set("0028,700B","US");this.g.set("0028,700C","SH");this.g.set("0028,700D","LO");this.g.set("0028,700E","US");this.g.set("0028,700F","SQ");this.g.set("0028,7010","SQ");this.g.set("0028,7011","SQ");this.g.set("0028,7012","SQ");this.g.set("0028,7013","CS");this.g.set("0028,7014","CS");this.g.set("0028,7015","SQ");this.g.set("0028,7016","SQ");this.g.set("0028,7017","US");this.g.set("0028,7018","FL");this.g.set("0028,7019",
"CS");this.g.set("0028,701A","FL");this.g.set("0028,701B","US");this.g.set("0028,701C","SQ");this.g.set("0028,701D","FL");this.g.set("0028,701E","FL");this.g.set("0028,701F","FL");this.g.set("0028,7020","LO");this.g.set("0028,7021","CS");this.g.set("0028,7022","SQ");this.g.set("0028,7023","SQ");this.g.set("0028,7024","SQ");this.g.set("0028,7025","CS");this.g.set("0028,7026","CS");this.g.set("0028,7027","SQ");this.g.set("0028,7028","SQ");this.g.set("0028,7029","CS");this.g.set("0028,702A","LO");this.g.set("0028,702B",
"CS");this.g.set("0028,702C","SQ");this.g.set("0028,702D","SQ");this.g.set("0028,702E","SQ");this.g.set("0028,7FE0","UR");this.g.set("0028,9001","UL");this.g.set("0028,9002","UL");this.g.set("0028,9003","CS");this.g.set("0028,9099","US");this.g.set("0028,9108","CS");this.g.set("0028,9110","SQ");this.g.set("0028,9132","SQ");this.g.set("0028,9145","SQ");this.g.set("0028,9235","CS");this.g.set("0028,9411","FL");this.g.set("0028,9415","SQ");this.g.set("0028,9416","US");this.g.set("0028,9422","SQ");this.g.set("0028,9443",
"SQ");this.g.set("0028,9444","CS");this.g.set("0028,9445","FL");this.g.set("0028,9446","CS");this.g.set("0028,9454","CS");this.g.set("0028,9474","CS");this.g.set("0028,9478","FL");this.g.set("0028,9501","SQ");this.g.set("0028,9502","SQ");this.g.set("0028,9503","SS");this.g.set("0028,9505","SQ");this.g.set("0028,9506","US");this.g.set("0028,9507","US");this.g.set("0028,9520","DS");this.g.set("0028,9537","CS");this.g.set("7FE0,0010","OB")}return a.prototype.Bd=function(b,c){b=sd.h.kh(b)+","+sd.h.kh(c);
return this.g.has(b)?this.g.get(b):null},a}(),sh=function(){function a(b,c,d,e){this.Ac=b;this.xm=c;this.vh=d;this.T=e;this.ra=[];this.se=0}return a.Ap=function(b,c,d,e){b=b*e+d;return[b,(c*e+d-b)/255]},a.prototype.ab=function(b,c,d,e,f){return k=this,h=void 0,l=function(){return function(g,r){function q(oa){return function(ta){return function(qa){if(F)throw new TypeError("Generator is already executing.");for(;S&&(S=0,qa[0]&&(X=0)),X;)try{if(F=1,J&&(P=2&qa[0]?J.return:qa[0]?J.throw||((P=J.return)&&
P.call(J),0):J.next)&&!(P=P.call(J,qa[1])).done)return P;switch(J=0,P&&(qa=[2&qa[0],P.value]),qa[0]){case 0:case 1:P=qa;break;case 4:return X.label++,{value:qa[1],done:!1};case 5:X.label++;J=qa[1];qa=[0];continue;case 7:qa=X.o.pop();X.m.pop();continue;default:if(!((P=0<(P=X.m).length&&P[P.length-1])||6!==qa[0]&&2!==qa[0])){X=0;continue}if(3===qa[0]&&(!P||qa[1]>P[0]&&qa[1]<P[3]))X.label=qa[1];else if(6===qa[0]&&X.label<P[1])X.label=P[1],P=qa;else if(P&&X.label<P[2])X.label=P[2],X.o.push(qa);else{P[2]&&
X.o.pop();X.m.pop();continue}}qa=r.call(g,X)}catch(Ma){qa=[6,Ma],J=0}finally{F=P=0}if(5&qa[0])throw qa[1];return{value:qa[0]?qa[1]:void 0,done:!0}}([oa,ta])}}var F,J,P,S,X={label:0,i:function(){if(1&P[0])throw P[1];return P[1]},m:[],o:[]};return S={next:q(0),throw:q(1),return:q(2)},"function"==typeof Symbol&&(S[Symbol.iterator]=function(){return this}),S}(this,function(){return this.us(),this.rs(c),this.ps(d,e,f),this.ts(b),[2,a.oi(this.ra)]})},new (n=void 0,n=Promise)(function(g,r){function q(P){try{J(l.next(P))}catch(S){r(S)}}
function F(P){try{J(l.throw(P))}catch(S){r(S)}}function J(P){var S;P.done?g(P.value):(S=P.value,S instanceof n?S:new n(function(X){X(S)})).then(q,F)}J((l=l.apply(k,h||[])).next())});var k,h,n,l},a.prototype.us=function(){var b=(new Ci(!0)).ab(this.Ac);this.ra.push(b);this.se+=b.byteLength},a.prototype.rs=function(b){var c=this,d=!1;if(this.vh.forEach(function(f){var k=c.se;c.se=f.Mb+f.sa;k=c.xm.buffer.slice(k,c.se);"0x00020010"===f.jb.toString()&&(k=c.Om(b),d=!0);c.ra.push(k)}),!1===d){var e=c.Om(b);
c.ra.push(e);d=!0}},a.prototype.ts=function(b){var c=(new Le(32736,16,!0)).ab(this.Ac);this.ra.push(c);c=(new rh(!1,!0,!0,"OB",4294967295)).ab(this.Ac);this.ra.push(c);c=(new Le(65534,57344,!0)).ab(this.Ac);this.ra.push(c);c=new ArrayBuffer(4);this.ra.push(c);c=(new Le(65534,57344,!0)).ab(this.Ac);this.ra.push(c);c=(new Fi(b.byteLength,!0)).ab(this.Ac);this.ra.push(c);this.ra.push(b.buffer);c=(new Le(65534,57565,!0)).ab(this.Ac);this.ra.push(c);b=new ArrayBuffer(4);this.ra.push(b)},a.Au=function(b){switch(b){case "0x00100030":case "0x001021B0":case "0x00101040":case "0x00080090":case "0x00080080":case "0x00080081":case "0x00081050":case "0x00100022":case "0x00100035":case "0x00102203":case "0x00102298":case "0x00080094":case "0x00081010":case "0x00102160":case "0x00102180":case "0x00402009":case "0x00402010":case "0x00081040":case "0x00081080":case "0x00100021":case "0x00100033":case "0x00100034":case "0x00101080":case "0x00101081":case "0x00101090":case "0x00102150":case "0x00102152":case "0x001021F0":case "0x00102201":case "0x00102292":case "0x00102299":case "0x00401103":case "0x00404036":case "0x00080092":case "0x00401102":case "0x00102155":case "0x001021B0":case "0x00104000":case "0x00401104":case "0x00402011":case "0x00080090":case "0x00081060":case "0x00081070":case "0x00101001":case "0x00101005":case "0x00101060":case "0x00102297":case "0x00402008":case "0x00404037":case "0x0040A123":case "0x001021D0":case "0x0040A121":case "0x00100032":case "0x0040A122":case "0x0040A120":case "0x00101020":case "0x00101030":case "0x001021C0":case "0x00102293":case "0x00082112":case "0x60003000":case "0x7FE00010":return!0;
default:return!1}},a.prototype.ps=function(b,c,d){var e=this,f=!1,k=!1,h=null;if(this.T.forEach(function(l){var g=l.sa,r=l.Mb;e.se=r+g;var q=l.jb,F=q.Group,J=q.Element;l=l.Bd();(l||(null===h&&(h=new Gi),l=h.Bd(F,J)),l)?(q=q.toString(),"0x00100010"===q?(g=e.dt("UNKNOWN"),e.ra.push(g)):"0x00200013"===q?(g=e.bt(b),e.ra.push(g)):"0x00280002"===q?(g=e.gt(3),e.ra.push(g)):"0x00280004"===q?(g=e.et("RGB"),e.ra.push(g)):"0x00280100"===q?(g=e.Ws(8),e.ra.push(g)):"0x00280101"===q?(g=e.Xs(8),e.ra.push(g)):"0x00280102"===
q?(g=e.$s(7),e.ra.push(g)):"0x00280103"===q?(g=e.ft(0),e.ra.push(g)):"0x00281052"===q?(g=e.Km(c),e.ra.push(g),f=!0):"0x00281053"===q?(g=e.Mm(d),e.ra.push(g),k=!0):!1===a.Au(q)&&(q=[],e.Nj(F,J,!0,q),e.Oj(!1,!0,!0,q,g,l),q.push(e.xm.buffer.slice(r,e.se)),g=a.oi(q),e.ra.push(g))):console.log("Weird tag "+q.toString())}),!1===f){var n=e.Km(c);e.ra.push(n)}!1===k&&(n=e.Mm(d),e.ra.push(n))},a.prototype.Om=function(b){return this.bf(b,"UI",2,16)},a.prototype.dt=function(b){return this.bf(b,"PN",16,16)},
a.prototype.bt=function(b){return this.bf(b.toString(),"IS",32,19)},a.prototype.et=function(b){return this.bf(b,"CS",40,4)},a.prototype.Km=function(b){return this.bf(b.toString(),"DS",40,4178)},a.prototype.Mm=function(b){return this.bf(b.toString(),"DS",40,4179)},a.prototype.bf=function(b,c,d,e){var f=[],k=b.length;return this.Nj(d,e,!0,f),this.Oj(!1,!0,!0,f,k,c),this.xs(b,k,f),a.oi(f)},a.prototype.lg=function(b,c,d){var e=[];return this.Nj(c,d,!0,e),this.Oj(!1,!0,!0,e,2,"US"),this.As(b,2,!0,e),a.oi(e)},
a.prototype.Ws=function(b){return this.lg(b,40,256)},a.prototype.gt=function(b){return this.lg(b,40,2)},a.prototype.Xs=function(b){return this.lg(b,40,257)},a.prototype.$s=function(b){return this.lg(b,40,258)},a.prototype.ft=function(b){return this.lg(b,40,259)},a.prototype.xs=function(b,c,d){b=(new Di(b,c)).ab(this.Ac);d.push(b)},a.prototype.As=function(b,c,d,e){b=(new Ei(b,d)).ab(this.Ac);e.push(b)},a.prototype.Nj=function(b,c,d,e){b=(new Le(b,c,d)).ab(this.Ac);e.push(b)},a.prototype.Oj=function(b,
c,d,e,f,k){b=(new rh(b,c,d,k,f)).ab(this.Ac);e.push(b)},a.oi=function(b){var c=b.reduce(function(f,k){return f+k.byteLength},0),d=new Uint8Array(c),e=0;return b.forEach(function(f){d.set(new Uint8Array(f),e);e+=f.byteLength}),d.buffer},a}(),Hi=function(){function a(){}return a.prototype.ih=function(b,c,d){if(c+d.length>b.byteLength)throw new RangeError("DataView max length="+b.byteLength+", but offset="+c+", length="+length);d=(new TextEncoder).encode(d);(new Uint8Array(b.buffer)).set(d,b.byteOffset+
c)},a}(),Ii=function(){function a(){}return a.Dp=function(b,c,d){var e=document.createElement("canvas");e.width=b.width;e.height=b.height;for(var f=e.getContext("2d"),k=f.getImageData(0,0,e.width,e.height),h=b.Oa(),n=b.color,l=k.data,g=0;g<e.height;g++)for(var r=0;r<e.width;r++){var q=4*(g*e.width+r);if(n){P=h[J=4*(g*e.width+r)];P=a.Yg(P,b);var F=a.Yg(h[J+1],b);J=a.Yg(h[J+2],b);P=a.Xg(P,b.invert,d);F=a.Xg(F,b.invert,d);J=a.Xg(J,b.invert,d);l[q]=P;l[q+1]=F;l[q+2]=J}else{var J,P=h[J=g*e.width+r];P=
a.Yg(P,b);P=a.Xg(P,b.invert,d);l[q]=P;l[q+1]=P;l[q+2]=P}l[q+3]=255}return f.putImageData(k,0,0),new Promise(function(S){e.toBlob(function(X){S(X)},"image/jpeg",c)})},a.Yg=function(b,c){return Math.floor((b-c.minPixelValue)/(c.maxPixelValue-c.minPixelValue)*255)},a.Xg=function(b,c,d){return!1===d?b:c?255-b:b},a}(),th=function(){function a(){}return a.tl=function(b,c,d){return e=this,f=void 0,h=function(){function n(){return F}var l,g,r,q,F,J,P,S,X;return function(oa,ta){function qa(Lb){return function(qc){return function(hb){if(Ma)throw new TypeError("Generator is already executing.");
for(;zb&&(zb=0,hb[0]&&(nb=0)),nb;)try{if(Ma=1,Oa&&(Ka=2&hb[0]?Oa.return:hb[0]?Oa.throw||((Ka=Oa.return)&&Ka.call(Oa),0):Oa.next)&&!(Ka=Ka.call(Oa,hb[1])).done)return Ka;switch(Oa=0,Ka&&(hb=[2&hb[0],Ka.value]),hb[0]){case 0:case 1:Ka=hb;break;case 4:return nb.label++,{value:hb[1],done:!1};case 5:nb.label++;Oa=hb[1];hb=[0];continue;case 7:hb=nb.o.pop();nb.m.pop();continue;default:if(!((Ka=0<(Ka=nb.m).length&&Ka[Ka.length-1])||6!==hb[0]&&2!==hb[0])){nb=0;continue}if(3===hb[0]&&(!Ka||hb[1]>Ka[0]&&hb[1]<
Ka[3]))nb.label=hb[1];else if(6===hb[0]&&nb.label<Ka[1])nb.label=Ka[1],Ka=hb;else if(Ka&&nb.label<Ka[2])nb.label=Ka[2],nb.o.push(hb);else{Ka[2]&&nb.o.pop();nb.m.pop();continue}}hb=ta.call(oa,nb)}catch(ed){hb=[6,ed],Oa=0}finally{Ma=Ka=0}if(5&hb[0])throw hb[1];return{value:hb[0]?hb[1]:void 0,done:!0}}([Lb,qc])}}var Ma,Oa,Ka,zb,nb={label:0,i:function(){if(1&Ka[0])throw Ka[1];return Ka[1]},m:[],o:[]};return zb={next:qa(0),throw:qa(1),return:qa(2)},"function"==typeof Symbol&&(zb[Symbol.iterator]=function(){return this}),
zb}(this,function(oa){switch(oa.label){case 0:return[4,Ii.Dp(b,.01*c,d)];case 1:return l=oa.i(),g=l.size,r=window.URL||window.webkitURL,q=r.createObjectURL(l),[4,new Promise(function(ta){var qa=new Image,Ma=document.createElement("canvas");Ma.height=b.rows;Ma.width=b.columns;qa.onload=function(){var Oa=Ma.getContext("2d");Oa.drawImage(qa,0,0);Oa=Oa.getImageData(0,0,b.columns,b.rows).data;ta(Oa)};qa.src=q})];case 2:return F=oa.i(),J=sh.Ap(b.minPixelValue,b.maxPixelValue,b.intercept,b.slope),P=J[0],
S=J[1],X=4*b.rows*b.height,[2,[new ba(0,255,S,P,b.windowCenter,b.windowWidth,Xa.Di,n,b.rows,b.columns,b.rows,b.columns,!0,b.columnPixelSpacing,b.rowPixelSpacing,b.invert,X,b.descriptions,b.defaultWindowCenter,b.defaultWindowWidth,!0,b.depthPixelSpacing,c,g),l]]}})},new (k=void 0,k=Promise)(function(n,l){function g(F){try{q(h.next(F))}catch(J){l(J)}}function r(F){try{q(h.throw(F))}catch(J){l(J)}}function q(F){var J;F.done?n(F.value):(J=F.value,J instanceof k?J:new k(function(P){P(J)})).then(g,r)}q((h=
h.apply(e,f||[])).next())});var e,f,k,h},a}(),Ji=function(){function a(){}return a.yp=function(b){return new Promise(function(c){var d=new FileReader;d.readAsArrayBuffer(b);d.onload=function(){var e=new Uint8Array(d.result);c(e)}})},a}(),yf=function(){function a(){}return a.Kl=function(b,c){return xa(this,void 0,void 0,function(){var d,e,f,k,h,n,l,g=this;return R(this,function(r){switch(r.label){case 0:return c.startsWith("image/")?[2,Bi.mr(b,null,c)]:[4,Nh(b)];case 1:d=r.i();e=d[0];f=d[1];k=[];h=
e.nm;n=function(q){var F=e.Qe(q),J=e.Tf.Ya,P=e.Tf.Rows,S=F.hj(f);F=new oh(J,P,F.Ve,F.Yb,F.Modality,S,F,function(X){return xa(g,void 0,void 0,function(){var oa,ta,qa,Ma,Oa,Ka,zb,nb;return R(this,function(Lb){switch(Lb.label){case 0:return[4,Vg(e,q,f)];case 1:return oa=Lb.i(),[4,th.tl(oa,X,!0)];case 2:return ta=Lb.i(),qa=ta[0],Ma=ta[1],[4,Ji.yp(Ma)];case 3:return Oa=Lb.i(),Ka=new DataView(Oa.buffer),zb=new Hi,[4,(new sh(zb,f,e.Dl,e.Body)).ab(Ka,"1.2.840.10008.1.2.4.50",q,qa.intercept,qa.slope)];case 4:return nb=
Lb.i(),[2,new Blob([nb])]}})})},function(){return xa(g,void 0,void 0,function(){return R(this,function(X){switch(X.label){case 0:return[4,Vg(e,q,f)];case 1:return[2,X.i()]}})})},function(){return xa(g,void 0,void 0,function(){return R(this,function(X){switch(X.label){case 0:return[4,Ph(e,q,f)];case 1:return[2,X.i()]}})})});k.push(F)};for(l=0;l<h;l++)n(l);return[2,k]}})})},a.Qe=function(b,c){return 0>c||c>=b.length?null:b[c]},a}(),Ki=function(){function a(){}return a.Zs=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,
function(b){var c=16*Math.random()|0;return("x"===b?c:3&c|8).toString(16)})},a}();var Li=function(){function a(){this.pj=Ba.Yu()}return a.prototype.hf=function(){return this.pj.No()},a}();const Mi=function(){function a(){}return a.defer=function(){var b=new ea,c=new Promise(function(d,e){b.resolve=d;b.reject=e});return b.promise=c,b},a}(),Ni=function(){function a(b){this.Lb=b;this.Zf=0;this.rh=this.rm=this.te=null;this.Jr=Mi.defer();b=b[0].un();this.hm=null!=b?b:Ki.Zs();this.rh=new Li}return a.prototype.getId=
function(){return this.hm},a.prototype.getModality=function(){var b={};return this.Lb.forEach(function(c){c=c.getModality();b[c]=c}),Object.keys(b).join(",")},a.prototype.count=function(){var b=0;return this.Lb.forEach(function(c){b+=c.Je()}),b},a.prototype.getFrame=function(){return this.Zf},a.prototype.getImageId=function(b){return this.hm+":"+b.toString()},a.prototype.setQuality=function(b){this.rm=b},a.prototype.getQuality=function(){return this.rm},a.prototype.pn=function(b){return c=this,d=
void 0,f=function(){var k,h,n;return function(l,g){function r(X){return function(oa){return function(ta){if(q)throw new TypeError("Generator is already executing.");for(;P&&(P=0,ta[0]&&(S=0)),S;)try{if(q=1,F&&(J=2&ta[0]?F.return:ta[0]?F.throw||((J=F.return)&&J.call(F),0):F.next)&&!(J=J.call(F,ta[1])).done)return J;switch(F=0,J&&(ta=[2&ta[0],J.value]),ta[0]){case 0:case 1:J=ta;break;case 4:return S.label++,{value:ta[1],done:!1};case 5:S.label++;F=ta[1];ta=[0];continue;case 7:ta=S.o.pop();S.m.pop();
continue;default:if(!((J=0<(J=S.m).length&&J[J.length-1])||6!==ta[0]&&2!==ta[0])){S=0;continue}if(3===ta[0]&&(!J||ta[1]>J[0]&&ta[1]<J[3]))S.label=ta[1];else if(6===ta[0]&&S.label<J[1])S.label=J[1],J=ta;else if(J&&S.label<J[2])S.label=J[2],S.o.push(ta);else{J[2]&&S.o.pop();S.m.pop();continue}}ta=g.call(l,S)}catch(qa){ta=[6,qa],F=0}finally{q=J=0}if(5&ta[0])throw ta[1];return{value:ta[0]?ta[1]:void 0,done:!0}}([X,oa])}}var q,F,J,P,S={label:0,i:function(){if(1&J[0])throw J[1];return J[1]},m:[],o:[]};
return P={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(P[Symbol.iterator]=function(){return this}),P}(this,function(l){switch(l.label){case 0:return null===(k=this.fn(b))?[3,2]:(h=k[0],n=k[1],[4,h.pk(n)]);case 1:return[2,l.i()];case 2:return[2,null]}})},new (e=void 0,e=Promise)(function(k,h){function n(r){try{g(f.next(r))}catch(q){h(q)}}function l(r){try{g(f.throw(r))}catch(q){h(q)}}function g(r){var q;r.done?k(r.value):(q=r.value,q instanceof e?q:new e(function(F){F(q)})).then(n,
l)}g((f=f.apply(c,d||[])).next())});var c,d,e,f},a.prototype.Xt=function(b){b=this.fn(b);return null!==b?b[0].Je():0},a.prototype.setFrame=function(b){var c=this;return this.Zf===b&&null!==this.te||(this.Zf=b,this.te=this.pn(b).then(function(d){return null!==d?d.Al().then(function(e){return e.X=c.getImageId(b),c.Jr.resolve(e.descriptions),e}):null})),this.te},a.prototype.supportDelete=function(){return this.Lb[0].supportDelete()},a.prototype.supportClick=function(){return!1},a.prototype.xi=function(b){return this.Lb[0].xi(b.Lb[0])},
a.prototype.nc=function(){return this.Lb[0].nc()},a.prototype.getBlobs=function(){var b=[];return this.Lb.forEach(function(c){c.rn().forEach(function(d){b.push(d)})}),b},a.prototype.fn=function(b){for(var c=0,d=0;d<this.Lb.length;d++){var e=this.Lb[d],f=c;c+=e.Je();if(b>=f&&b<c)return[e,b-f]}return null},a}(),qb=function(){function a(){}return a.Lm=function(b){return c=this,d=void 0,f=function(){var k,h;return function(n,l){function g(S){return function(X){return function(oa){if(r)throw new TypeError("Generator is already executing.");
for(;J&&(J=0,oa[0]&&(P=0)),P;)try{if(r=1,q&&(F=2&oa[0]?q.return:oa[0]?q.throw||((F=q.return)&&F.call(q),0):q.next)&&!(F=F.call(q,oa[1])).done)return F;switch(q=0,F&&(oa=[2&oa[0],F.value]),oa[0]){case 0:case 1:F=oa;break;case 4:return P.label++,{value:oa[1],done:!1};case 5:P.label++;q=oa[1];oa=[0];continue;case 7:oa=P.o.pop();P.m.pop();continue;default:if(!((F=0<(F=P.m).length&&F[F.length-1])||6!==oa[0]&&2!==oa[0])){P=0;continue}if(3===oa[0]&&(!F||oa[1]>F[0]&&oa[1]<F[3]))P.label=oa[1];else if(6===
oa[0]&&P.label<F[1])P.label=F[1],F=oa;else if(F&&P.label<F[2])P.label=F[2],P.o.push(oa);else{F[2]&&P.o.pop();P.m.pop();continue}}oa=l.call(n,P)}catch(ta){oa=[6,ta],q=0}finally{r=F=0}if(5&oa[0])throw oa[1];return{value:oa[0]?oa[1]:void 0,done:!0}}([S,X])}}var r,q,F,J,P={label:0,i:function(){if(1&F[0])throw F[1];return F[1]},m:[],o:[]};return J={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(J[Symbol.iterator]=function(){return this}),J}(this,function(n){switch(n.label){case 0:return[4,
b.gn()];case 1:return k=n.i(),h=[],k.forEach(function(l){l=new Ni(l.bh);h.push(l)}),[2,h]}})},new (e=void 0,e=Promise)(function(k,h){function n(r){try{g(f.next(r))}catch(q){h(q)}}function l(r){try{g(f.throw(r))}catch(q){h(q)}}function g(r){var q;r.done?k(r.value):(q=r.value,q instanceof e?q:new e(function(F){F(q)})).then(n,l)}g((f=f.apply(c,d||[])).next())});var c,d,e,f},a.it=function(b,c){var d=new da;return d.Id=b,d.Frames=c.count(),d.Type=c.getModality(),d.Icon=!0,d},a.Ok=function(b,c){return null!==
b?"0".repeat(c-b.toString().length)+b:""},a.Wo=function(b){return b.replace(/-|\s/g,"")},a.getModalityDisplayName=function(b){var c=b.indexOf("/");return 0>c?b:b.substring(c+1)},a.getFile=function(b){return b},a.jv=function(b,c){return Array(Math.max(c-String(b).length+1,0)).join("0")+b},a.hv=function(b){return 999999<parseInt(b,10)?b:a.jv(parseInt(b,10),6)},a.Zd=function(b,c){return b===c||null===b||null===c?0:b<c?-1:1},a.Yd=function(b){var c="";null!==b&&(b=b.match(/[a-zA-Z]+|[0-9]+/g),null!==b&&
b.forEach(function(d){!1===isNaN(parseInt(d,10))?c+=a.hv(d):c+=d}));return c},a}(),Oi=function(){function a(b,c,d,e,f){this.Bh=b;this.Cc=c;this.yh=d;this.Kd=e;this.hs=f;this.sh=[]}return a.prototype.pk=function(b){return w(this,void 0,void 0,function(){var c,d,e;return wa(this,function(f){switch(f.label){case 0:return 0!==this.sh.length?[3,3]:[4,this.getRawBlob(b)];case 1:return c=f.i(),[4,yf.Kl(c,c.type)];case 2:this.sh=d=f.i(),f.label=3;case 3:return e=b>this.sh.length?0:b,[2,yf.Qe(this.sh,e)]}})})},
a.prototype.nc=function(){return this.Kd.Volume},a.prototype.un=function(){return this.hs},a.prototype.xi=function(b){if(0==b instanceof a)return!0;var c=qb.Yd(this.yh.toString()),d=qb.Yd(b.yh.toString());c=qb.Zd(c,d);if(-1===c)return!0;if(1===c)return!1;c=qb.Yd(this.nc());b=qb.Yd(b.nc());b=qb.Zd(c,b);return-1===b||1!==b},a.prototype.getModality=function(){return qb.getModalityDisplayName(this.Kd.Modality)},a.prototype.Je=function(){return this.Kd.Frames},a.prototype.getRawBlob=function(){return w(this,
void 0,void 0,function(){var b,c,d,e;return wa(this,function(f){switch(f.label){case 0:return b="".concat(this.Cc,"/").concat(this.Kd.Path),[4,this.Bh.getFileUrl(b)];case 1:return c=f.i(),[4,fetch(c)];case 2:return[4,f.i().arrayBuffer()];case 3:return d=f.i(),e="application/dicom",this.Kd.Modality.startsWith("image/")&&(e=this.Kd.Modality),[2,new Blob([d],{type:e})]}})})},a.prototype.hn=function(){return this.Kd.Path},a.prototype.supportDelete=function(){return!0},a.prototype.Ek=function(){return!0},
a.prototype.Cm=function(){return w(this,void 0,void 0,function(){var b,c,d;return wa(this,function(e){switch(e.label){case 0:b=[],c=0,e.label=1;case 1:return c<this.Kd.Frames?[4,this.getRawBlob(c)]:[3,4];case 2:d=e.i(),b.push(d),e.label=3;case 3:return c++,[3,1];case 4:return[2,b]}})})},a.prototype.wi=function(){throw Error("Method not implemented.");},a.prototype.rn=function(){return[]},a}(),Pi=function(){function a(b,c,d,e){this.$r=b;this.yh=c;this.Bh=d;this.Cc=e}return a.prototype.gn=function(){return Ca(this,
void 0,void 0,function(){var b,c;return na(this,function(d){switch(d.label){case 0:return[4,this.Op(this.$r,this.yh)];case 1:return b=d.i(),c=b[0],[2,[new ia(c.nc(),b)]]}})})},a.prototype.Op=function(b,c){return Ca(this,void 0,void 0,function(){var d,e,f,k,h,n;return na(this,function(l){switch(l.label){case 0:return d=this,e=this.Bh.getFileUrl("".concat(d.Cc,"/").concat(b,".json")),[4,fetch(e)];case 1:return[4,l.i().json()];case 2:return f=l.i(),k=f.files,h=f.id,k=k.sort(function(g,r){return g.Volume>
r.Volume?1:g.Volume<r.Volume?-1:g.Slice>r.Slice?1:-1}),n=[],k.forEach(function(g){return Ca(this,void 0,void 0,function(){var r;return na(this,function(){return r=new Oi(d.Bh,d.Cc,c,g,h),n.push(r),[2]})})}),[2,n]}})})},a}(),Qi=function(){function a(){this.Pc=[];this.Aj=null;this.Qr={};this.bm=[];this.vm=this.Md=this.zh=null;this.am=!1;this.Ij=new Map;this.Pc=[]}return a.prototype.setAllowDownload=function(b){this.am=b},a.prototype.getAllowDownload=function(){return this.am},a.prototype.isReadOnly=
function(){return this.ty},a.prototype.loadFromStorage=function(b,c){return M(this,void 0,void 0,function(){var d,e,f,k,h,n,l;return A(this,function(g){switch(g.label){case 0:return d=this,this.vm=c,e=[],[4,b.getFileUrl("".concat(c,"/study.json"))];case 1:return f=g.i(),[4,fetch(f)];case 2:return[4,g.i().json()];case 3:return k=g.i(),e=k.series,h=k.states,n=this.sn(b,c),void 0!==h&&(d.Aj=k.states),l=[],e.forEach(function(r,q){return M(this,void 0,void 0,function(){var F,J;return A(this,function(){return F=
new Pi(r,q,b,c),J=qb.Lm(F).then(function(P){P.forEach(function(S){d.Pc.push(S);d.Xo()})}),l.push(J),[2]})})}),[4,Promise.all(l)];case 4:return g.i(),this.Md&&this.Md.next(),this.updateCloudSeriesCache(n),[2]}})})},a.prototype.getStorageId=function(){return this.vm},a.prototype.restoreAppState=function(b){if(b.appStates){b=atob(b.appStates);b=bg().Ak(b,{de:"string"});var c=JSON.parse(b).imageIdToolState,d=this.list();Object.keys(c).forEach(function(e){var f=c[e],k=d.find(function(h){return h.getId()===
e});k&&k.rh.pj.Wk(f)});Ba.Dm.restore(c)}},a.prototype.list=function(){return this.Pc},a.prototype.add=function(b){this.Pc.push(b);this.Xo();this.Md&&this.Md.next()},a.prototype.remove=function(b){var c=this;this.Pc.forEach(function(d,e){d===b&&c.Pc.splice(e,1)});this.zh&&this.zh.next(b);this.Md&&this.Md.next()},a.prototype.getImageLoaders=function(){return this.Qr},a.prototype.sn=function(b,c){b=a.au(b,c);return!1===this.Ij.has(b)?(c=new y,this.Ij.set(b,c),c):this.Ij.get(b)},a.prototype.studyChanged=
function(b){var c=[];return this.Pc.forEach(function(d){d=d.getId();c.push(d)}),JSON.stringify(c)!==JSON.stringify(b.cloudSeriesIds)||b.appStates!==this.Aj},a.prototype.updateCloudSeriesCache=function(b){b.cloudSeriesIds=[];this.Pc.forEach(function(c){c=c.getId();b.cloudSeriesIds.push(c)});b.appStates=this.Aj},a.prototype.registerCallback=function(b){this.bm.push(b)},a.prototype.getCallbacks=function(){return this.bm},a.prototype.setSeriesRemovedSubject=function(b){this.zh=b},a.prototype.getSeriesRemovedSubject=
function(){return this.zh},a.prototype.setSeriesChangedSubject=function(b){this.Md=b},a.prototype.getSeriesChangedSubject=function(){return this.Md},a.prototype.saveAppStates=function(){var b={};this.list().forEach(function(d){var e=d.rh.hf();"{}"!==JSON.stringify(e)&&(b[d.getId()]=e)});var c=Ba.Dm.Qv(b);c=bg().Uh(JSON.stringify(c),{de:"string"});return btoa(c)},a.prototype.getBlobs=function(){var b=[];return this.list().forEach(function(c){c.getBlobs().forEach(function(d){b.push(d)})}),b},a.prototype.Xo=
function(){this.Pc=this.Pc.sort(function(b,c){return b.xi(c)?-1:1})},a.au=function(b,c){return"".concat(b.getId(),"/").concat(c)},a}();var Ri=Ea(838),uh=function(){function a(){}return a.rr=function(b){var c=new Pg;return c.Initialize(b),c},a.qr=function(b,c){var d=new Tf.h(!1,!0,!0,2,void 0);b=new DataView(b.buffer,c);if(!1===d.Initialize(b))throw new SyntaxError("Failed to parse DICOM header");return d},a}(),Si=function(){function a(){this.mm=new Map}return a.prototype.ss=function(b,c){this.mm.set(b,
c)},Object.defineProperty(a.prototype,"modifications",{get:function(){return this.mm},enumerable:!1,configurable:!0}),a}(),Ti=function(){function a(){}return a.Kw=function(b,c,d){var e=new Map;return c.Jd.forEach(function(f){var k=f.jb.TagString;if(!0===d.modifications.has(k)){k=d.modifications.get(k);var h=f.Mb;f=h+f.sa;for(var n=0;h<f;h++)n<k.length?e.set(h,k.charAt(n)):e.set(h," "),n++}}),e},a}();const Ui=function(){function a(b){this.ic=b;this.Qc=[]}return a.prototype.ru=function(){return L(this,
void 0,void 0,function(){var b,c;return G(this,function(d){switch(d.label){case 0:return d.m.push([0,2,,3]),b=this,[4,yf.Kl(this.ic.blob,this.ic.type)];case 1:return b.Qc=d.i(),0<this.Qc.length?(c=this.Qc[0],this.ej=c.Ve,this.Yb=c.Yb,this.em=c.Gp):(this.ej="",this.Yb="",this.em=[]),[2,!0];case 2:return d.i(),[2,!1];case 3:return[2]}})})},a.prototype.nc=function(){return qb.Yd(this.Yb)},a.prototype.un=function(){return null},a.prototype.xi=function(b){if(0==b instanceof a)return!1;var c=this.tn(),
d=b.tn();c=qb.Zd(c,d);if(-1===c)return!0;if(1===c)return!1;c=this.yn();d=b.yn();c=qb.Zd(c,d);if(-1===c)return!1;if(1===c)return!0;c=this.zn();d=b.zn();c=qb.Zd(c,d);if(-1===c)return!1;if(1===c)return!0;c=this.An();d=b.An();c=qb.Zd(c,d);if(-1===c)return!0;if(1===c)return!1;c=qb.Yd(this.wn());d=qb.Yd(b.wn());c=qb.Zd(c,d);if(-1===c)return!0;if(1===c)return!1;if(this.nc()<b.nc())return!0;if(this.nc()>b.nc())return!1;c=this.en();b=b.en();return-1!==qb.Zd(c,b)},a.prototype.pk=function(b){return L(this,void 0,
void 0,function(){return G(this,function(){return[2,yf.Qe(this.Qc,b)]})})},a.prototype.Je=function(){return this.Qc.length},a.prototype.getModality=function(){var b=this.ic.type,c=this.Qc[0];return c.Modality&&(b=c.Modality),qb.getModalityDisplayName(b)},a.prototype.getRawBlob=function(){return L(this,void 0,void 0,function(){return G(this,function(){return[2,this.ic.blob]})})},a.prototype.hn=function(){return encodeURI(this.ic.name).replace(/[^a-zA-Z0-9.]/g,"")},a.prototype.supportDelete=function(){return!0},
a.prototype.Cm=function(b){return L(this,void 0,void 0,function(){var c,d,e,f,k,h;return G(this,function(n){switch(n.label){case 0:return c=[],this.ic.type.startsWith("image/")?(c.push(this.ic.blob),[3,4]):[3,1];case 1:return null==b?[3,3]:(d=Ri.l.cn(b),[4,Uf(this.ic.blob)]);case 2:return e=n.i(),f=new DataView(e),k=function(l,g){g=g.fj;var r=new Si;g.forEach(function(q){var F="0x".concat(q.Id);"substitute"===q.Method&&(q=q.Value,0!=q.length%2&&(q+=" "),r.ss(F,q))});return function(q,F){if(0===F.modifications.size)return q.buffer;
var J=uh.rr(q),P=uh.qr(q,J.O);J=new DataView(q.buffer,J.O,P.O);var S=Db.h.Qf(P.Jd,q);S=Qg.zl(S);P=new DataView(q.buffer,J.byteOffset+P.O);P=Rg.Jl(S.rj,S.ah,P);F=Ti.Kw(q,P,F);q=q.buffer.slice(0);var X=new DataView(q);return F.forEach(function(oa,ta){X.setUint8(ta,oa.charCodeAt(0))}),q}(l,r)}(f,d),h=new Blob([k],{type:"application/dicom"}),c.push(h),[2,c];case 3:c.push(this.ic.blob),n.label=4;case 4:return[2,c]}})})},a.prototype.wi=function(b,c){return L(this,void 0,void 0,function(){var d,e,f,k;return G(this,
function(h){switch(h.label){case 0:return this.ic.blob,[4,Uf(this.ic.blob)];case 1:return d=h.i(),e=new DataView(d),f=this.Qc[0],null===(k=f.Slice)?[3,3]:[4,k.wi(b,e,c)];case 2:h.i(),h.label=3;case 3:return[2]}})})},a.prototype.rn=function(){var b=[];return b.push(this.ic.blob),b},a.prototype.Ek=function(){return!1},a.prototype.Sc=function(b){var c=null;return this.em.forEach(function(d){b===d[0]&&(c=d[1])}),c},a.prototype.tn=function(){return this.Sc((new sd.h(16,16)).toString())},a.prototype.en=
function(){return this.Sc((new sd.h(8,34)).toString())},a.prototype.wn=function(){var b=this.Sc((new sd.h(32,17)).toString());return qb.Ok(b,10)},a.prototype.yn=function(){return this.Sc((new sd.h(8,32)).toString())},a.prototype.An=function(){var b=this.Sc((new sd.h(32,13)).toString());return qb.Yd(b)},a.prototype.zn=function(){var b=this.Sc((new sd.h(8,48)).toString()),c=parseFloat(b);return isNaN(c)?b:c.toString()},a}(),Vi=function(){function a(b){this.gm=b}return a.prototype.gn=function(){return b=
this,c=void 0,e=function(){var f,k,h,n,l,g,r,q;return function(F,J){function P(Ma){return function(Oa){return function(Ka){if(S)throw new TypeError("Generator is already executing.");for(;ta&&(ta=0,Ka[0]&&(qa=0)),qa;)try{if(S=1,X&&(oa=2&Ka[0]?X.return:Ka[0]?X.throw||((oa=X.return)&&oa.call(X),0):X.next)&&!(oa=oa.call(X,Ka[1])).done)return oa;switch(X=0,oa&&(Ka=[2&Ka[0],oa.value]),Ka[0]){case 0:case 1:oa=Ka;break;case 4:return qa.label++,{value:Ka[1],done:!1};case 5:qa.label++;X=Ka[1];Ka=[0];continue;
case 7:Ka=qa.o.pop();qa.m.pop();continue;default:if(!((oa=0<(oa=qa.m).length&&oa[oa.length-1])||6!==Ka[0]&&2!==Ka[0])){qa=0;continue}if(3===Ka[0]&&(!oa||Ka[1]>oa[0]&&Ka[1]<oa[3]))qa.label=Ka[1];else if(6===Ka[0]&&qa.label<oa[1])qa.label=oa[1],oa=Ka;else if(oa&&qa.label<oa[2])qa.label=oa[2],qa.o.push(Ka);else{oa[2]&&qa.o.pop();qa.m.pop();continue}}Ka=J.call(F,qa)}catch(zb){Ka=[6,zb],X=0}finally{S=oa=0}if(5&Ka[0])throw Ka[1];return{value:Ka[0]?Ka[1]:void 0,done:!0}}([Ma,Oa])}}var S,X,oa,ta,qa={label:0,
i:function(){if(1&oa[0])throw oa[1];return oa[1]},m:[],o:[]};return ta={next:P(0),throw:P(1),return:P(2)},"function"==typeof Symbol&&(ta[Symbol.iterator]=function(){return this}),ta}(this,function(F){switch(F.label){case 0:f=new Map,k=this.gm.Dj.length,h=0,F.label=1;case 1:return h<k?(n=this.gm.getItem(h),[4,(l=new Ui(n)).ru()]):[3,4];case 2:F.i()&&(g=l.nc(),r=null,f.has(g)?r=f.get(g):(r=new ia(g,[]),f.set(g,r)),r.bh.push(l)),F.label=3;case 3:return h++,[3,1];case 4:return f.forEach(function(J){J.bh=
J.bh.sort(function(P,S){return P.Yb>S.Yb?1:P.Yb<S.Yb?-1:P.ej>S.ej?1:-1})}),q=[],f.forEach(function(J){q.push(J)}),[2,Array.from(f.values())]}})},new (d=void 0,d=Promise)(function(f,k){function h(g){try{l(e.next(g))}catch(r){k(r)}}function n(g){try{l(e.throw(g))}catch(r){k(r)}}function l(g){var r;g.done?f(g.value):(r=g.value,r instanceof d?r:new d(function(q){q(r)})).then(h,n)}l((e=e.apply(b,c||[])).next())});var b,c,d,e},a}(),Wi=function(){function a(){this.Dj=[]}return a.prototype.qs=function(b){this.Dj.push(b)},
a.prototype.getItem=function(b){return this.Dj[b]},a}(),Xi=function(){function a(){}return a.prototype.hr=function(b){return 1===b.length&&b[0].name.toLowerCase().endsWith(".zip")},a}();var vh=Ea(369),Yi=Ea(701);const Zi=function(){function a(b,c,d){this.Er=b;this.um=c;this.Sr=d}return a.prototype.loadAsync=function(){return b=this,c=void 0,e=function(){var f,k;return function(h,n){function l(P){return function(S){return function(X){if(g)throw new TypeError("Generator is already executing.");for(;F&&
(F=0,X[0]&&(J=0)),J;)try{if(g=1,r&&(q=2&X[0]?r.return:X[0]?r.throw||((q=r.return)&&q.call(r),0):r.next)&&!(q=q.call(r,X[1])).done)return q;switch(r=0,q&&(X=[2&X[0],q.value]),X[0]){case 0:case 1:q=X;break;case 4:return J.label++,{value:X[1],done:!1};case 5:J.label++;r=X[1];X=[0];continue;case 7:X=J.o.pop();J.m.pop();continue;default:if(!((q=0<(q=J.m).length&&q[q.length-1])||6!==X[0]&&2!==X[0])){J=0;continue}if(3===X[0]&&(!q||X[1]>q[0]&&X[1]<q[3]))J.label=X[1];else if(6===X[0]&&J.label<q[1])J.label=
q[1],q=X;else if(q&&J.label<q[2])J.label=q[2],J.o.push(X);else{q[2]&&J.o.pop();J.m.pop();continue}}X=n.call(h,J)}catch(oa){X=[6,oa],r=0}finally{g=q=0}if(5&X[0])throw X[1];return{value:X[0]?X[1]:void 0,done:!0}}([P,S])}}var g,r,q,F,J={label:0,i:function(){if(1&q[0])throw q[1];return q[1]},m:[],o:[]};return F={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(F[Symbol.iterator]=function(){return this}),F}(this,function(h){switch(h.label){case 0:return[4,this.Er.pk(this.um)];case 1:return f=
h.i(),this.width=f.Gd,this.height=f.$q,this.xa=new p,[4,f.Al()];case 2:return k=h.i(),this.xa.GC=f.Ve,this.xa.UC=f.Yb,this.xa.index=this.Sr+this.um,this.xa.windowWidth=k.windowWidth,this.xa.windowCenter=k.windowCenter,this.xa.Uf=k.columnPixelSpacing,this.xa.Vf=k.rowPixelSpacing,this.xa.jh=k.depthPixelSpacing,this.kv=a.yr(k),[2]}})},new (d=void 0,d=Promise)(function(f,k){function h(g){try{l(e.next(g))}catch(r){k(r)}}function n(g){try{l(e.throw(g))}catch(r){k(r)}}function l(g){var r;g.done?f(g.value):
(r=g.value,r instanceof d?r:new d(function(q){q(r)})).then(h,n)}l((e=e.apply(b,c||[])).next())});var b,c,d,e},a.yr=function(b){var c=b.Oa(),d=new DataView(c.buffer,c.byteOffset,c.byteLength);d=new vh.h(d,Ob.h.Oc());var e=b.color?4:1,f=8*b.sizeInBytes/(e*b.height*b.width);e=new Sg(b.height,b.width,f,f,f-1,e,null,b.unsigned,!1,b.slope,b.intercept,null,null);f=new Uint8Array(b.height*b.width);var k=new Yi.h(b.windowCenter,b.windowWidth,!1,"");if(!0===b.color){d=new Uint8Array(b.rows*b.columns);for(var h=
0;h<b.rows;h++)for(var n=0;n<b.height;n++){var l=h*b.width+n;d[l]=c[4*l]}d=new vh.h(new DataView(d.buffer),Ob.h.Oc())}c=0;b.color;for(h=0;h<b.height;h++)for(n=0;n<b.width;n++)l=ph.h.Qp(d,e,n,h,0),f[c]=ph.h.Zq(l,b.invert,k),c++;return f},a}();var $i=vtk.Rendering.Misc.vtkFullScreenRenderWindow,aj=vtk.Common.DataModel.vtkImageData,wh=vtk.Common.Core.vtkDataArray,bj=vtk.Rendering.Core.vtkVolume,cj=vtk.Rendering.Core.vtkVolumeMapper;const xh=function(){function a(){}return a.Cp=function(b,c){return D(this,
void 0,void 0,function(){var d,e,f,k,h,n,l,g,r,q,F,J,P,S,X,oa,ta,qa,Ma,Oa,Ka;return C(this,function(zb){switch(zb.label){case 0:return d=$i.newInstance({rootContainer:b,containerStyle:{height:"100%",overflow:"hidden"},background:[0,0,0]}),e=d.getRenderer(),f=d.getRenderWindow(),k=wh.VtkDataTypes,[4,a.xr(c)];case 1:h=zb.i();n=h.length;l=h[0];g=l.width;r=l.height;q=g*r;F=new Uint8Array(q*n);for(J=0;J<n;J++)for(P=h[J],S=P.kv,X=q*J,oa=0;oa<q;oa++)F[X+oa]=S[oa];return ta=wh.newInstance({values:F,numberOfComponents:1,
dataType:k.Px,name:"scalars"}),(qa=aj.newInstance()).setOrigin(0,0,0),qa.setSpacing(l.xa.Uf,l.xa.Vf,l.xa.jh),qa.setExtent(0,g-1,0,r-1,0,n-1),qa.getPointData().setScalars(ta),(Ma=cj.newInstance()).setInputData(qa),Ma.setSampleDistance(.7),(Oa=bj.newInstance()).setMapper(Ma),(Ka=Oa.getProperty().getRGBTransferFunction(0)).setRange.apply(Ka,ta.getRange()),Ma.setBlendModeToMaximumIntensity(),e.getActiveCamera().setViewUp(0,1,0),e.addVolume(Oa),e.resetCamera(),f.render(),[2,d]}})})},a.Fp=function(b){for(;b.firstChild;)b.removeChild(b.firstChild)},
a.xr=function(b){return D(this,void 0,void 0,function(){var c,d,e,f;return C(this,function(k){switch(k.label){case 0:return c=[],d=b.Lb,e=0,f=[],d.forEach(function(h){for(var n=h.Je(),l=0;l<n;l++){var g=new Zi(h,l,e);c.push(g);g=g.loadAsync();f.push(g)}e+=n}),[4,Promise.all(f)];case 1:return k.i(),[2,c]}})})},a}();Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;var cg=Wg(function(a){return function(b){a(this);this.message=b?b.length+" errors occurred during unsubscription:\n"+
b.map(function(c,d){return d+1+") "+c.toString()}).join("\n  "):"";this.name="UnsubscriptionError";this.errors=b}}),sf=function(){function a(c){this.tu=c;this.closed=!1;this.Yf=this.ve=null}var b;return a.prototype.unsubscribe=function(){var c,d;if(!this.closed){this.closed=!0;var e=this.ve;if(e)if(this.ve=null,Array.isArray(e))try{for(var f=Vf(e),k=f.next();!k.done;k=f.next())k.value.remove(this)}catch(F){var h={error:F}}finally{try{k&&!k.done&&(c=f.return)&&c.call(f)}finally{if(h)throw h.error;
}}else e.remove(this);h=this.tu;if(Xc(h))try{h()}catch(F){var n=F instanceof cg?F.errors:[F]}if(h=this.Yf){this.Yf=null;try{for(var l=Vf(h),g=l.next();!g.done;g=l.next()){var r=g.value;try{h=r,Xc(h)?h():h.unsubscribe()}catch(F){n=null!=n?n:[],F instanceof cg?n=rf(rf([],qf(n)),qf(F.errors)):n.push(F)}}}catch(F){var q={error:F}}finally{try{g&&!g.done&&(d=l.return)&&d.call(l)}finally{if(q)throw q.error;}}}if(n)throw new cg(n);}},a.prototype.add=function(c){var d;if(c&&c!==this)if(this.closed)Xc(c)?c():
c.unsubscribe();else{if(c instanceof a){if(c.closed||c.Pr(this))return;c.Dr(this)}(this.Yf=null!==(d=this.Yf)&&void 0!==d?d:[]).push(c)}},a.prototype.Pr=function(c){var d=this.ve;return d===c||Array.isArray(d)&&d.includes(c)},a.prototype.Dr=function(c){var d=this.ve;this.ve=Array.isArray(d)?(d.push(c),d):d?[d,c]:c},a.prototype.cs=function(c){var d=this.ve;d===c?this.ve=null:Array.isArray(d)&&Wf(d,c)},a.prototype.remove=function(c){var d=this.Yf;d&&Wf(d,c);c instanceof a&&c.cs(this)},a.EMPTY=((b=new a).closed=
!0,b),a}(),yh=sf.EMPTY,Xf={setTimeout:function(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];d=Xf.Rm;return(null==d?0:d.setTimeout)?d.setTimeout.apply(d,rf([a,b],qf(c))):setTimeout.apply(void 0,rf([a,b],qf(c)))},clearTimeout:function(a){var b=Xf.Rm;return((null==b?void 0:b.clearTimeout)||clearTimeout)(a)},Rm:void 0},zh=function(a){function b(c){var d=a.call(this)||this;return d.Bb=!1,c?(d.destination=c,Xg(c)&&c.add(d)):d.destination=dj,d}return Ke(b,a),b.create=function(c,d,e){return new dg(c,
d,e)},b.prototype.next=function(c){this.Bb||this.cg(c)},b.prototype.error=function(c){this.Bb||(this.Bb=!0,this.Nr(c))},b.prototype.complete=function(){this.Bb||(this.Bb=!0,this.Hr())},b.prototype.unsubscribe=function(){this.closed||(this.Bb=!0,a.prototype.unsubscribe.call(this),this.destination=null)},b.prototype.cg=function(c){this.destination.next(c)},b.prototype.Nr=function(c){try{this.destination.error(c)}finally{this.unsubscribe()}},b.prototype.Hr=function(){try{this.destination.complete()}finally{this.unsubscribe()}},
b}(sf),ej=function(){function a(b){this.Pk=b}return a.prototype.next=function(b){var c=this.Pk;if(c.next)try{c.next(b)}catch(d){tf(d)}},a.prototype.error=function(b){var c=this.Pk;if(c.error)try{c.error(b)}catch(d){tf(d)}else tf(b)},a.prototype.complete=function(){var b=this.Pk;if(b.complete)try{b.complete()}catch(c){tf(c)}},a}(),dg=function(a){function b(c,d,e){var f,k=a.call(this)||this;return Xc(c)||!c?f={next:null!=c?c:void 0,error:null!=d?d:void 0,complete:null!=e?e:void 0}:f=c,k.destination=
new ej(f),k}return Ke(b,a),b}(zh),dj={closed:!0,next:Yg,error:function(a){throw a;},complete:Yg},fj="function"==typeof Symbol&&Symbol.aa||"@@observable",gj=function(){function a(b){b&&(this.we=b)}return a.prototype.subscribe=function(b,c,d){var e=this,f=b&&b instanceof zh||function(k){return k&&Xc(k.next)&&Xc(k.error)&&Xc(k.complete)}(b)&&Xg(b)?b:new dg(b,c,d);(function(){var k=e.operator,h=e.source;f.add(k?k.call(f,h):h?e.we(f):e.Kj(f))})();return f},a.prototype.Kj=function(b){try{return this.we(b)}catch(c){b.error(c)}},
a.prototype.forEach=function(b,c){var d=this;return new (c=Qh(c))(function(e,f){var k=new dg({next:function(h){try{b(h)}catch(n){f(n),k.unsubscribe()}},error:f,complete:e});d.subscribe(k)})},a.prototype.we=function(b){var c;return null===(c=this.source)||void 0===c?void 0:c.subscribe(b)},a.prototype[fj]=function(){return this},a.create=function(b){return new a(b)},a}(),hj=Wg(function(a){return function(){a(this);this.name="ObjectUnsubscribedError";this.message="object unsubscribed"}}),eg=function(a){function b(){var c=
a.call(this)||this;return c.closed=!1,c.df=null,c.Bf=[],c.Bb=!1,c.bi=!1,c.gl=null,c}return Ke(b,a),b.prototype.Ze=function(){if(this.closed)throw new hj;},b.prototype.next=function(c){var d;if(this.Ze(),!this.Bb){this.df||(this.df=Array.from(this.Bf));try{for(var e=Vf(this.df),f=e.next();!f.done;f=e.next())f.value.next(c)}catch(h){var k={error:h}}finally{try{f&&!f.done&&(d=e.return)&&d.call(e)}finally{if(k)throw k.error;}}}},b.prototype.error=function(c){if(this.Ze(),!this.Bb){this.bi=this.Bb=!0;
this.gl=c;for(var d=this.Bf;d.length;)d.shift().error(c)}},b.prototype.complete=function(){if(this.Ze(),!this.Bb){this.Bb=!0;for(var c=this.Bf;c.length;)c.shift().complete()}},b.prototype.unsubscribe=function(){this.Bb=this.closed=!0;this.Bf=this.df=null},Object.defineProperty(b.prototype,"observed",{get:function(){var c;return 0<(null===(c=this.Bf)||void 0===c?void 0:c.length)},enumerable:!1,configurable:!0}),b.prototype.Kj=function(c){return this.Ze(),a.prototype.Kj.call(this,c)},b.prototype.we=
function(c){return this.Ze(),this.Gr(c),this.Tr(c)},b.prototype.Tr=function(c){var d=this,e=this.Bb,f=this.Bf;return this.bi||e?yh:(this.df=null,f.push(c),new sf(function(){d.df=null;Wf(f,c)}))},b.prototype.Gr=function(c){var d=this.gl,e=this.Bb;this.bi?c.error(d):e&&c.complete()},b.create=function(c,d){return new ij(c,d)},b}(gj),ij=function(a){function b(c,d){var e=a.call(this)||this;return e.destination=c,e.source=d,e}return Ke(b,a),b.prototype.next=function(c){var d,e;null===(e=null===(d=this.destination)||
void 0===d?void 0:d.next)||void 0===e||e.call(d,c)},b.prototype.error=function(c){var d,e;null===(e=null===(d=this.destination)||void 0===d?void 0:d.error)||void 0===e||e.call(d,c)},b.prototype.complete=function(){var c,d;null===(d=null===(c=this.destination)||void 0===c?void 0:c.complete)||void 0===d||d.call(c)},b.prototype.we=function(c){var d,e;return null!==(e=null===(d=this.source)||void 0===d?void 0:d.subscribe(c))&&void 0!==e?e:yh},b}(eg),Ah=function(a){function b(c){var d=a.call(this)||this;
return d.Dc=c,d}return Ke(b,a),Object.defineProperty(b.prototype,"value",{get:function(){return this.cu()},enumerable:!1,configurable:!0}),b.prototype.we=function(c){var d=a.prototype.we.call(this,c);return!d.closed&&c.next(this.Dc),d},b.prototype.cu=function(){var c=this.gl,d=this.Dc;if(this.bi)throw c;return this.Ze(),d},b.prototype.next=function(c){a.prototype.next.call(this,this.Dc=c)},b}(eg);const jj=function(){function a(){this.Vl=[]}return a.prototype.Wq=function(){var b={series:[],states:this.xp};
return this.Vl.forEach(function(c){b.series.push(c.Id)}),b},a}();var kj=Ea(659),lj=function(){function a(b,c){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,e){d.__proto__=e}||function(d,e){for(var f in e)Object.prototype.hasOwnProperty.call(e,f)&&(d[f]=e[f])},a(b,c)}return function(b,c){function d(){this.constructor=b}if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");a(b,c);b.prototype=null===c?Object.create(c):
(d.prototype=c.prototype,new d)}}(),mj=function(){function a(){this.Ye=[]}return a.prototype.enqueue=function(b,c){var d={priority:(c=Object.assign({priority:0},c)).priority,Iv:b};if(this.size&&this.Ye[this.size-1].priority>=c.priority)this.Ye.push(d);else{b=this.Ye;c=0;for(var e=b.length;0<e;){var f=e/2|0,k=c+f;var h=b[k];0>=d.priority-h.priority?(c=++k,e-=f+1):e=f}this.Ye.splice(c,0,d)}},a.prototype.wt=function(){return this.Ye.shift().Iv},Object.defineProperty(a.prototype,"size",{get:function(){return this.Ye.length},
enumerable:!1,configurable:!0}),a}();const fg=function(a){function b(c){var d=a.call(this)||this;if(!("number"==typeof(c=Object.assign({Ps:!1,lf:1/0,interval:0,Td:1/0,Es:!0,Fo:mj},c)).Td&&1<=c.Td))throw new TypeError("Expected `concurrency` to be a number from 1 and up, got `".concat(c.Td,"` (").concat(typeof c.Td,")"));if(!("number"==typeof c.lf&&1<=c.lf))throw new TypeError("Expected `intervalCap` to be a number from 1 and up, got `".concat(c.lf,"` (").concat(typeof c.lf,")"));if(!(Number.isFinite(c.interval)&&
0<=c.interval))throw new TypeError("Expected `interval` to be a finite number >= 0, got `".concat(c.interval,"` (").concat(typeof c.interval,")"));return d.cm=c.Ps,d.lm=c.lf===1/0||0===c.interval,d.ag=0,d.Ur=c.lf,d.jm=c.interval,d.ue=null,d.km=0,d.Jj=null,d.Lg=new c.Fo,d.bs=c.Fo,d.Ld=0,d.Ir=c.Td,d.bg=!1===c.Es,d.es=function(){},d.fs=function(){},d}return lj(b,a),b.prototype.Lr=function(){return this.lm||this.ag<this.Ur},b.prototype.Kr=function(){return this.Ld<this.Ir},b.prototype.cg=function(){this.Ld--;
this.Dh()},b.prototype.gs=function(){this.es=function(){};0===this.Ld&&(this.fs=function(){})},b.prototype.Yr=function(){this.om();this.im();this.Jj=null},b.prototype.Vr=function(){var c=this,d=Date.now();if(null===this.ue){d=this.km-d;if(!(0>d))return null===this.Jj&&(this.Jj=setTimeout(function(){return c.Yr()},d)),!0;this.ag=this.cm?this.Ld:0}return!1},b.prototype.Dh=function(){if(0===this.Lg.size)return clearInterval(this.ue),this.ue=null,this.gs(),!1;if(!this.bg){var c=!this.Vr();if(this.Lr()&&
this.Kr())return this.emit("active"),this.Lg.wt()(),c&&this.im(),!0}return!1},b.prototype.im=function(){var c=this;this.lm||null!==this.ue||(this.ue=setInterval(function(){return c.om()},this.jm),this.km=Date.now()+this.jm)},b.prototype.om=function(){0===this.ag&&0===this.Ld&&(clearInterval(this.ue),this.ue=null);for(this.ag=this.cm?this.Ld:0;this.Dh(););},b.prototype.add=function(c,d){var e=this;return new Promise(function(f,k){e.Lg.enqueue(function(){e.Ld++;e.ag++;try{Promise.resolve(c()).then(function(h){f(h);
e.cg()},function(h){k(h);e.cg()})}catch(h){k(h),e.cg()}},d);e.Dh()})},b.prototype.addAll=function(c,d){var e=this;return Promise.all(c.map(function(f){return e.add(f,d)}))},b.prototype.start=function(){if(this.bg)for(this.bg=!1;this.Dh(););},b.prototype.pause=function(){this.bg=!0},b.prototype.clear=function(){this.Lg=new this.bs},Object.defineProperty(b.prototype,"size",{get:function(){return this.Lg.size},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"pending",{get:function(){return this.Ld},
enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"isPaused",{get:function(){return this.bg},enumerable:!1,configurable:!0}),b}(kj);var nj=Ea(554),Bh=Ea.n(nj),qj=function(){function a(b,c){this.Od=b;this.Cc=c;this.Ej=0}return a.prototype.Pt=function(b){var c=[];return b.forEach(function(d){d.Lb.every(function(e){return e.Ek()})&&c.push(d)}),c},a.prototype.ct=function(b,c){return la(this,void 0,void 0,function(){var d,e,f,k,h,n,l;return fa(this,function(g){switch(g.label){case 0:return(d=
new U).studies=[],e=new Map,f=b.list(),k=this.Pt(f),h=null,0<k.length?[4,this.Od.getFileUrl("".concat(this.Cc,"/OHIF.json"))]:[3,4];case 1:return n=g.i(),[4,fetch(n)];case 2:return[4,g.i().json()];case 3:h=l=g.i(),g.label=4;case 4:return[4,Zg(f,function(r,q){return la(this,void 0,void 0,function(){var F,J,P;return fa(this,function(S){switch(S.label){case 0:return(F=new K).SeriesInstanceUID="",F.SeriesNumber=q,F.Modality="",F.SliceThickness=0,F.instances=[],[4,Zg(r.Lb,function(X){return la(this,void 0,
void 0,function(){var oa,ta,qa,Ma,Oa,Ka,zb,nb,Lb;return fa(this,function(qc){switch(qc.label){case 0:oa=new x;F.instances.push(oa);oa.metadata=new W;ta=r.Lb;qa=ta.indexOf(X);for(Oa=Ma=0;Oa<qa;Oa++)Ka=ta[Oa],Ma+=Ka.Je();zb=1;nb=function(hb){var ed,Ld,Md,Nd,gg;return fa(this,function(hg){switch(hg.label){case 0:return ed=Ma+hb,Ld=r.getId(),Md=qb.Wo(Ld),Nd=qb.Ok(ed.toString(),10),gg="".concat(Md,"_").concat(Nd),!1!==X.Ek()?[3,2]:[4,X.wi(oa.metadata,c)];case 1:return hg.i(),[3,3];case 2:if(!h)throw console.error("Cannot find existing OHIF.json"),
Error("Cannot find existing OHIF.json");h.studies.forEach(function(oj){oj.series.forEach(function(pj){pj.instances.forEach(function(Ch){Ch.url!==gg||(oa.metadata=T({},Ch.metadata))})})});hg.label=3;case 3:return oa.url=gg,[2]}})};Lb=0;qc.label=1;case 1:return Lb<zb?[5,nb(Lb)]:[3,4];case 2:qc.i(),qc.label=3;case 3:return Lb++,[3,1];case 4:return[2]}})})})];case 1:return S.i(),J="",F.instances.forEach(function(X){F.Modality=X.metadata.Modality||F.Modality;F.SeriesInstanceUID=X.metadata.SeriesInstanceUID||
F.SeriesInstanceUID;F.SeriesDescription=X.metadata.SeriesDescription||F.SeriesDescription;F.SliceThickness=X.metadata.SliceThickness||F.SliceThickness;J=X.metadata.StudyInstanceUID||J}),e.has(J)?P=e.get(J):((P=new I).StudyInstanceUID=J,P.StudyDate="",P.StudyTime="",P.PatientName="",P.PatientID="",P.AccessionNumber="",P.PatientAge="",P.PatientSex="",P.Modalities=[],P.NumInstances=0,P.series=[],e.set(J,P),d.studies.push(P)),P.series.push(F),P.NumInstances+=F.instances.length,F.instances.forEach(function(X){P.StudyDate=
X.metadata.AcquisitionDate||P.StudyDate;P.StudyTime=X.metadata.AcquisitionTime||P.StudyTime;P.PatientID=X.metadata.PatientID||P.PatientID;P.PatientName=X.metadata.PatientName||P.PatientName;(X=X.metadata.Modality)&&(P.Modalities=P.Modalities||[],P.Modalities.includes(X)||P.Modalities.push(X))}),[2]}})})})];case 5:return g.i(),d.studies.forEach(function(r){r.Modalities&&(r.Modalities=r.Modalities?r.Modalities.join("\\"):void 0)}),[2,d]}})})},a.prototype.saveStudy=function(b,c,d){return la(this,void 0,
void 0,function(){var e,f,k,h,n,l,g,r,q,F,J,P,S,X;return fa(this,function(oa){switch(oa.label){case 0:return e=this,this.Ej=0,f=b.saveAppStates(),k=b.sn(e.Od,e.Cc),!1===b.studyChanged(k)?[2,0]:(h=e.Od.getRule(),[4,e.ct(b,h)]);case 1:n=oa.i(),(l=new jj).xp=f,g=b.list(),r=new fg({Td:1}),q=[],g.forEach(function(ta,qa){q.push(function(){return e.Rv(ta,k,l,qa,c,d)})}),oa.label=2;case 2:return oa.m.push([2,6,,7]),[4,r.addAll(q)];case 3:return oa.i(),r.clear(),q.splice(0,q.length),F=l.Wq(),J=a.lk(F),[4,
e.Od.uploadFile(J,"".concat(e.Cc,"/study.json"),null)];case 4:return oa.i(),P=n,S=a.lk(P),[4,e.Od.uploadFile(S,"".concat(e.Cc,"/OHIF.json"),null)];case 5:return oa.i(),[3,7];case 6:throw X=oa.i(),r.clear(),q.splice(0,q.length),X;case 7:return[2,g.length]}})})},a.lk=function(b){b=JSON.stringify(b,null,4);b=a.encode(b);return new Blob([b],{type:"application/json"})},a.encode=function(b){for(var c=[],d=0;d<b.length;d++)c[d]=b.charCodeAt(d);return new Uint8Array(c)},a.vn=function(b){var c=b.getId();return qb.it(c,
b)},a.prototype.Rv=function(b,c,d,e,f,k){return la(this,void 0,void 0,function(){var h,n,l;return fa(this,function(){return h=this,n=b.getId(),l=new Promise(function(g,r){return la(this,void 0,void 0,function(){var q,F,J,P,S,X,oa,ta;return fa(this,function(qa){switch(qa.label){case 0:return q=a.vn(b),d.Vl.push(q),c.cloudSeriesIds.includes(n)?(g(null),[3,6]):[3,1];case 1:F=new fg({Td:8}),J=h.Nv(b,f,k),qa.label=2;case 2:return qa.m.push([2,5,,6]),[4,F.addAll(J)];case 3:return P=qa.i(),F.clear(),J.splice(0,
J.length),S=[],P.forEach(function(Ma){Ma.forEach(function(Oa){S.push(Oa)})}),S=S.sort(function(Ma,Oa){return Ma.Volume>Oa.Volume?1:Ma.Volume<Oa.Volume?-1:void 0}),X={files:S,id:b.getId()},oa=a.lk(X),[4,h.Od.uploadFile(oa,"".concat(h.Cc,"/").concat(n.toString(),".json"),null)];case 4:return qa.i(),c.cloudSeriesIds.includes(n)||c.cloudSeriesIds.push(n),[3,6];case 5:return ta=qa.i(),F.clear(),J.splice(0,J.length),r(ta),[3,6];case 6:return g(),[2]}})})}),[2,l]})})},a.prototype.Nv=function(b,c,d){var e=
b.Lb,f=a.vn(b),k=this,h=[];return e.forEach(function(n){var l=this;h.push(function(){var g=c.aborted?0:4;return Bh()(function(r){return la(l,void 0,void 0,function(){var q;return fa(this,function(F){switch(F.label){case 0:return!1!==c.aborted?[3,2]:[4,k.Mv(e,n,b,f,c,d)];case 1:return q=F.i(),c.aborted?(d.complete(),r(Error("STATIC_CANCEL")),[3,3]):[2,q];case 2:d.complete(),r(Error("STATIC_CANCEL")),F.label=3;case 3:return[2]}})})},{Gi:g})})}),h},a.prototype.Mv=function(b,c,d,e,f,k){var h=this,n=this;
return new Promise(function(l,g){return la(h,void 0,void 0,function(){var r,q,F,J,P,S,X,oa,ta,qa,Ma;return fa(this,function(Oa){switch(Oa.label){case 0:r=b.indexOf(c);for(F=q=0;F<r;F++)J=b[F],q+=J.Je();return f.aborted?(k.complete(),g("STATIC_CANCEL"),[3,6]):[3,1];case 1:return P=n.Od.getRule(),[4,c.Cm(P,e,null)];case 2:S=Oa.i(),X=new fg({Td:8}),oa=c.hn(),ta=n.Pv(S,q,oa,c,d,f,k),Oa.label=3;case 3:return Oa.m.push([3,5,,6]),[4,X.addAll(ta)];case 4:return qa=Oa.i(),ta.splice(0,ta.length),l(qa),X.clear(),
[3,6];case 5:return Ma=Oa.i(),X.clear(),ta.splice(0,ta.length),g(Ma),[3,6];case 6:return[2]}})})})},a.prototype.Pv=function(b,c,d,e,f,k,h){function n(J){var P=c+J,S=b[J];q.push(function(){var X=k.aborted?0:4;return Bh()(function(oa){return la(l,void 0,void 0,function(){var ta;return fa(this,function(qa){switch(qa.label){case 0:return!1!==k.aborted?[3,2]:[4,g.Ov(S,P,d,e,f,k,h)];case 1:return ta=qa.i(),k.aborted?(h.complete(),oa(Error("STATIC_CANCEL")),[3,3]):[2,ta];case 2:oa(Error("STATIC_CANCEL")),
qa.label=3;case 3:return[2]}})})},{Gi:X})})}for(var l=this,g=this,r=b.length,q=[],F=0;F<r;F++)n(F);return q},a.prototype.Ov=function(b,c,d,e,f,k,h){var n=this,l=f.getId();return new Promise(function(g,r){return la(this,void 0,void 0,function(){var q,F,J,P,S,X,oa,ta;return fa(this,function(qa){switch(qa.label){case 0:return q=qb.Wo(l),F=qb.Ok(c.toString(),10),k.aborted?(h.complete(),r("STATIC_CANCEL"),[3,5]):[3,1];case 1:return[4,f.pn(c)];case 2:return J=qa.i(),P=f.Xt(c),S="".concat(q,"_").concat(F),
X={Path:S,Frames:P,Slice:J.Ve,Volume:f.nc(),Modality:J.Modality,Name:d},k.aborted?(h.complete(),r("STATIC_CANCEL"),[3,5]):[3,3];case 3:return oa=qb.getFile(b,d),ta=new Ah(0),[4,n.Od.uploadFile(oa,"".concat(n.Cc,"/").concat(S),ta)];case 4:qa.i(),n.Ej++,h.next(n.Ej),!0===k.aborted?(h.complete(),r("STATIC_CANCEL")):g(X),qa.label=5;case 5:return[2]}})})})},a}(),ig=new Ba.ur("quantantnewimage",Ba.Rw);const Th=function(){function a(){}return a.createStudy=function(){return new Qi},a.createSubject=function(){return new eg},
a.createBehaviorSubject=function(){return new Ah(0)},a.populateStudy=function(b,c,d){return va(this,void 0,void 0,function(){return Da(this,function(e){switch(e.label){case 0:return[4,b.loadFromStorage(c,d)];case 1:return e.i(),b.list().forEach(function(f){a.Ko(b,f)}),b.restoreAppState(c),[2]}})})},a.Sc=function(b,c){for(var d=0;d<c.length;d++){var e=c[d];if(e[0]===b)return e[1]}return null},a.co=function(b,c,d){if("imagePlaneModule"===b){if(null!==d){b=a.Sc("0x00200052",d.descriptions);c=d.rows;
var e=d.columns,f=d.rowPixelSpacing,k=d.columnPixelSpacing,h=a.Sc("0x00200032",d.descriptions);if(!h)return null;var n=[],l=h.split("\\");if(3!==l.length)return null;for(h=0;h<l.length;h++)n.push(parseFloat(l[h]));n=new vf.Xe(n[0],n[1],n[2]);d=a.Sc("0x00200037",d.descriptions);if(!d)return null;l=d.split("\\");if(6!==l.length)return null;d=[];for(h=0;h<l.length;h++)d.push(parseFloat(l[h]));h=new vf.Xe(d[0],d[1],d[2]);d=new vf.Xe(d[3],d[4],d[5]);return new Q(b,c,e,h,d,n,f,k)}return null}},a.Ko=function(b,
c){Xa.zv(b.getImageLoaders(),c.getId(),function(d){d=function(e){return va(this,void 0,void 0,function(){var f,k,h,n,l;return Da(this,function(g){switch(g.label){case 0:return(f=e.split(":"))[0]!==c.getId()?[3,4]:(k=parseInt(f[1],10),[4,c.setFrame(k)]);case 1:return h=g.i(),(n=c.getQuality())?[4,th.tl(h,n,!1)]:[3,3];case 2:return(l=g.i()[0]).X=c.getImageId(k),[2,l];case 3:return[2,h];case 4:return[2,Promise.reject("Invalid URL")]}})})}(d);return new Y(d,null)});Xa.xa.vs(a.co)},a.Qw=function(b,c){Xa.Pw(b.getImageLoaders(),
c.getId());Xa.xa.Av(a.co)},a.isStudyZip=function(b){return(new Xi).hr(b)},a.createSeriesFromFiles=function(b,c){return va(this,void 0,void 0,function(){var d,e,f,k,h;return Da(this,function(n){switch(n.label){case 0:d=new Wi;for(e=0;e<c.length;e++)f=new z,k=c[e],f.blob=k,f.name=k.name,f.type=k.type,d.qs(f);return[4,a.ht(b,d)];case 1:return(h=n.i()).forEach(function(l){b.add(l)}),[2,h]}})})},a.isMobile=function(){return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)},a.displayImage=function(b,
c,d,e){return void 0===e&&(e=!1),va(this,void 0,void 0,function(){var f;return Da(this,function(k){switch(k.label){case 0:return[4,Xa.Ke(b.getImageLoaders(),d,null)];case 1:return f=k.i(),Xa.enable(c),Xa.displayImage(c,f),[2,f.descriptions]}})})},a.displaySeries=function(b,c,d,e){return va(this,void 0,void 0,function(){var f,k,h,n,l,g,r,q,F,J,P,S;return Da(this,function(X){switch(X.label){case 0:f=d.count();k=[];for(h=0;h<f;h++)n=d.getImageId(h),k.push(n);return l=new ca(e,k,!0,b.getImageLoaders()),
g=k[l.mb],[4,Xa.Ke(b.getImageLoaders(),g,null)];case 1:return r=X.i(),Xa.enable(c),q={wf:.05,uf:20,sv:!0},Ba.zoom.setConfiguration(q),c.quantantseries=d,Ba.Jw.enable(c),Ba.ho.enable(c),Ba.Uu.enable(c),Ba.Yi.enable(c),Ba.Zi.enable(c),Ba.Am(c,["stack","referenceLines"]),Ba.zs(c,"stack",l),c.isauto=!0,c.rendertype=0,Xa.displayImage(c,r),F={At:!0},Ba.oo.setConfiguration(F),Ba.oo.enable(c),ig.add(c),Ba.Jo.hp.enable(c,ig),J={qk:Rh,Ih:Sh,Ym:!1,Wh:!0,Rj:!0,maxWidth:150},Ba.arrowAnnotate.setConfiguration(J),
Ba.arrowAnnotate.enable(c),Ba.Qj.enable(c),Ba.up.enable(c),Ba.ji.enable(c),Ba.Ni.enable(c),Ba.Oi.enable(c),Ba.dl.qb=Ba.dl.Ri.ju,(P=Ba.dl.getConfiguration()).Qi=50,P.loop=!0,Ba.Og.enable(c),Ba.Og.ia(c),Ba.el.enable(c),Ba.Pi.enable(c),Ba.probe.enable(c),Ba.Ai.enable(c),Ba.hl.ow("#00FF00"),Ba.hl.cw("#FFA500"),Ba.hl.kw("#00FF00"),Ba.Jo.hp.enable(c),S={ki:255,Jk:2},Ba.magnify.setConfiguration(S),Ba.magnify.enable(c),Ba.Bg.enable(c),a.isMobile()?a.enableZoom(c):Ba.Zk.enable(c),a.slide(c),a.updateDefaultWindow(c),
[2]}})})},a.resizeElement=function(b,c,d){if(void 0===d&&(d=!1),!1!==d||!1!==a.isEnabled(b))!1===d&&a.pp(b),Xa.resize(b,c),(b=b.volumeviewer)&&b.resize()},a.isEnabled=function(b){return!!b.quantantseries},a.getSeries=function(b){return b.quantantseries},a.Cu=function(b){return!0===b.isauto},a.cl=function(b,c){b.isauto=c},a.getFrames=function(b){return b?(b=b.quantantseries)?b.count():0:0},a.setMobileLayoutMode=function(b,c){c?Ba.Zk.disable(b):Ba.Zk.enable(b)},a.subscribeFrameChange=function(b,c,d){b.addEventListener(Xa.da.me,
a.$o(c,d))},a.$o=function(b,c){return function(d){c.next();d=d.detail;var e=d.element;!0===a.Cu(e)&&a.updateAutoWindow(e);if(e=Ba.hf(e,"stack"))e=e.data[0],b.textContent="Image "+(e.mb+1)+"/"+e.Pa.length,e=navigator.userAgent.match(/ipad|iphone|ipod/i),(-1<navigator.userAgent.indexOf("Safari")||e)&&(d.viewport.P.lb.x=d.image.width,d.viewport.P.lb.y=d.image.height)}},a.getZoom=function(b){return!1===a.isEnabled(b)?0:Xa.va(b).scale.toFixed(2)},a.getFrame=function(b){return b?b.quantantseries?(b=Ba.hf(b,
"stack"))?b.data[0].mb:0:0:0},a.setFrame=function(b,c,d){return va(this,void 0,void 0,function(){var e,f,k,h;return Da(this,function(n){switch(n.label){case 0:return(e=c.quantantseries)&&(f=Ba.hf(c,"stack"))?(f.data[0].mb=d,k=e.getImageId(d),[4,Xa.Ke(b.getImageLoaders(),k,null)]):[3,2];case 1:h=n.i(),Xa.displayImage(c,h),n.label=2;case 2:return[2]}})})},a.getRenderType=function(b){return b.rendertype||0},a.Bn=function(b){return b.parentElement.querySelector("div.quantant-volume-container")},a.setRenderType=
function(b,c){return va(this,void 0,void 0,function(){var d,e,f,k;return Da(this,function(h){switch(h.label){case 0:return(d=b.quantantseries)?(b.rendertype=c,e=b.querySelector("canvas.quantant-canvas"),f=a.Bn(b),0!==c?[3,1]:(e.style.display="block",f.style.display="none",e.style.zIndex="1",f.style.zIndex="0",[3,3])):[2];case 1:return e.style.display="none",f.style.display="block",e.style.zIndex="0",f.style.zIndex="1",(k=b.volumeviewer)?[3,3]:[4,xh.Cp(f,d)];case 2:k=h.i(),b.volumeviewer=k,h.label=
3;case 3:return[2]}})})},a.subscribeWindowChange=function(b,c){b.addEventListener(Xa.da.qa,a.bp(c))},a.bp=function(b){return function(c){c=Xa.va(c.target);b.textContent="WL/WW: "+Math.round(c.B.windowCenter)+"/"+Math.round(c.B.windowWidth)}},a.subscribeModalityChange=function(b,c){b.addEventListener(Xa.da.qa,a.ap(b,c))},a.ap=function(b,c){return function(){var d=b.quantantseries;d&&(d=d.getModality(),c.textContent=d)}},a.enableZoom=function(b){a.disableAllTools(b);Ba.zoom.ia(b,1);Ba.so.ia(b);a.enableStackScroll(b)},
a.enableWwwc=function(b){a.disableAllTools(b);Ba.Yi.ia(b,1);Ba.Zi.ia(b);a.enableStackScroll(b)},a.pp=function(b){700>b.clientWidth?a.setMobileLayoutMode(b,!0):a.setMobileLayoutMode(b,!1)},a.resetImage=function(b){Xa.reset(b);a.pp(b)},a.play=function(b,c,d){Ba.Ni.W(c,1);Ba.Oi.W(c);Ba.probe.W(c,1);Ba.Ai.W(c);Ba.length.W(c,1);Ba.ji.W(c);Ba.magnify.W(c,1);Ba.Bg.W(c);var e=2,f=c.quantantseries;f&&(f=f.getModality(),"XA"===f||"US"===f?e=10:"CT"!==f&&"MR"!==f||(e=5));Ba.lv(b.getImageLoaders(),c,e,d)},a.stop=
function(b){!1!==a.isEnabled(b)&&Ba.ww(b)},a.isPlaying=function(b){if(!1===a.isEnabled(b))return!1;b=Ba.hf(b,"playClip");return!!(b&&b.data&&0<b.data.length)&&void 0!==b.data[0].mf},a.measureLength=function(b){a.disableAllTools(b);Ba.length.ia(b,1);Ba.ji.ia(b);a.enableStackScroll(b)},a.angle=function(b){a.disableAllTools(b);Ba.Ni.ia(b,1);Ba.Oi.ia(b);a.enableStackScroll(b)},a.slide=function(b){a.disableAllTools(b);Ba.el.ia(b);a.enableStackScroll(b);Ba.Pi.ia(b)},a.probe=function(b){a.disableAllTools(b);
Ba.probe.ia(b,1);Ba.Ai.ia(b);Ba.Pi.ia(b)},a.rotate=function(b){a.disableAllTools(b);var c=Xa.va(b);c.rotation-=90;Xa.Wa(b,c)},a.invert=function(b){a.disableAllTools(b);var c=Xa.va(b);c.invert=!c.invert;Xa.Wa(b,c)},a.magnify=function(b){a.disableAllTools(b);Ba.magnify.ia(b,1);Ba.Bg.ia(b);a.enableStackScroll(b)},a.annotate=function(b){a.disableAllTools(b);Ba.arrowAnnotate.ia(b,1);Ba.Qj.ia(b)},a.isHovering=function(b,c){return Ba.Ds(b,c)},a.clear=function(b){Xa.reset(b);Ba.Ae(b,"length");Ba.Ae(b,"simpleAngle");
Ba.Ae(b,"ellipticalRoi");Ba.Ae(b,"highlight");Ba.Ae(b,"probe");Ba.Ae(b,"rectangleRoi");Ba.Ae(b,"arrowAnnotate");Ba.Yi.W(b,1);Ba.Zi.W(b);Ba.zoom.W(b,1);Ba.magnify.W(b,1);Ba.Bg.W(b)},a.vt=function(b){var c=b.volumeviewer,d=a.Bn(b);c&&(xh.Fp(d,c),delete b.volumeviewer)},a.deletePreview=function(b){a.disableElement(b)},a.deleteView=function(b){a.setRenderType(b,0);a.isPlaying(b)&&a.stop(b);b.removeEventListener(Xa.da.me,a.$o,!1);b.removeEventListener(Xa.da.qa,a.bp,!1);b.removeEventListener(Xa.da.qa,a.ap,
!1);delete b.quantantseries;delete b.isauto;a.vt(b);delete b.rendertype;Ba.ho.disable(b);a.disableElement(b);ig.remove(b)},a.getEmptyAppStates=function(){var b=bg().Uh(JSON.stringify({imageIdToolState:{},elementToolState:{},elementViewport:{}}),{de:"string"});return btoa(b)},a.deleteSeries=function(b,c){b.remove(c);a.Qw(b,c)},a.getFile=function(b){return va(this,void 0,void 0,function(){return Da(this,function(c){switch(c.label){case 0:return[4,new Promise(function(d,e){return b.file(d,e)})];case 1:return[2,
c.i()]}})})},a.yv=function(b){return va(this,void 0,void 0,function(){return Da(this,function(c){switch(c.label){case 0:return[4,new Promise(function(d,e){return b.readEntries(d,e)})];case 1:return[2,c.i()]}})})},a.vo=function(b,c){return va(this,void 0,void 0,function(){var d,e,f,k,h;return Da(this,function(n){switch(n.label){case 0:d=0,n.label=1;case 1:return d<b.length?(e=b[d]).isFile?(c.push(e),[3,7]):[3,2]:[3,8];case 2:if(!e.isDirectory)return[3,7];f=e.createReader();k=!1;n.label=3;case 3:return[4,
a.yv(f)];case 4:return h=n.i(),[4,a.vo(h,c)];case 5:n.i(),k=0===h.length,n.label=6;case 6:if(!1===k)return[3,3];n.label=7;case 7:return d++,[3,1];case 8:return[2]}})})},a.dropFileSupported=function(){var b=-1<navigator.userAgent.indexOf("Firefox"),c=-1<navigator.userAgent.indexOf("Edge"),d=-1<navigator.userAgent.indexOf("Safari");return-1<navigator.userAgent.indexOf("Chrome")||b||c||d},a.getDroppedFiles=function(b){return va(this,void 0,void 0,function(){var c,d,e,f,k,h,n;return Da(this,function(l){switch(l.label){case 0:c=
b.length;d=[];for(k=0;k<c;k++)h=b[k].webkitGetAsEntry(),d.push(h);return e=[],[4,a.vo(d,e)];case 1:l.i(),f=[],k=0,l.label=2;case 2:return k<e.length?(h=e[k],[4,a.getFile(h)]):[3,5];case 3:n=l.i(),f.push(n),l.label=4;case 4:return k++,[3,2];case 5:return[2,f]}})})},a.disableElement=function(b){Xa.disable(b)},a.isSeriesElement=function(b,c){return c===b.quantantseries},a.setQuality=function(b,c,d){return va(this,void 0,void 0,function(){var e,f,k,h,n;return Da(this,function(l){switch(l.label){case 0:return(e=
c.quantantseries)?(f=e).getQuality()===d?[3,2]:(f.setQuality(d),k=a.getFrame(c),h=f.getImageId(k),[4,Xa.Ke(b.getImageLoaders(),h,null)]):[2];case 1:n=l.i(),Xa.St(h).forEach(function(g){Xa.displayImage(g.element,n)}),Xa.vu(h),l.label=2;case 2:return[2]}})})},a.getQuality=function(b){return(b=b.quantantseries)?b.getQuality():null},a.updateWindow=function(b,c,d){if(!1!==a.isEnabled(b)){var e=Xa.va(b);e.B.windowWidth=c;e.B.windowCenter=d;Xa.Wa(b,e);a.cl(b,!1)}},a.getWwwc=function(b){if(!1===a.isEnabled(b))return[0,
0];b=Xa.va(b);return[b.B.windowWidth,b.B.windowCenter]},a.getDescriptions=function(b){return!1===a.isEnabled(b)?[null,null,!1]:Xa.tg(b).descriptions},a.getPixelBytes=function(b){return!1===a.isEnabled(b)?0:Xa.tg(b).pixelBytes},a.getDefaultWwwc=function(b){if(!1===a.isEnabled(b))return[0,0];b=Xa.tg(b);return[b.defaultWindowWidth,b.defaultWindowCenter]},a.getAutoWwwc=function(b){if(!1===a.isEnabled(b))return[0,0];var c=Xa.tg(b);b=(Xa.va(b),c.minPixelValue*c.slope+c.intercept);c=c.maxPixelValue*c.slope+
c.intercept;return[c-b,.5*(c+b)]},a.updateDefaultWindow=function(b){if(!1!==a.isEnabled(b)){var c=this.getDefaultWwwc(b),d=Xa.va(b);d.B.windowWidth=c[0];d.B.windowCenter=c[1];Xa.Wa(b,d);a.cl(b,!1)}},a.updateAutoWindow=function(b){if(!1!==a.isEnabled(b)){var c=Xa.va(b),d=this.getAutoWwwc(b);c.B.windowWidth=d[0];c.B.windowCenter=d[1];Xa.Wa(b,c);a.cl(b,!0)}},a.disableAllTools=function(b){Ba.zoom.W(b,1);Ba.so.W(b);Ba.pan.ia(b,2);Ba.Yi.W(b,1);Ba.Zi.W(b);Ba.probe.W(b,1);Ba.Ai.W(b);Ba.length.W(b,1);Ba.ji.W(b);
Ba.up.W(b);Ba.jx.W(b);Ba.ix.ia(b);Ba.Ni.W(b,1);Ba.Oi.W(b);Ba.Og.W(b);Ba.el.W(b);Ba.Pi.W(b);Ba.magnify.disable(b);Ba.Bg.disable(b);Ba.arrowAnnotate.W(b,1);Ba.Qj.W(b)},a.enableStackScroll=function(b){b&&(Ba.Og.enable(b),Ba.Og.ia(b))},a.saveStudy=function(b,c,d,e,f){return va(this,void 0,void 0,function(){return Da(this,function(k){switch(k.label){case 0:return[4,(new qj(c,d)).saveStudy(b,e,f)];case 1:return[2,k.i()]}})})},a.getImageIconBlob=function(){return va(this,void 0,void 0,function(){return Da(this,
function(){return[2,null]})})},a.loadAllDecoders=function(){return Tg.lr()},a.ht=function(b,c){return va(this,void 0,void 0,function(){var d,e;return Da(this,function(f){switch(f.label){case 0:return d=new Vi(c),[4,qb.Lm(d)];case 1:return(e=f.i()).forEach(function(k){a.Ko(b,k)}),[2,e]}})})},a}()})(),Ya})();"object"==typeof exports&&"object"==typeof module?module.exports=zf():"function"==typeof define&&define.amd?define([],zf):"object"==typeof exports?exports.decoder=zf():self.decoder=zf();!0;
